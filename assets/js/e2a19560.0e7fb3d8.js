"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[59368],{75481:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var n=a(74848),i=a(28453);const s={title:"Defining Charts"},r=void 0,o={id:"DefiningCharts",title:"Defining Charts",description:"[//]: # (startConcept|defining_charts)",source:"@site/versioned_docs/version-1.8.1/DefiningCharts.md",sourceDirName:".",slug:"/DefiningCharts",permalink:"/wiki/1.8.1/DefiningCharts",draft:!1,unlisted:!1,editUrl:"https://github.com/gama-platform/gama/wiki/DefiningCharts/_edit",tags:[],version:"1.8.1",frontMatter:{title:"Defining Charts"},sidebar:"main",previous:{title:"Defining displays (Generalities)",permalink:"/wiki/1.8.1/DefiningDisplaysGeneralities"},next:{title:"Defining 3D Displays",permalink:"/wiki/1.8.1/Defining3DDisplays"}},l={},d=[{value:"Index",id:"index",level:2},{value:"Define a chart",id:"define-a-chart",level:2},{value:"Data definition",id:"data-definition",level:2},{value:"Various types of charts",id:"various-types-of-charts",level:2},{value:"<code>pie</code>",id:"pie",level:3},{value:"<code>series</code>",id:"series",level:3},{value:"<code>histogram</code>",id:"histogram",level:3},{value:"<code>xy</code>",id:"xy",level:3},{value:"<code>radar</code>",id:"radar",level:3},{value:"<code>heatmap</code>",id:"heatmap",level:3},{value:"<code>scatter</code>",id:"scatter",level:3},{value:"<code>box_whisker</code>",id:"box_whisker",level:3},{value:"Other charts possibilities",id:"other-charts-possibilities",level:2},{value:"Error values",id:"error-values",level:3}];function h(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"To visualize results and make analysis about your model, you will certainly have to use charts. You can define several types of charts in GAML among histograms, pie, series, radar, heatmap... For each type, you will have to determine the data you want to highlight."}),"\n",(0,n.jsx)(t.h2,{id:"index",children:"Index"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#define-a-chart",children:"Define a chart"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#data-definition",children:"Data definition"})}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"#various-types-of-charts",children:"Various types of charts"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#pie",children:"pie"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#series",children:"series"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#histogram",children:"histogram"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#xy",children:"xy"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#heatmap",children:"heatmap"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#radar",children:"radar"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#scatter",children:"scatter"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#box_whisker",children:"box_whisker"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"#other-charts-possibilities",children:"Other charts possibilities"})}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"define-a-chart",children:"Define a chart"}),"\n",(0,n.jsxs)(t.p,{children:["To define a chart, we have to use ",(0,n.jsxs)(t.a,{href:"Statements#chart",children:["the ",(0,n.jsx)(t.code,{children:"chart"})," statement"]}),". A chart has to be named (with the ",(0,n.jsx)(t.code,{children:"name"})," facet), and the type has to be specified (with the ",(0,n.jsx)(t.code,{children:"type"})," facet). The value of the ",(0,n.jsx)(t.code,{children:"type"})," facet can be ",(0,n.jsx)(t.code,{children:"histogram"}),", ",(0,n.jsx)(t.code,{children:"pie"}),", ",(0,n.jsx)(t.code,{children:"series"}),", ",(0,n.jsx)(t.code,{children:"scatter"}),", ",(0,n.jsx)(t.code,{children:"xy"}),", ",(0,n.jsx)(t.code,{children:"radar"}),", ",(0,n.jsx)(t.code,{children:"heatmap"})," or ",(0,n.jsx)(t.code,{children:"box_whisker"}),". A chart has to be defined inside a display."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'experiment my_experiment type: gui {\n    output {\n\tdisplay "my_display" {\n\t    chart "my_chart" type:pie {\n            \n            }\n\t}\n    }\n}\n'})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"chart"})," can be configured by setting by facets: in particular the labels in x and y-axis can be set (",(0,n.jsx)(t.code,{children:"x_serie_labels"}),", ",(0,n.jsx)(t.code,{children:"y_serie_labels"}),"), axes colors (",(0,n.jsx)(t.code,{children:"axes"}),"), a third axis can be added..."]}),"\n",(0,n.jsx)(t.p,{children:"After declaring your chart, you have to define the data you want to display in your chart."}),"\n",(0,n.jsx)(t.h2,{id:"data-definition",children:"Data definition"}),"\n",(0,n.jsx)(t.p,{children:"Data can be specified with:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["several ",(0,n.jsxs)(t.a,{href:"Statements#data",children:[(0,n.jsx)(t.code,{children:"data"})," statements"]})," to specify each series."]}),"\n",(0,n.jsxs)(t.li,{children:["one ",(0,n.jsxs)(t.a,{href:"Statements#datalist",children:[(0,n.jsx)(t.code,{children:"datalist"})," statement"]})," to give a list of series. It can be useful if the number of series is unknown, variable or too high."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"data"})," statement is used to specify which expression will be displayed. You have to give your data a name (that will be displayed in your chart), the value of the expression you want to follow (using the ",(0,n.jsx)(t.code,{children:"value"})," facet). You can add come optional facets such as ",(0,n.jsx)(t.code,{children:"color"})," to specify the color of your data."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'global {\n    int numberA <- 2 update: numberA*2;\n    int numberB <- 10000 update: numberB-1000;\n}\n\nexperiment my_experiment type: gui {\n    output {\n\tdisplay "my_display" {\n\t    chart "my_chart" type: pie {\n\t\tdata "numberA" value: numberA color: #red;\n\t\tdata "numberB" value: numberB color: #blue;\n\t    }\n\t}\n    }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Simple example of a simple chart (pie) display.",src:a(32983).A+"",width:"2804",height:"1652"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"datalist"})," statement is used to write several ",(0,n.jsx)(t.code,{children:"data"})," statements in one statement.  Instead of giving simple values, ",(0,n.jsx)(t.code,{children:"datalist"})," is expecting value lists. The previous chart is thus equivalent to the following one using the ",(0,n.jsx)(t.code,{children:"datalist"})," statement:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'display "my_display2" {\n    chart "my_chart2" type: pie {\n\tdatalist ["numberA","numberB"] value:  [numberA,numberB] color: [#red,#blue] ;\n    }\n}\n'})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"datalist"})," is particularly suitable in the case where the number of data series to plot can change during the simulation. As an example, when we want to plot the evolution of an attribute value for each agent (and new agents are created), we need to use this statement. As an example, in the following model, we want to plot the ",(0,n.jsx)(t.code,{children:"energy"})," of each ",(0,n.jsx)(t.code,{children:"people"})," agent. Each simulation step one agent is created."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Illustration of the datalist statement when the number of series to plot change during the simulation.",src:a(84501).A+"",width:"3426",height:"2002"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"datalist"})," provides you some additional facets you can use. If you want to learn more about them, ",(0,n.jsx)(t.a,{href:"Statements#datalist",children:"please read the documentation"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"various-types-of-charts",children:"Various types of charts"}),"\n",(0,n.jsx)(t.p,{children:"As we already said, you can display several types of graphs: the histograms, the pies, the series, the radars, heatmap..."}),"\n",(0,n.jsx)(t.h3,{id:"pie",children:(0,n.jsx)(t.code,{children:"pie"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"pie"})," chart shows on a single pie diagram the ratio of each data series over the sum of all the series.\nIt has already been illustrated above."]}),"\n",(0,n.jsx)(t.h3,{id:"series",children:(0,n.jsx)(t.code,{children:"series"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"series"})," type is perhaps the most basic plot: it displays in an x-y coordinates space the value of each data series over time (simulation step): the x-axis displays the simulation step, the y-axis represents the value of the data series. The previously defined ",(0,n.jsx)(t.code,{children:"pie"})," chart, can be displayed using a ",(0,n.jsx)(t.code,{children:"series"})," simply by changing the chart ",(0,n.jsx)(t.code,{children:"type"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'global {\n    int numberA <- 2 update: numberA*2;\n    int numberB <- 10000 update: numberB-1000;\n}\n\nexperiment my_experiment type: gui {\n    output {\n\tdisplay "my_display" {\n\t    chart "my_chart" type: series {\n\t\tdata "numberA" value: numberA color: #red;\n\t\tdata "numberB" value: numberB color: #blue;\n\t    }\n\t}\n    }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Illustration of the series charts.",src:a(97374).A+"",width:"3426",height:"2002"})}),"\n",(0,n.jsx)(t.h3,{id:"histogram",children:(0,n.jsx)(t.code,{children:"histogram"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"histogram"})," charts represent with bars the value of several data series. The previous example can be displayed with a ",(0,n.jsx)(t.code,{children:"histogram"})," chart."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Illustration of the histogram charts.",src:a(68199).A+"",width:"3426",height:"2002"})}),"\n",(0,n.jsxs)(t.p,{children:["Histograms are often used to display the distribution of a value inside a population. For example, let consider a population of agents representing human beings with an ",(0,n.jsx)(t.code,{children:"age"})," attribute. The following model illustrates the plot of the age distribution over the population. We used the operator ",(0,n.jsx)(t.code,{children:"distribution_of"})," to compute the distribution to plot: here we display the number of people agent in 20 ranges computed among the ages between 0 and 100."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'model NewModel\n\nglobal {\n    init {\n\tcreate people number: 10000;\n    }\n}\n\nspecies people {\n    float age <- gauss(40.0, 15.0);\n}\n\nexperiment my_experiment type: gui {\n    output {\n        display "my_display" {\n\t    chart "my_chart" type: histogram {\n\t\tdatalist (distribution_of(people collect each.age,20,0,100) at "legend") \n\t\t    value:(distribution_of(people collect each.age,20,0,100) at "values");\t\t\n\t    }\n\t}\n    }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Illustration of the histogram charts to plot the age distribution in an agent population.",src:a(66334).A+"",width:"3426",height:"2002"})}),"\n",(0,n.jsxs)(t.p,{children:["Note that the facet ",(0,n.jsx)(t.code,{children:"reverse_axes"})," (with ",(0,n.jsx)(t.code,{children:"true"})," value) can be added to the ",(0,n.jsx)(t.code,{children:"chart"})," statement to display horizontal bars."]}),"\n",(0,n.jsx)(t.h3,{id:"xy",children:(0,n.jsx)(t.code,{children:"xy"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"xy"})," displays are used when we want to display a value in function of another one (instead of plotting a value in function of the time): in this case, the x-axis does not represent the time in general. It can be used for example to plot a phase portrait, e.g. in the Lotka-Volterra model (prey-predator model) in which we want to plot the number of preys according to the number of predators. The code for the chart is then:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"display PhasePortrait  {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n    chart \"Lotka Volterra Phase Portrait\" type: xy {\t\t\t\t\t\t\t\n        data 'Preys/Predators' value: {first(LotkaVolterra_agent).nb_prey, first(LotkaVolterra_agent).nb_predator} color: #black ;\t\t\n    }\n}\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Use of the xy chart in order to display the phase portrait of the Lotka-Volterra model (number of prey according to the number of predators).",src:a(60320).A+"",width:"3426",height:"2002"})}),"\n",(0,n.jsx)(t.h3,{id:"radar",children:(0,n.jsx)(t.code,{children:"radar"})}),"\n",(0,n.jsxs)(t.p,{children:["A ",(0,n.jsx)(t.code,{children:"radar"})," chart displays the evolution of expression over time in a kind of circular representation: the radar representation. If reuse the example describes previously and used in the previous types of charts, we get the following adapted model:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'global {\n    int numberA <- 2 update: numberA*2;\n    int numberB <- 10000 update: numberB-1000;\n}\n\nexperiment my_experiment type: gui {\n    output {\n\tdisplay "my_display" {\n\t    chart "my_chart" type: radar background: #white axes:#black {\n\t\tdata "numberA" value: numberA color: #red accumulate_values: true;\n\t\tdata "numberB" value: numberB color: #blue accumulate_values: true;\n\t    }\n\t}\n    }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Simple example of a radar representation for 2 data series.",src:a(60497).A+"",width:"3426",height:"2002"})}),"\n",(0,n.jsx)(t.h3,{id:"heatmap",children:(0,n.jsx)(t.code,{children:"heatmap"})}),"\n",(0,n.jsx)(t.p,{children:"The heatmap in GAMA is close to a stack of histograms charts (allowing to keep a view of the evolution of values over time), representing the height of the bars by color in a gradient."}),"\n",(0,n.jsx)(t.p,{children:"Let consider the model of a human population characterized by their age. We had a population dynamic: at each step, their age is incremented by 1. They also have a probability to die at each step (that increases with their age). When an agent dies, it creates a new agent with an age equals to 0."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'model NewModel\n\nglobal {\n    init {\n\tcreate people number: 10000;\n    }\n}\n\nspecies people {\n    float age <- gauss(40.0, 15.0);\n\n    reflex older {\n\tage <- age + 1;\n    }\n\n    reflex die when: flip(age / 1000) {\n\tcreate people {\n\t    age <- 0.0;\n\t}\n\n\tdo die;\n    }\n}\n\nexperiment my_experiment type: gui {\n    output {\n\tdisplay "my_display" {\n\t    chart "my_chart" type: histogram {\n\t\tdatalist (distribution_of(people collect each.age, 20, 0, 100) at "legend") \n                    value: (distribution_of(people collect each.age, 20, 0, 100) at "values");\n\t    }\n\t}\n\n\tdisplay DistributionPosition {\n\t    chart "Distribution of age" type: heatmap \n                  x_serie_labels: (distribution_of(people collect each.age, 20, 0, 100) at "legend") {\n\t\tdata "Agedistrib" value: (distribution_of(people collect each.age, 20, 0, 100) at "values") color: #red; \n\t    }\n\t}\n    }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:"We thus displayed the evolution of the age distribution using both a histogram chart (for the instantaneous distribution) and a heatmap display to key a track of the evolution over time. In the heatmap, the left Y-axis represents the time (the simulation step number); as a consequence 1 line represents the state at 1 simulation step. The x-axis represents the various ranges of the distribution (same meaning as for histograms). The right Y-axis shows the meaning of the color gradient."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Distribution of the age in an agent population and its evolution in a heatmap.",src:a(85833).A+"",width:"3426",height:"2002"})}),"\n",(0,n.jsx)(t.h3,{id:"scatter",children:(0,n.jsx)(t.code,{children:"scatter"})}),"\n",(0,n.jsxs)(t.p,{children:['The scatter chart allows us to represent in a 2D space the "spatial distribution" of a set of values. As an example, it allows us to plot the ',(0,n.jsx)(t.code,{children:"age"})," of all the ",(0,n.jsx)(t.code,{children:"people"})," agents: the X-axis represents the possible age value and not the time as in a ",(0,n.jsx)(t.code,{children:"series"})," charts."]}),"\n",(0,n.jsxs)(t.p,{children:["Here is an example of a chart of type ",(0,n.jsx)(t.code,{children:"scatter"})," on the previous model example:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'experiment my_experiment type: gui {\n    output {\n\tdisplay "my_display" {\n\t    chart "my_chart" type: scatter {\n\t\tdata "Avg age" value: (people collect each.age) accumulate_values: true line_visible:false ;\n\t    }\n\t}\t\t\n    }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Display of the age distribution using a scatter chart.",src:a(13487).A+"",width:"3426",height:"2002"})}),"\n",(0,n.jsx)(t.h3,{id:"box_whisker",children:(0,n.jsx)(t.code,{children:"box_whisker"})}),"\n",(0,n.jsx)(t.p,{children:"[TODO]"}),"\n",(0,n.jsx)(t.h2,{id:"other-charts-possibilities",children:"Other charts possibilities"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"chart"}),", ",(0,n.jsx)(t.code,{children:"data"})," and ",(0,n.jsx)(t.code,{children:"datalist"})," come with a huge number of additional facets, allowing you to design advanced result display. We can mention here some of them."]}),"\n",(0,n.jsx)(t.h3,{id:"error-values",children:"Error values"}),"\n",(0,n.jsxs)(t.p,{children:["Just as a box plot, drawing error values around a value, allows the user to visually identify a value (e.g. a mean value) and the distribution of this value around it. The ",(0,n.jsx)(t.code,{children:"y_err_values"})," facet of ",(0,n.jsx)(t.code,{children:"data"})," can be used to show in the data plot and a range around it (e.g. the min and max value of an expression in the agent population)."]}),"\n",(0,n.jsxs)(t.p,{children:["In this example, we plot the average age of agents in the population, with the minimum and maximum value. Here is only the experiment code related to the model shown in ",(0,n.jsx)(t.a,{href:"#heatmap",children:"the previous parts"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'experiment my_experiment type: gui {\n    output {\n\tdisplay "my_display" {\n\t    chart "my_chart" type: series {\n\t\tdata "average age" value: people mean_of each.age color: #red \n                           y_err_values: [people min_of each.age,people max_of each.age];\n\t    }\n\t}\n    }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Display of the mean of the age distribution with vertical min and max values.",src:a(88563).A+"",width:"3584",height:"2118"})})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},84501:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_datalist-0b582704833295f36d063514e1ce8c7c.png"},88563:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_error-a805e9d6da16ae6fa4b0f58546a59c1a.png"},85833:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_heatmap-4d162354f87153e205e261abfc7fa7d5.png"},68199:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_histogram-f8d5c36440bb6c2de0550af661b496e1.png"},66334:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_histogram_distribution-26933914a04cf0d7f55ef3fda91978b5.png"},32983:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_pie-31c728abce5695dd0af31b6eacfae3eb.png"},60497:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_radar-8e13aaaa86ad79ecbe6207d8050ff43e.png"},13487:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_scatter-0218229909d178432c04ea3c46bbf50b.png"},97374:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_series-2062c1a45328d5bd48d58ba7d5c8bf02.png"},60320:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/charts_xy-60c032827bc94777b9e1d754f5fc0df8.png"},28453:(e,t,a)=>{a.d(t,{R:()=>r,x:()=>o});var n=a(96540);const i={},s=n.createContext(i);function r(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);