"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[77456],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(n),d=i,f=u["".concat(l,".").concat(d)]||u[d]||m[d]||s;return n?a.createElement(f,r(r({ref:t},c),{},{components:n})):a.createElement(f,r({ref:t},c))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=n.length,r=new Array(s);r[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:i,r[1]=o;for(var p=2;p<s;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},31218:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>f,frontMatter:()=>o,metadata:()=>p,toc:()=>u});var a=n(87462),i=n(63366),s=(n(67294),n(3905)),r=["components"],o={title:"Interaction between agents"},l=void 0,p={unversionedId:"InteractionBetweenAgents",id:"InteractionBetweenAgents",title:"Interaction between agents",description:"[//]: # (startConcept|interactionbetweenagents)",source:"@site/../docs/InteractionBetweenAgents.md",sourceDirName:".",slug:"/InteractionBetweenAgents",permalink:"/wiki/next/InteractionBetweenAgents",draft:!1,editUrl:"https://github.com/gama-platform/gama/wiki/InteractionBetweenAgents/_edit",tags:[],version:"current",frontMatter:{title:"Interaction between agents"},sidebar:"side",previous:{title:"Defining actions and behaviors",permalink:"/wiki/next/DefiningActionsAndBehaviors"},next:{title:"Attaching Skills",permalink:"/wiki/next/AttachingSkills"}},c={},u=[{value:"Index",id:"index",level:2},{value:"The ask statement",id:"the-ask-statement",level:2},{value:"Pseudo-variables",id:"pseudo-variables",level:2},{value:"Some useful interaction operators",id:"some-useful-interaction-operators",level:2},{value:"Example",id:"example",level:2}],m={toc:u},d="wrapper";function f(e){var t=e.components,o=(0,i.Z)(e,r);return(0,s.kt)(d,(0,a.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"In this part, we will learn how interactions between agents works. We will also present you a bunch of operators useful for your modelling. "),(0,s.kt)("h2",{id:"index"},"Index"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#the-ask-statement"},"The ask statement")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#pseudo-variables"},"Pseudo variables")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#some-useful-interaction-operators"},"Some useful interaction operators")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#example"},"Example"))),(0,s.kt)("h2",{id:"the-ask-statement"},"The ask statement"),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"ask")," statement can be used in any ",(0,s.kt)("inlineCode",{parentName:"p"},"reflex")," or ",(0,s.kt)("inlineCode",{parentName:"p"},"action")," scope. It is used to specify the interaction between the instances of your species and the other agents. You only have to specify the species of the agents you want to interact with. Here are the different ways of calling the ",(0,s.kt)("inlineCode",{parentName:"p"},"ask")," statement:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"If you want to interact with one particular agent (for example, defined as an attribute of your species):")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"species my_species {\n    agent target;\n    \n    reflex update {\n    ask target {\n        // statements\n    }\n    }\n}\n")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"If you want to interact with a group of agents:")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"species my_species {\n    list<agent> targets;\n\n    reflex update {\n    ask targets {\n        // statements\n    }\n    }\n}\n")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"If you want to interact with agents, as if they were instance of a certain species (can raise an error if it's not the case!):")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"species my_species {\n    list<agent> targets;\n\n    reflex update {\n    ask targets as:my_species {\n        // statements\n    }\n    }\n}\n")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"If you want to interact with all the agents of a species (note that the name of the species can be used in the ",(0,s.kt)("inlineCode",{parentName:"li"},"ask"),", and in many other situations, as the population of this species, i.e. the list of agents instance of this species):")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"species my_species {\n    reflex update {\n    ask other_species {\n        // statements\n    }\n    }\n}\n\nspecies other_species { }\n")),(0,s.kt)("p",null,"Note that you can use the attribute ",(0,s.kt)("em",{parentName:"p"},"population")," of ",(0,s.kt)("inlineCode",{parentName:"p"},"species")," if you find it more explicit:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"ask other_species.population\n")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},'If you want to interact with all the agents of a particular species from a list of agents (for example, using the global variable "agents"):')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"species my_specie {\n    reflex update {\n    ask agents of_species my_specie {\n        // statements\n    }\n    }\n}\n")),(0,s.kt)("h2",{id:"pseudo-variables"},"Pseudo-variables"),(0,s.kt)("p",null,"Once you are in the ",(0,s.kt)("inlineCode",{parentName:"p"},"ask")," scope, you can use some pseudo-variables to refer to the receiver agent (the one specified just after the ask statement) or the transmitter agent (the agent which is asking).\nWe use the pseudo-variable ",(0,s.kt)("inlineCode",{parentName:"p"},"self")," to refer to the receiver agent, and the pseudo-variable ",(0,s.kt)("inlineCode",{parentName:"p"},"myself")," to refer to the transmitter agent. The pseudo variable ",(0,s.kt)("inlineCode",{parentName:"p"},"self")," can be omitted when calling actions or attributes."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'species speciesA {\n    init {\n    name <- "speciesA";\n    }\n    \n    reflex update {\n    ask speciesB {\n            write name; // output : "speciesB"          \n            write self.name; // output : "speciesB"\n        write myself.name; // output : "speciesA"\n        }\n    }\n}\n\nspecies speciesB {\n    init {\n    name <- "speciesB";\n    }\n}\n')),(0,s.kt)("p",null,"Now, if we introduce a third species, we can write an ",(0,s.kt)("inlineCode",{parentName:"p"},"ask")," statement inside another. "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'species speciesA {\n    init {\n    name <- "speciesA";\n    }\n\n    reflex update {\n    ask speciesB {\n        write self.name; // output : "speciesB"\n        write myself.name; // output : "speciesA"\n        ask speciesC {\n        write self.name; // output : "speciesC"\n        write myself.name; // output : "speciesB"\n        }\n    }\n    }\n}\n\nspecies speciesB {\n    init {\n    name <- "speciesB";\n    }\n}\n\nspecies speciesC {\n    init {\n    name <- "speciesC";\n    }\n}\n')),(0,s.kt)("p",null,"Nb: try to avoid multiple imbrications of ask statements. Most of the time, there is another way to do the same thing."),(0,s.kt)("h2",{id:"some-useful-interaction-operators"},"Some useful interaction operators"),(0,s.kt)("p",null,"The operator ",(0,s.kt)("inlineCode",{parentName:"p"},"at_distance")," can be used to know the list of agents that are in a certain distance from another agent."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"species my_species {\n    reflex update {\n    list<agent> neighbors <- agents at_distance(5);\n    // neighbors contains the list of all the agents located at a distance <= 5 from the caller agent.\n    }\n}\n")),(0,s.kt)("p",null,"The operator ",(0,s.kt)("inlineCode",{parentName:"p"},"closest_to")," returns the closest agent of a position among a container."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"species my_species {\n    reflex update {\n    agent agentA <- agents closest_to(self);\n    // agentA contains the closest agent from the caller agent.\n    agent agentB <- other_specie closest_to({2,3});\n    // agentB contains the closest instance of other_specie from the location {2,3}.\n    }\n}\n\nspecies other_specie { }\n")),(0,s.kt)("h2",{id:"example"},"Example"),(0,s.kt)("p",null,"To practice those notions, here is a short basic example. Let's build a model with a given number of agents with a circle display (keep in mind that their shape has kept its default value: a point). They can move randomly on the environment (i.e. here move can be understood as changing its location), and when they are close enough from another agent, a line is displayed between them. This line is destroyed when the distance between the two agents is too important."),(0,s.kt)("p",null,"Hint: use the operator ",(0,s.kt)("inlineCode",{parentName:"p"},"polyline")," to construct a line. List the points between angle brackets ",(0,s.kt)("inlineCode",{parentName:"p"},"[")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"]"),"."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"images/connect_the_neighbors.png",src:n(27387).Z,width:"574",height:"567"})," "),(0,s.kt)("p",null,"Here is one example of implementation:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"model connect_the_neighbors\n\nglobal{\n    float speed <- 0.2;\n    float distance_to_intercept <- 10.0;\n    int number_of_circle <- 100;\n    \n    init {\n    create my_species number:number_of_circle;\n    }\n}\n\nspecies my_species {\n    reflex move {\n    location <- {location.x+rnd(-speed,speed),location.y+rnd(-speed,speed)};\n    }\n    \n    aspect default {\n    draw circle(1) color: #yellow border: #black;\n    ask my_species at_distance(distance_to_intercept) {\n        draw polyline([self.location,myself.location]) color:#black;\n    }\n    }\n}\n\nexperiment my_experiment type:gui {\n    output{\n    display myDisplay {\n        species my_species aspect:default;\n    }\n    }\n}\n")))}f.isMDXComponent=!0},27387:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/connect_the_neighbors-593e2f5f169ce517599f2e4bd7deafff.png"}}]);