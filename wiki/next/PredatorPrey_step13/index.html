<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>13. Model exploration · GAMA-Platform</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This 13th step illustrates how to explore the model using a batch experiment."/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="13. Model exploration · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gama-platform.org/"/><meta property="og:description" content="This 13th step illustrates how to explore the model using a batch experiment."/><meta property="og:image" content="https://gama-platform.org//resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://gama-platform.org//resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/img/gama-logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://gama-platform.org/blog/atom.xml" title="GAMA-Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://gama-platform.org/blog/feed.xml" title="GAMA-Platform Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.4.4/fuse.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/searchEngine.js"></script><script type="text/javascript" src="/js/dark.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/gama-logo.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/wiki/next/Home" target="_self">Documentation</a></li><li class="siteNavGroupActive"><a href="/wiki/next/Tutorials" target="_self">Tutorials</a></li><li class=""><a href="/download" target="_self">Download</a></li><li class=""><a href="/wiki/next/Contribute" target="_self">Contribute</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/faq" target="_self">FAQ</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Predator Prey</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/Tutorials">Tutorials</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Predator Prey<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey">Predator Prey</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step1">1. Basic Model</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step2">2. Vegetation Dynamic</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step3">3. Prey Agent Behavior</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step4">4. Inspectors and Monitors</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step5">5. Predator Agent</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step6">6. Breeding</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step7">7. Agent Aspect</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step8">8. Complex Behavior</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step9">9. Stopping condition</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step10">10. Charts</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step11">11. Writing Files</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PredatorPrey_step12">12. Image loading</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/wiki/next/PredatorPrey_step13">13. Model exploration</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Road Traffic<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/RoadTrafficModel">Road Traffic</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RoadTrafficModel_step1">1. Loading of GIS Data</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RoadTrafficModel_step2">2. People Agents</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RoadTrafficModel_step3">3. Movement of People</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RoadTrafficModel_step4">4. Weight for Road Network</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RoadTrafficModel_step5">5. Dynamic weights</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RoadTrafficModel_step6">6. Charts</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RoadTrafficModel_step7">7. Automatic Road Repair</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">3D Tutorial<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/ThreeD">3D Tutorial</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ThreeD_step1">1. Basic Model</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ThreeD_step2">2. Moving Cells</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ThreeD_step3">3. Connections</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Incremental Model<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/IncrementalModel">Incremental Model</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/IncrementalModel_step1">1. Simple SI Model</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/IncrementalModel_step2">2. Charts</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/IncrementalModel_step3">3. Integration of GIS Data</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/IncrementalModel_step4">4. Movement on Graph</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/IncrementalModel_step5">5. Visualizing in 3D</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/IncrementalModel_step6">6. Multi-Level</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/IncrementalModel_step7">7. Differential Equations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Luneray&#x27;s flu<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/LuneraysFlu">Luneray&#x27;s flu</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/LuneraysFlu_step1">1. Creation of a first basic disease spreading model</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/LuneraysFlu_step2">2. Definition of monitors and chart outputs</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/LuneraysFlu_step3">3. Importation of GIS data</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/LuneraysFlu_step4">4. Use of a graph to constraint the movements of people</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/LuneraysFlu_step5">5. Definition of 3D displays</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/LuneraysFlu_step6">6. Exploration of the model</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">BDI Agents<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/BDIAgents">BDI Agents</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BDIAgents_step1">1. Skeleton model</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BDIAgents_step2">2. BDI Agents</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BDIAgents_step3">3. Social relation</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BDIAgents_step4">4. Emotions and Personality</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BDIAgents_step5">5. Norms, obligation, and enforcement</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">13. Model exploration</h1></header><article><div><span><p>This 13th step illustrates how to explore the model using a batch experiment.</p>
<h2><a class="anchor" aria-hidden="true" id="formulation"></a><a href="#formulation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Formulation</h2>
<ul>
<li>Addition of a new experiment of type batch.</li>
<li>Definition of the parameters to be explored.</li>
<li>Definition of the exploration method.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="model-definition"></a><a href="#model-definition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Model Definition</h2>
<p>The model itself (the <code>global</code> and the various species) will be modified. We will simply add a new experiment to define a new way of launching the simulation.</p>
<h3><a class="anchor" aria-hidden="true" id="batch-experiment"></a><a href="#batch-experiment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>batch experiment</h3>
<p>We will thus add a new <code>experiment</code> in the file. The specificity of this experiment will be its <code>type</code>: we will define a <code>batch</code> experiment, instead of a <code>gui</code> (as done until now). This experiment will not manage any display but will run several simulations to explore the parameter space (depending on the exploration method).</p>
<pre><code class="hljs"><span class="hljs-builtin">experiment</span> Optimization <span class="hljs-symbol">type:</span> batch <span class="hljs-symbol">repeat:</span> 2 <span class="hljs-symbol">keep_seed:</span> true <span class="hljs-symbol">until:</span> ( time &gt; 200 ) {
    ...
}
</code></pre>
<p>A <code>batch</code> experiment comes with more facets:</p>
<ul>
<li><strong><code>repeat</code></strong>: the number of simulations to launch for a single parameter configuration,</li>
<li><strong><code>keep_seed</code></strong>: set whether the seed of the random number generator is the same for each first replication (the first simulation run for a given parameter configuration),</li>
<li><strong><code>until</code></strong>: define the simulation stop condition.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="parameters-definition"></a><a href="#parameters-definition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters definition</h3>
<p>We now need to define the parameters to explore: similarly to <code>gui</code> experiment, parameters are taken among the global variables. In a <code>batch</code> experiment, it is necessary to define their value range (using the <code>among</code> facet or the <code>min</code>, <code>max</code>, and <code>step</code> ones).</p>
<pre><code class="hljs"><span class="hljs-keyword">parameter</span> <span class="hljs-string">"Prey max transfer:"</span> <span class="hljs-symbol">var:</span> prey_max_transfer <span class="hljs-symbol">min:</span> 0.05 <span class="hljs-symbol">max:</span> 0.5 <span class="hljs-symbol">step:</span> 0.05 ;
<span class="hljs-keyword">parameter</span> <span class="hljs-string">"Prey energy reproduce:"</span> <span class="hljs-symbol">var:</span> prey_energy_reproduce <span class="hljs-symbol">min:</span> 0.05 <span class="hljs-symbol">max:</span> 0.75 <span class="hljs-symbol">step:</span> 0.05;
<span class="hljs-keyword">parameter</span> <span class="hljs-string">"Predator energy transfer:"</span> <span class="hljs-symbol">var:</span> predator_energy_transfer <span class="hljs-symbol">min:</span> 0.1 <span class="hljs-symbol">max:</span> 1.0 <span class="hljs-symbol">step:</span> 0.1 ;
<span class="hljs-keyword">parameter</span> <span class="hljs-string">"Predator energy reproduce:"</span> <span class="hljs-symbol">var:</span> predator_energy_reproduce <span class="hljs-symbol">min:</span> 0.1 <span class="hljs-symbol">max:</span> 1.0 <span class="hljs-symbol">step:</span> 0.1;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="exploration-method"></a><a href="#exploration-method" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exploration method</h3>
<p>Finally, the exploration method has to be specified (the default method is exhaustive exploration). GAMA provides several methods, <a href="ExplorationMethods">detailed in this page</a>.
We choose here the Tabu search method, defined by:</p>
<pre><code class="hljs">method <span class="hljs-keyword">tabu</span> <span class="hljs-symbol">maximize:</span> nb_preys + nb_predators <span class="hljs-symbol">iter_max:</span> 10 <span class="hljs-symbol">tabu_list_size:</span> 3;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="save-exploration-results"></a><a href="#save-exploration-results" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Save exploration results</h3>
<p>In a previous step, we introduced the save of results at each step of a simulation. When exploring a model, it could be interesting to save results after each simulation.</p>
<p>To this purpose, we will use again the <code>save</code> statement but in a <code>reflex</code> of the <code>experiment</code> and not a reflex of the model. In <strong>a batch experiment</strong>, the reflexes are executed after all the replications for a single parameter configuration. The built-in <code>simulations</code> variable contains all the simulations; we can thus ask them the results we want to save. In addition, we save the parameter values to keep track.</p>
<p>We will use the <code>save</code> statement to save the results as a <code>csv</code> file (as it is easier to manipulate by analysis software, such as R). We can thus save a list of values:</p>
<pre><code class="hljs"><span class="hljs-builtin">reflex</span> save_results_explo {
    <span class="hljs-keyword">ask</span> simulations {
    <span class="hljs-keyword">save</span> [<span class="hljs-literal">int</span>(self),prey_max_transfer,prey_energy_reproduce,predator_energy_transfer,predator_energy_reproduce,self.nb_predators,self.nb_preys] 
          <span class="hljs-symbol">to:</span> <span class="hljs-string">"results.csv"</span> <span class="hljs-symbol">type:</span> <span class="hljs-string">"csv"</span> <span class="hljs-symbol">rewrite:</span> (<span class="hljs-literal">int</span>(self) = 0) ? true : false <span class="hljs-symbol">header:</span> true;
    }       
}
</code></pre>
<p>This saved for each simulation its <code>self.nb_predators</code> and <code>self.nb_preys</code>. Note that <code>self</code> here is mandatory!</p>
<h3><a class="anchor" aria-hidden="true" id="deal-with-the-simulation-stop"></a><a href="#deal-with-the-simulation-stop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deal with the simulation stop</h3>
<p>An issue we will have with the model is that it already has a stop condition: it pauses when either the number of preys or the number of predators become zero. We will introduce a new global variable <code>is_batch</code> to specify whether the simulation is in batch mode or not. In batch mode, the reflex <code>stop_simulation</code> should not be executed.</p>
<pre><code class="hljs">global {
    ...
    <span class="hljs-literal">bool</span> is_batch &lt;- false;
    ...
    <span class="hljs-builtin">reflex</span> stop_simulation <span class="hljs-symbol">when:</span> ((nb_preys = 0) or (nb_predators = 0)) and !is_batch {
    <span class="hljs-keyword">do</span> pause ;
    } 
}
</code></pre>
<p>This variable should thus now be initialized by default to <code>false</code> (so in the <code>init</code> block of the model) and in the batch experiment to true.</p>
<pre><code class="hljs"><span class="hljs-builtin">experiment</span> Optimization <span class="hljs-symbol">type:</span> batch <span class="hljs-symbol">repeat:</span> 2 <span class="hljs-symbol">keep_seed:</span> true <span class="hljs-symbol">until:</span> ( time &gt; 200 ) {
    ...
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Batch mode:"</span> <span class="hljs-symbol">var:</span> is_batch &lt;- true;
    ...
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="conclusion"></a><a href="#conclusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>Congratulations, you have completed your first GAMA models! Now, you have enough knowledge to create many models that includes: dynamic grid-based environment, moving and interacting agents and the needed visualization to make good use of your simulation. Feel free to use this knowledge to create your very own models! Or perhaps you want to continue your study with the more advanced <a href="Tutorials">tutorials</a>?</p>
<h2><a class="anchor" aria-hidden="true" id="complete-model"></a><a href="#complete-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Complete Model</h2>
<pre><code class="hljs"><span class="hljs-builtin">model</span> prey_predator

global {
    <span class="hljs-literal">int</span> nb_preys_init &lt;- 200;
    <span class="hljs-literal">int</span> nb_predators_init &lt;- 20;
    <span class="hljs-literal">float</span> prey_max_energy &lt;- 1.0;
    <span class="hljs-literal">float</span> prey_max_transfer &lt;- 0.1;
    <span class="hljs-literal">float</span> prey_energy_consum &lt;- 0.05;
    <span class="hljs-literal">float</span> predator_max_energy &lt;- 1.0;
    <span class="hljs-literal">float</span> predator_energy_transfer &lt;- 0.5;
    <span class="hljs-literal">float</span> predator_energy_consum &lt;- 0.02;
    <span class="hljs-literal">float</span> prey_proba_reproduce &lt;- 0.01;
    <span class="hljs-literal">int</span> prey_nb_max_offsprings &lt;- 5;
    <span class="hljs-literal">float</span> prey_energy_reproduce &lt;- 0.5;
    <span class="hljs-literal">float</span> predator_proba_reproduce &lt;- 0.01;
    <span class="hljs-literal">int</span> predator_nb_max_offsprings &lt;- 3;
    <span class="hljs-literal">float</span> predator_energy_reproduce &lt;- 0.5;
    <span class="hljs-literal">file</span> map_init &lt;- image_file(<span class="hljs-string">"../includes/data/raster_map.png"</span>);
    <span class="hljs-literal">int</span> nb_preys -&gt; {length(prey)};
    <span class="hljs-literal">int</span> nb_predators -&gt; {length(predator)};
    <span class="hljs-literal">bool</span> is_batch &lt;- false;

    init {
        <span class="hljs-keyword">create</span> prey <span class="hljs-symbol">number:</span> nb_preys_init;
        <span class="hljs-keyword">create</span> predator <span class="hljs-symbol">number:</span> nb_predators_init;
        <span class="hljs-keyword">ask</span> vegetation_cell {
            color &lt;- <span class="hljs-literal">rgb</span> (map_init at {grid_x,grid_y});
            food &lt;- 1 - (((color as <span class="hljs-literal">list</span>) at 0) / 255);
            food_prod &lt;- food / 100; 
        }
    }
    
    <span class="hljs-builtin">reflex</span> save_result <span class="hljs-symbol">when:</span> (nb_preys &gt; 0) and (nb_predators &gt; 0){
        <span class="hljs-keyword">save</span> (<span class="hljs-string">"cycle: "</span>+ cycle + <span class="hljs-string">"; nbPreys: "</span> + nb_preys
            + <span class="hljs-string">"; minEnergyPreys: "</span> + (prey min_of each.energy)
            + <span class="hljs-string">"; maxSizePreys: "</span> + (prey max_of each.energy) 
               + <span class="hljs-string">"; nbPredators: "</span> + nb_predators           
               + <span class="hljs-string">"; minEnergyPredators: "</span> + (predator min_of each.energy)          
               + <span class="hljs-string">"; maxSizePredators: "</span> + (predator max_of each.energy)) 
               <span class="hljs-symbol">to:</span> <span class="hljs-string">"results.txt"</span> <span class="hljs-symbol">type:</span> <span class="hljs-string">"text"</span> <span class="hljs-symbol">rewrite:</span> (cycle = 0) ? true : false;
    }
    
    <span class="hljs-builtin">reflex</span> stop_simulation <span class="hljs-symbol">when:</span> ((nb_preys = 0) or (nb_predators = 0)) and !is_batch {
        <span class="hljs-keyword">do</span> pause;
    } 
}

<span class="hljs-literal">species</span> generic_species {
    <span class="hljs-literal">float</span> size &lt;- 1.0;
    <span class="hljs-literal">rgb</span> color;
    <span class="hljs-literal">float</span> max_energy;
    <span class="hljs-literal">float</span> max_transfer;
    <span class="hljs-literal">float</span> energy_consum;
    <span class="hljs-literal">float</span> proba_reproduce;
    <span class="hljs-literal">int</span> nb_max_offsprings;
    <span class="hljs-literal">float</span> energy_reproduce;
    image_file my_icon;
    vegetation_cell my_cell &lt;- one_of(vegetation_cell);
    <span class="hljs-literal">float</span> energy &lt;- rnd(max_energy) <span class="hljs-symbol">update:</span> energy - energy_consum <span class="hljs-symbol">max:</span> max_energy;

    init {
        location &lt;- my_cell.location;
    }

    <span class="hljs-builtin">reflex</span> basic_move {
        my_cell &lt;- choose_cell();
        location &lt;- my_cell.location;
    }

    <span class="hljs-builtin">reflex</span> eat {
        energy &lt;- energy + energy_from_eat();        
    }

    <span class="hljs-builtin">reflex</span> die <span class="hljs-symbol">when:</span> energy &lt;= 0 {
        <span class="hljs-keyword">do</span> die;
    }

    <span class="hljs-builtin">reflex</span> reproduce <span class="hljs-symbol">when:</span> (energy &gt;= energy_reproduce) and (flip(proba_reproduce)) {
        <span class="hljs-literal">int</span> nb_offsprings &lt;- rnd(1, nb_max_offsprings);
        <span class="hljs-keyword">create</span> <span class="hljs-literal">species</span>(self) <span class="hljs-symbol">number:</span> nb_offsprings {
            my_cell &lt;- myself.my_cell;
            location &lt;- my_cell.location;
            energy &lt;- myself.energy / nb_offsprings;
        }

        energy &lt;- energy / nb_offsprings;
    }

    <span class="hljs-literal">float</span> energy_from_eat {
        <span class="hljs-keyword">return</span> 0.0;
    }

    vegetation_cell choose_cell {
        <span class="hljs-keyword">return</span> nil;
    }

    <span class="hljs-keyword">aspect</span> base {
        <span class="hljs-keyword">draw</span> circle(size) <span class="hljs-symbol">color:</span> color;
    }

    <span class="hljs-keyword">aspect</span> icon {
        <span class="hljs-keyword">draw</span> my_icon <span class="hljs-symbol">size:</span> 2 * size;
    }

    <span class="hljs-keyword">aspect</span> info {
        <span class="hljs-keyword">draw</span> square(size) <span class="hljs-symbol">color:</span> color;
        <span class="hljs-keyword">draw</span> <span class="hljs-literal">string</span>(energy with_precision 2) <span class="hljs-symbol">size:</span> 3 <span class="hljs-symbol">color:</span> #black;
    }
}

<span class="hljs-literal">species</span> prey <span class="hljs-symbol">parent:</span> generic_species {
    <span class="hljs-literal">rgb</span> color &lt;- #blue;
    <span class="hljs-literal">float</span> max_energy &lt;- prey_max_energy;
    <span class="hljs-literal">float</span> max_transfer &lt;- prey_max_transfer;
    <span class="hljs-literal">float</span> energy_consum &lt;- prey_energy_consum;
    <span class="hljs-literal">float</span> proba_reproduce &lt;- prey_proba_reproduce;
    <span class="hljs-literal">int</span> nb_max_offsprings &lt;- prey_nb_max_offsprings;
    <span class="hljs-literal">float</span> energy_reproduce &lt;- prey_energy_reproduce;
    image_file my_icon &lt;- image_file(<span class="hljs-string">"../includes/data/sheep.png"</span>);

    <span class="hljs-literal">float</span> energy_from_eat {
        <span class="hljs-literal">float</span> energy_transfer &lt;- 0.0;
        <span class="hljs-keyword">if</span>(my_cell.food &gt; 0) {
            energy_transfer &lt;- min([max_transfer, my_cell.food]);
            my_cell.food &lt;- my_cell.food - energy_transfer;
        }             
        <span class="hljs-keyword">return</span> energy_transfer;
    }

    vegetation_cell choose_cell {
        <span class="hljs-keyword">return</span> (my_cell.neighbors2) with_max_of (each.food);
    }
}

<span class="hljs-literal">species</span> predator <span class="hljs-symbol">parent:</span> generic_species {
    <span class="hljs-literal">rgb</span> color &lt;- #red;
    <span class="hljs-literal">float</span> max_energy &lt;- predator_max_energy;
    <span class="hljs-literal">float</span> energy_transfer &lt;- predator_energy_transfer;
    <span class="hljs-literal">float</span> energy_consum &lt;- predator_energy_consum;
    <span class="hljs-literal">float</span> proba_reproduce &lt;- predator_proba_reproduce;
    <span class="hljs-literal">int</span> nb_max_offsprings &lt;- predator_nb_max_offsprings;
    <span class="hljs-literal">float</span> energy_reproduce &lt;- predator_energy_reproduce;
    image_file my_icon &lt;- image_file(<span class="hljs-string">"../includes/data/wolf.png"</span>);

    <span class="hljs-literal">float</span> energy_from_eat {
        <span class="hljs-literal">list</span>&lt;prey&gt; reachable_preys &lt;- prey inside (my_cell);
        <span class="hljs-keyword">if</span>(! empty(reachable_preys)) {
            <span class="hljs-keyword">ask</span> one_of (reachable_preys) {
                <span class="hljs-keyword">do</span> die;
            }
            <span class="hljs-keyword">return</span> energy_transfer;
        }
        <span class="hljs-keyword">return</span> 0.0;
    }

    vegetation_cell choose_cell {
        vegetation_cell my_cell_tmp &lt;- shuffle(my_cell.neighbors2) first_with (!(empty(prey inside (each))));
        <span class="hljs-keyword">if</span> my_cell_tmp != nil {
            <span class="hljs-keyword">return</span> my_cell_tmp;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> one_of(my_cell.neighbors2);
        }
    }
}

grid vegetation_cell <span class="hljs-symbol">width:</span> 50 <span class="hljs-symbol">height:</span> 50 <span class="hljs-symbol">neighbors:</span> 4 {
    <span class="hljs-literal">float</span> max_food &lt;- 1.0;
    <span class="hljs-literal">float</span> food_prod &lt;- rnd(0.01);
    <span class="hljs-literal">float</span> food &lt;- rnd(1.0) <span class="hljs-symbol">max:</span> max_food <span class="hljs-symbol">update:</span> food + food_prod;
    <span class="hljs-literal">rgb</span> color &lt;- <span class="hljs-literal">rgb</span>(<span class="hljs-literal">int</span>(255 * (1 - food)), 255, <span class="hljs-literal">int</span>(255 * (1 - food))) <span class="hljs-symbol">update:</span> <span class="hljs-literal">rgb</span>(<span class="hljs-literal">int</span>(255 * (1 - food)), 255, <span class="hljs-literal">int</span>(255 * (1 - food)));
    <span class="hljs-literal">list</span>&lt;vegetation_cell&gt; neighbors2 &lt;- (self neighbors_at 2);
}

<span class="hljs-builtin">experiment</span> prey_predator <span class="hljs-symbol">type:</span> gui {
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Initial number of preys: "</span> <span class="hljs-symbol">var:</span> nb_preys_init <span class="hljs-symbol">min:</span> 0 <span class="hljs-symbol">max:</span> 1000 <span class="hljs-symbol">category:</span> <span class="hljs-string">"Prey"</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Prey max energy: "</span> <span class="hljs-symbol">var:</span> prey_max_energy <span class="hljs-symbol">category:</span> <span class="hljs-string">"Prey"</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Prey max transfer: "</span> <span class="hljs-symbol">var:</span> prey_max_transfer <span class="hljs-symbol">category:</span> <span class="hljs-string">"Prey"</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Prey energy consumption: "</span> <span class="hljs-symbol">var:</span> prey_energy_consum <span class="hljs-symbol">category:</span> <span class="hljs-string">"Prey"</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Initial number of predators: "</span> <span class="hljs-symbol">var:</span> nb_predators_init <span class="hljs-symbol">min:</span> 0 <span class="hljs-symbol">max:</span> 200 <span class="hljs-symbol">category:</span> <span class="hljs-string">"Predator"</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Predator max energy: "</span> <span class="hljs-symbol">var:</span> predator_max_energy <span class="hljs-symbol">category:</span> <span class="hljs-string">"Predator"</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Predator energy transfer: "</span> <span class="hljs-symbol">var:</span> predator_energy_transfer <span class="hljs-symbol">category:</span> <span class="hljs-string">"Predator"</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Predator energy consumption: "</span> <span class="hljs-symbol">var:</span> predator_energy_consum <span class="hljs-symbol">category:</span> <span class="hljs-string">"Predator"</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">'Prey probability reproduce: '</span> <span class="hljs-symbol">var:</span> prey_proba_reproduce <span class="hljs-symbol">category:</span> <span class="hljs-string">'Prey'</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">'Prey nb max offsprings: '</span> <span class="hljs-symbol">var:</span> prey_nb_max_offsprings <span class="hljs-symbol">category:</span> <span class="hljs-string">'Prey'</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">'Prey energy reproduce: '</span> <span class="hljs-symbol">var:</span> prey_energy_reproduce <span class="hljs-symbol">category:</span> <span class="hljs-string">'Prey'</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">'Predator probability reproduce: '</span> <span class="hljs-symbol">var:</span> predator_proba_reproduce <span class="hljs-symbol">category:</span> <span class="hljs-string">'Predator'</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">'Predator nb max offsprings: '</span> <span class="hljs-symbol">var:</span> predator_nb_max_offsprings <span class="hljs-symbol">category:</span> <span class="hljs-string">'Predator'</span>;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">'Predator energy reproduce: '</span> <span class="hljs-symbol">var:</span> predator_energy_reproduce <span class="hljs-symbol">category:</span> <span class="hljs-string">'Predator'</span>;

    <span class="hljs-keyword">output</span> {
        <span class="hljs-keyword">display</span> main_display {
            grid vegetation_cell <span class="hljs-symbol">border:</span> #black;
            <span class="hljs-literal">species</span> prey <span class="hljs-symbol">aspect:</span> icon;
            <span class="hljs-literal">species</span> predator <span class="hljs-symbol">aspect:</span> icon;
        }

        <span class="hljs-keyword">display</span> info_display {
            grid vegetation_cell <span class="hljs-symbol">border:</span> #black;
            <span class="hljs-literal">species</span> prey <span class="hljs-symbol">aspect:</span> info;
            <span class="hljs-literal">species</span> predator <span class="hljs-symbol">aspect:</span> info;
        }

        <span class="hljs-keyword">display</span> Population_information <span class="hljs-symbol">refresh:</span> every(5#cycles) {
            <span class="hljs-keyword">chart</span> <span class="hljs-string">"Species evolution"</span> <span class="hljs-symbol">type:</span> series <span class="hljs-symbol">size:</span> {1,0.5} <span class="hljs-symbol">position:</span> {0, 0} {
                <span class="hljs-keyword">data</span> <span class="hljs-string">"number_of_preys"</span> <span class="hljs-symbol">value:</span> nb_preys <span class="hljs-symbol">color:</span> #blue;
                <span class="hljs-keyword">data</span> <span class="hljs-string">"number_of_predator"</span> <span class="hljs-symbol">value:</span> nb_predators <span class="hljs-symbol">color:</span> #red;
            }
            <span class="hljs-keyword">chart</span> <span class="hljs-string">"Prey Energy Distribution"</span> <span class="hljs-symbol">type:</span> histogram <span class="hljs-symbol">background:</span> #lightgray <span class="hljs-symbol">size:</span> {0.5,0.5} <span class="hljs-symbol">position:</span> {0, 0.5} {
                <span class="hljs-keyword">data</span> <span class="hljs-string">"]0;0.25]"</span> <span class="hljs-symbol">value:</span> prey count (each.energy &lt;= 0.25) <span class="hljs-symbol">color:</span>#blue;
                <span class="hljs-keyword">data</span> <span class="hljs-string">"]0.25;0.5]"</span> <span class="hljs-symbol">value:</span> prey count ((each.energy &gt; 0.25) and (each.energy &lt;= 0.5)) <span class="hljs-symbol">color:</span>#blue;
                <span class="hljs-keyword">data</span> <span class="hljs-string">"]0.5;0.75]"</span> <span class="hljs-symbol">value:</span> prey count ((each.energy &gt; 0.5) and (each.energy &lt;= 0.75)) <span class="hljs-symbol">color:</span>#blue;
                <span class="hljs-keyword">data</span> <span class="hljs-string">"]0.75;1]"</span> <span class="hljs-symbol">value:</span> prey count (each.energy &gt; 0.75) <span class="hljs-symbol">color:</span>#blue;
            }
            <span class="hljs-keyword">chart</span> <span class="hljs-string">"Predator Energy Distribution"</span> <span class="hljs-symbol">type:</span> histogram <span class="hljs-symbol">background:</span> #lightgray <span class="hljs-symbol">size:</span> {0.5,0.5} <span class="hljs-symbol">position:</span> {0.5, 0.5} {
                <span class="hljs-keyword">data</span> <span class="hljs-string">"]0;0.25]"</span> <span class="hljs-symbol">value:</span> predator count (each.energy &lt;= 0.25) <span class="hljs-symbol">color:</span> #red;
                <span class="hljs-keyword">data</span> <span class="hljs-string">"]0.25;0.5]"</span> <span class="hljs-symbol">value:</span> predator count ((each.energy &gt; 0.25) and (each.energy &lt;= 0.5)) <span class="hljs-symbol">color:</span> #red;
                <span class="hljs-keyword">data</span> <span class="hljs-string">"]0.5;0.75]"</span> <span class="hljs-symbol">value:</span> predator count ((each.energy &gt; 0.5) and (each.energy &lt;= 0.75)) <span class="hljs-symbol">color:</span> #red;
                <span class="hljs-keyword">data</span> <span class="hljs-string">"]0.75;1]"</span> <span class="hljs-symbol">value:</span> predator count (each.energy &gt; 0.75) <span class="hljs-symbol">color:</span> #red;
            }
        }

        <span class="hljs-keyword">monitor</span> <span class="hljs-string">"Number of preys"</span> <span class="hljs-symbol">value:</span> nb_preys;
        <span class="hljs-keyword">monitor</span> <span class="hljs-string">"Number of predators"</span> <span class="hljs-symbol">value:</span> nb_predators;
    }
}

<span class="hljs-builtin">experiment</span> Optimization <span class="hljs-symbol">type:</span> batch <span class="hljs-symbol">repeat:</span> 2 <span class="hljs-symbol">keep_seed:</span> true <span class="hljs-symbol">until:</span> ( time &gt; 200 ) {
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Prey max transfer:"</span> <span class="hljs-symbol">var:</span> prey_max_transfer <span class="hljs-symbol">min:</span> 0.05 <span class="hljs-symbol">max:</span> 0.5 <span class="hljs-symbol">step:</span> 0.05;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Prey energy reproduce:"</span> <span class="hljs-symbol">var:</span> prey_energy_reproduce <span class="hljs-symbol">min:</span> 0.05 <span class="hljs-symbol">max:</span> 0.75 <span class="hljs-symbol">step:</span> 0.05;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Predator energy transfer:"</span> <span class="hljs-symbol">var:</span> predator_energy_transfer <span class="hljs-symbol">min:</span> 0.1 <span class="hljs-symbol">max:</span> 1.0 <span class="hljs-symbol">step:</span> 0.1;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Predator energy reproduce:"</span> <span class="hljs-symbol">var:</span> predator_energy_reproduce <span class="hljs-symbol">min:</span> 0.1 <span class="hljs-symbol">max:</span> 1.0 <span class="hljs-symbol">step:</span> 0.1;
    <span class="hljs-keyword">parameter</span> <span class="hljs-string">"Batch mode:"</span> <span class="hljs-symbol">var:</span> is_batch &lt;- true;
    
    method <span class="hljs-keyword">tabu</span> <span class="hljs-symbol">maximize:</span> nb_preys + nb_predators <span class="hljs-symbol">iter_max:</span> 10 <span class="hljs-symbol">tabu_list_size:</span> 3;
    
    
    <span class="hljs-builtin">reflex</span> save_results_explo {
        <span class="hljs-keyword">ask</span> simulations {
            <span class="hljs-keyword">save</span> [<span class="hljs-literal">int</span>(self),prey_max_transfer,prey_energy_reproduce,predator_energy_transfer,predator_energy_reproduce,self.nb_predators,self.nb_preys] 
                   <span class="hljs-symbol">to:</span> <span class="hljs-string">"results.csv"</span> <span class="hljs-symbol">type:</span> <span class="hljs-string">"csv"</span> <span class="hljs-symbol">rewrite:</span> (<span class="hljs-literal">int</span>(self) = 0) ? true : false <span class="hljs-symbol">header:</span> true;
        }        
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/wiki/next/PredatorPrey_step12"><span class="arrow-prev">← </span><span>12. Image loading</span></a><a class="docs-next button" href="/wiki/next/RoadTrafficModel"><span>Road Traffic</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#formulation">Formulation</a></li><li><a href="#model-definition">Model Definition</a><ul class="toc-headings"><li><a href="#batch-experiment">batch experiment</a></li><li><a href="#parameters-definition">Parameters definition</a></li><li><a href="#exploration-method">Exploration method</a></li><li><a href="#save-exploration-results">Save exploration results</a></li><li><a href="#deal-with-the-simulation-stop">Deal with the simulation stop</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li><li><a href="#complete-model">Complete Model</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap" style="margin-bottom:0"><a href="/" class="nav-home"><img src="/img/gama-logo.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Networks</h5><a href="https://github.com/gama-platform"><i class="fab fa-github"></i> GitHub</a><a href="https://www.facebook.com/GamaPlatform/" target="_blank"><i class="fab fa-facebook"></i> Facebook</a><a href="https://twitter.com/gamaplatform" target="_blank"><i class="fab fa-twitter"></i> Twitter</a><a href="https://www.linkedin.com/company/gama-platform" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a><a href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank"><i class="fab fa-youtube"></i> Youtube</a><a href="https://gama-platform.github.io/blog/feed" target="_blank"><i class="fa fa-rss"></i> Blog RSS</a></div><div style="flex-grow:2"><h5>Mailing list</h5><a href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br/>gama-platform@googlegroups.com</a><a href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br/>gama-dev@googlegroups.com</a></div><div style="color:hsla(0,0%,100%,.4);flex-grow:3"><h5>License</h5><p>Copyright (C) - 2022 GAMA-Platform.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.</p><p>A copy of the license is included <a href="https://github.com/gama-platform/gama/wiki/LICENSE.md" style="display:initial">here</a>, in the repository of the wiki content.</p></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.fbAsyncInit = function() {FB.init({appId:'524881055001796',xfbml:true,version:'v2.7'});};(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = '//connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js, fjs);}(document, 'script','facebook-jssdk'));
                </script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'undefined',
                inputSelector: '#search_input_react'
              });
            </script></body></html>