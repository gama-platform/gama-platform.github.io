<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.8.1 plugin-docs plugin-id-default docs-doc-id-BDIAgents_step5" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">5. Norms, obligation, and enforcement | GAMA Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gama-platform.org/resources/images/general/GamaPlatform.png"><meta data-rh="true" name="twitter:image" content="https://gama-platform.org/resources/images/general/GamaPlatform.png"><meta data-rh="true" property="og:url" content="https://gama-platform.org/wiki/1.8.1/BDIAgents_step5"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.8.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.8.1"><meta data-rh="true" name="docsearch:version" content="1.8.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.8.1"><meta data-rh="true" property="og:title" content="5. Norms, obligation, and enforcement | GAMA Platform"><meta data-rh="true" name="description" content="This last step consists of adding social norms, obligations, and enforcement into the agents&#x27; behavior."><meta data-rh="true" property="og:description" content="This last step consists of adding social norms, obligations, and enforcement into the agents&#x27; behavior."><link data-rh="true" rel="icon" href="/img/gama-logo.png"><link data-rh="true" rel="canonical" href="https://gama-platform.org/wiki/1.8.1/BDIAgents_step5"><link data-rh="true" rel="alternate" href="https://gama-platform.org/wiki/1.8.1/BDIAgents_step5" hreflang="en"><link data-rh="true" rel="alternate" href="https://gama-platform.org/wiki/1.8.1/BDIAgents_step5" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MWUOLTL2EG-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="GAMA Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="GAMA Platform Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="GAMA Platform" href="/opensearch.xml">


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.1/css/all.css">
<script src="/js/blogFacebook-iFrame.js" async></script><link rel="stylesheet" href="/assets/css/styles.d1c0242c.css">
<link rel="preload" href="/assets/js/runtime~main.1512419c.js" as="script">
<link rel="preload" href="/assets/js/main.dd5370a2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#34709f;color:#e3e3e3" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ðŸŽ‰ <strong>GAMA Platform 1.9.2 is out!!</strong> ðŸŽ‰ <a href="/download"><u>Download it now</u></a> and check <a href="/wiki/Changelog"><u>the changelog</u></a>!! ðŸŽ‰</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/gama-logo.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/gama-logo.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">GAMA Platform</b></a><a class="navbar__item navbar__link" href="/wiki/1.8.1/Home">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wiki/1.8.1/Tutorials">Tutorials</a><a class="navbar__item navbar__link" href="/wiki/Community">Community</a><a class="navbar__item navbar__link" href="/download">Download</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gama-platform/gama" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><i class="fab fa-github" style="font-size: 24px;"></i></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div id="sidebarCssSelector"><div class="custom-sidebarVersion"><p><u style="padding-top:4px;display:inline-block"><b>Version:</b></u> </p><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/wiki/1.8.1/Home">1.8.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/wiki/next/BDIAgents_step5">ðŸš§ 1.9.3 ðŸš§</a></li><li><a class="dropdown__link" href="/wiki/BDIAgents_step5">1.9.2</a></li><li><a class="dropdown__link" href="/wiki/1.9.1/BDIAgents_step5">1.9.1</a></li><li><a class="dropdown__link" href="/wiki/1.8.2-RC2/BDIAgents_step5">1.8.2-RC2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/wiki/1.8.1/BDIAgents_step5">1.8.1</a></li></ul></div><p></p></div><hr style="margin:0"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/wiki/1.8.1/Tutorials">Tutorials</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wiki/1.8.1/PredatorPrey">Predator Prey</a><button aria-label="Toggle the collapsible sidebar category &#x27;Predator Prey&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wiki/1.8.1/RoadTrafficModel">Road Traffic</a><button aria-label="Toggle the collapsible sidebar category &#x27;Road Traffic&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wiki/1.8.1/ThreeD">3D Tutorial</a><button aria-label="Toggle the collapsible sidebar category &#x27;3D Tutorial&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wiki/1.8.1/IncrementalModel">Incremental Model</a><button aria-label="Toggle the collapsible sidebar category &#x27;Incremental Model&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wiki/1.8.1/LuneraysFlu">Luneray&#x27;s flu</a><button aria-label="Toggle the collapsible sidebar category &#x27;Luneray&#x27;s flu&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/wiki/1.8.1/BDIAgents">BDI Agents</a><button aria-label="Toggle the collapsible sidebar category &#x27;BDI Agents&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/1.8.1/BDIAgents_step1">1. Skeleton model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/1.8.1/BDIAgents_step2">2. BDI Agents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/1.8.1/BDIAgents_step3">3. Social relation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/1.8.1/BDIAgents_step4">4. Emotions and Personality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/wiki/1.8.1/BDIAgents_step5">5. Norms, obligation, and enforcement</a></li></ul></li></ul></nav></div></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->GAMA Platform<!-- --> <b>1.8.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/wiki/BDIAgents_step5">latest version</a></b> (<!-- -->1.9.2<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/wiki/1.8.1/BDIAgents"><span itemprop="name">BDI Agents</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">5. Norms, obligation, and enforcement</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.8.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>5. Norms, obligation, and enforcement</h1></header><p>This last step consists of adding social norms, obligations, and enforcement into the agents&#x27; behavior.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="formulation">Formulation<a href="#formulation" class="hash-link" aria-label="Direct link to Formulation" title="Direct link to Formulation">â€‹</a></h2><ul><li>Definition of the policeman species</li><li>Definition of the enforcement done by policeman species</li><li>Definition of the law agents have to follow</li><li>Definition of a gold miner norm to fulfill its obligation and its social norms</li><li>Definition of the enforcement done by gold miners</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="norms-obligations-and-enforcement">Norms, obligations, and enforcement<a href="#norms-obligations-and-enforcement" class="hash-link" aria-label="Direct link to Norms, obligations, and enforcement" title="Direct link to Norms, obligations, and enforcement">â€‹</a></h2><p>The BDI architecture of GAMA allows defining explicit social norms, laws that lead to obligations and an enforcement process to sanction or reward the other agent depending on their behavior toward norms.
A social norm is a set of actions executed under certain conditions which are known by the people has the right things to do in that condition. As it is, it can be assimilated into a plan. However, a norm can be violated which mean an agent chose to disobey and do not execute it while it should. To do this, each agent has an obedient value, between 0 and 1 ad computed from its personality and each norm has a threshold. If the obedient value of the agent is above the threshold, the norm is executed.</p><p>An obligation is a mental state that can be assimilated with a desire. It is created by a law that indicates under which conditions the agent has to follow a particular obligation. Once again, the law can have a threshold value to be activated or not depending on the obedient value of the agent. If an agent has an obligation, it will give up its current intention and current plan to get this obligation as its intention. Then, it will choose a specific norm to answer this obligation, once again with a threshold on the obedient value.</p><p>Finally, an enforcement mechanism can be defined during the perception process. Norms, laws, and obligation can be enforced. If a violation is detected, a sanction can be executed. If the norm/law/obligation is fulfilled, a reward can be executed.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="model-definition">Model Definition<a href="#model-definition" class="hash-link" aria-label="Direct link to Model Definition" title="Direct link to Model Definition">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="law">law<a href="#law" class="hash-link" aria-label="Direct link to law" title="Direct link to law">â€‹</a></h3><p>We add a law to the gold miner species that will create the obligation to get gold if a gold nugget is perceived. This law replaces a rule and expresses the fact that miners are working or not, depending on their obedience value.</p><div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">skills:</span><span class="token plain"> [</span><span class="token variable" style="color:rgb(28,125,180)">moving</span><span class="token plain">] </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token variable" style="color:rgb(28,125,180)">simple_bdi</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">law</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">working</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">belief:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">mine_location</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">new_obligation:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">       </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">not</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_obligation</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">and</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">not</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">strength:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">2.0</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">threshold:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">threshold_aw</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="norms">norms<a href="#norms" class="hash-link" aria-label="Direct link to norms" title="Direct link to norms">â€‹</a></h3><p>The miners will have two norms. A first one to answer the obligation to collect gold. This norm replaces the previous plan created for this purpose. However, a new plan is declared to get 3 pieces of gold at each time. This plan will be considered illegal by the policeman species.</p><div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">skills:</span><span class="token plain"> [</span><span class="token variable" style="color:rgb(28,125,180)">moving</span><span class="token plain">] </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">simple_bdi</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">norm </span><span class="token variable" style="color:rgb(28,125,180)">doing_job</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">obligation:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">finished_when:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">threshold:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">threshold_obligation</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_subintention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">,</span><span class="token variable" style="color:rgb(28,125,180)">choose_gold_mine</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_intention_on_hold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">goto</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">)</span><span class="token plain">  {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token plain">&lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">first_with</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token plain">+</span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token plain"> {</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> - </span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">;</span><span class="token plain">}    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">empty_mine_location</span><span class="token punctuation">,</span><span class="token plain"> [</span><span class="token string" style="color:rgb(116,167,251)">&quot;location_value&quot;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_belief</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token punctuation">,</span><span class="token plain"> [</span><span class="token string" style="color:rgb(116,167,251)">&quot;location_value&quot;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }   </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The second norm is a social norm to communicate the list of known mines to one&#x27;s friends. It replaces the previous plan that did this action, while a new plan is added to give a wrong list of mines to one&#x27;s friend.</p><div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">skills:</span><span class="token plain"> [</span><span class="token variable" style="color:rgb(28,125,180)">moving</span><span class="token plain">] </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">simple_bdi</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">norm </span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">threshold:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">threshold_norm</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">instantaneous:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">list</span><span class="token plain">&lt;</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain">&gt; </span><span class="token variable" style="color:rgb(28,125,180)">my_friends</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">list</span><span class="token plain">&lt;</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">social_link_base</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">where</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">liking</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">collect</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">agent</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">loop</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">known_gold_mine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">over:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">get_beliefs_with_name</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_friends</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">known_gold_mine</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">loop</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">known_empty_gold_mine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">over:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">get_beliefs_with_name</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">empty_mine_location</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_friends</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">known_empty_gold_mine</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enforcement-of-the-social-norm">Enforcement of the social norm<a href="#enforcement-of-the-social-norm" class="hash-link" aria-label="Direct link to Enforcement of the social norm" title="Direct link to Enforcement of the social norm">â€‹</a></h3><p>Finally, for the gold-miner agent, an enforcement is defined about the social norm to communicate the location of mines to other agents. A sanction and a reward are declared to change the liking value with the agent controlled, depending on if the norm is violated or fulfilled.</p><div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">skills:</span><span class="token plain"> [</span><span class="token variable" style="color:rgb(28,125,180)">moving</span><span class="token plain">] </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token variable" style="color:rgb(28,125,180)">simple_bdi</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">perceive</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">in:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">myself</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">enforcement</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">norm</span><span class="token punctuation">:</span><span class="token string" style="color:rgb(116,167,251)">&quot;share_information&quot;</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">sanction</span><span class="token punctuation">:</span><span class="token string" style="color:rgb(116,167,251)">&quot;sanction_to_norm&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">reward:</span><span class="token string" style="color:rgb(116,167,251)">&quot;reward_to_norm&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">sanction_to_norm</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">change_liking</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token punctuation">,</span><span class="token plain">-</span><span class="token number" style="color:rgb(125,125,125)">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }   </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">reward_to_norm</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">change_liking</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="definition-of-policeman-species">Definition of policeman species<a href="#definition-of-policeman-species" class="hash-link" aria-label="Direct link to Definition of policeman species" title="Direct link to Definition of policeman species">â€‹</a></h3><p>Finally, we define a policeman species that will wander through the map and enforce the miners about the law and the obligation. The sanctions will be a fine collected by policemen.</p><div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">policeman</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">skills:</span><span class="token plain"> [</span><span class="token variable" style="color:rgb(28,125,180)">moving</span><span class="token plain">] </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token variable" style="color:rgb(28,125,180)">simple_bdi</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">predicate </span><span class="token variable" style="color:rgb(28,125,180)">patroling</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token string" style="color:rgb(116,167,251)">&quot;patrolling&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">1000.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">init</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_desire</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">patroling</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">perceive</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">in:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">myself</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">enforcement</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">law</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;working&quot;</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">sanction</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;sanction_to_law&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">enforcement</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">obligation:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">sanction</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;sanction_to_obligation&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">reward:</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;reward_to_obligation&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">sanction_to_law</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">threshold_law</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain">-</span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> +</span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">sanction_to_obligation</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain">-</span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">sell_gold</span><span class="token punctuation">,</span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">thresholdObligation</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">threshold_obligation</span><span class="token plain"> - </span><span class="token number" style="color:rgb(125,125,125)">0.1</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> + </span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">reward_to_obligation</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain">+</span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> - </span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">plan</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">patrol</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">patroling</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">wander</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">aspect</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">base</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">draw</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">circle</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#blue</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">depth:</span><span class="token number" style="color:rgb(125,125,125)">0.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modification-of-the-chart">Modification of the chart<a href="#modification-of-the-chart" class="hash-link" aria-label="Direct link to Modification of the chart" title="Direct link to Modification of the chart">â€‹</a></h3><p>We add to the output chart displayed the data coming from the policeman.</p><div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">display</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">chart</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">chart</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Money&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">type:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">series</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">datalist</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">legend:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">accumulate</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">value:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">accumulate</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">accumulate</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">data</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;policeman&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">value:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#red</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="complete-model">Complete Model<a href="#complete-model" class="hash-link" aria-label="Direct link to Complete Model" title="Direct link to Complete Model">â€‹</a></h2><div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">model</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">BDItutorial5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">global</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">nb_mines</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">10</span><span class="token punctuation">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">nb_miners</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">nb_police</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token variable" style="color:rgb(28,125,180)">market</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">the_market</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">string </span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token plain"> &lt;- </span><span class="token string" style="color:rgb(116,167,251)">&quot;mine_at_location&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">string </span><span class="token variable" style="color:rgb(28,125,180)">empty_mine_location</span><span class="token plain"> &lt;- </span><span class="token string" style="color:rgb(116,167,251)">&quot;empty_mine_location&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">step</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">10</span><span class="token constant" style="color:rgb(0, 0, 0)">#mn</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token comment" style="color:rgb(63,127,95)">//possible predicates concerning miners</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">predicate </span><span class="token variable" style="color:rgb(28,125,180)">mine_location</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">predicate </span><span class="token variable" style="color:rgb(28,125,180)">choose_gold_mine</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token string" style="color:rgb(116,167,251)">&quot;choose a gold mine&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">predicate </span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token string" style="color:rgb(116,167,251)">&quot;extract gold&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">predicate </span><span class="token variable" style="color:rgb(28,125,180)">find_gold</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token string" style="color:rgb(116,167,251)">&quot;find gold&quot;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">predicate </span><span class="token variable" style="color:rgb(28,125,180)">sell_gold</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token string" style="color:rgb(116,167,251)">&quot;sell gold&quot;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">predicate </span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token string" style="color:rgb(116,167,251)">&quot;share information&quot;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">emotion </span><span class="token variable" style="color:rgb(28,125,180)">joy</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_emotion</span><span class="token punctuation">(</span><span class="token string" style="color:rgb(116,167,251)">&quot;joy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">inequality</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0.0</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">update:</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">standard_deviation</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">collect</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">geometry </span><span class="token variable" style="color:rgb(28,125,180)">shape</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">square</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">20</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#km</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">init</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">create</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">market</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">the_market</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token punctuation">;</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">create</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">number:</span><span class="token variable" style="color:rgb(28,125,180)">nb_mines</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">create</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">number:</span><span class="token variable" style="color:rgb(28,125,180)">nb_miners</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">create</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">policeman</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">number:</span><span class="token variable" style="color:rgb(28,125,180)">nb_police</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">reflex</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">display_social_links</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">loop</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">tempMiner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">over:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">loop</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">tempDestination</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">over:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">tempMiner</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">social_link_base</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">tempDestination</span><span class="token plain"> !=</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">)</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                        </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">bool </span><span class="token variable" style="color:rgb(28,125,180)">exists</span><span class="token plain">&lt;-</span><span class="token boolean" style="color:rgb(125,125,125)">false</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">loop</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">tempLink</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">over:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">socialLinkRepresentation</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">tempLink</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">origin</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">=</span><span class="token variable" style="color:rgb(28,125,180)">tempMiner</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">and</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">tempLink</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">destination</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">=</span><span class="token variable" style="color:rgb(28,125,180)">tempDestination</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">agent</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                                </span><span class="token variable" style="color:rgb(28,125,180)">exists</span><span class="token plain">&lt;-</span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">not</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">exists</span><span class="token punctuation">)</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">create</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">socialLinkRepresentation</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">number:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                                </span><span class="token variable" style="color:rgb(28,125,180)">origin</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">tempMiner</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                                </span><span class="token variable" style="color:rgb(28,125,180)">destination</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">tempDestination</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">agent</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">get_liking</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">tempDestination</span><span class="token punctuation">)</span><span class="token plain">&gt;</span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">)</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                                    </span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token plain"> &lt;- </span><span class="token constant" style="color:rgb(0, 0, 0)">#green</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                                } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                                    </span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token plain"> &lt;- </span><span class="token constant" style="color:rgb(0, 0, 0)">#red</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                                }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">reflex</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">end_simulation</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">sum</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">collect</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token punctuation">)</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">and</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">empty</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">where</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">has_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">pause</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot; : &quot;</span><span class="token plain"> +</span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;**********************&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;fine : &quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">rnd</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">aspect</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">default</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">draw</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">triangle</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">200</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> * </span><span class="token number" style="color:rgb(125,125,125)">50</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">)</span><span class="token plain"> ? </span><span class="token constant" style="color:rgb(0, 0, 0)">#yellow</span><span class="token plain"> </span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#gray</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">border:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#black</span><span class="token punctuation">;</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">market</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">golds</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">aspect</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">default</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">draw</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">square</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">1000</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#black</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">policeman</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">skills:</span><span class="token plain"> [</span><span class="token variable" style="color:rgb(28,125,180)">moving</span><span class="token plain">] </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token variable" style="color:rgb(28,125,180)">simple_bdi</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">predicate </span><span class="token variable" style="color:rgb(28,125,180)">patroling</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token string" style="color:rgb(116,167,251)">&quot;patrolling&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">1000.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">init</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_desire</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">patroling</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">perceive</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">in:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">enforcement</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">law</span><span class="token punctuation">:</span><span class="token string" style="color:rgb(116,167,251)">&quot;working&quot;</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">sanction</span><span class="token punctuation">:</span><span class="token string" style="color:rgb(116,167,251)">&quot;sanction_to_law&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">enforcement</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">obligation:</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> </span><span class="token comment" style="color:rgb(63,127,95)">/*when:has_belief(has_gold)*/</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">sanction</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;sanction_to_obligation&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">reward:</span><span class="token string" style="color:rgb(116,167,251)">&quot;reward_to_obligation&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">sanction_to_law</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">threshold_law</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain">-</span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> +</span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">sanction_to_obligation</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain">-</span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">sell_gold</span><span class="token punctuation">,</span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">threshold_obligation</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">threshold_obligation</span><span class="token plain"> - </span><span class="token number" style="color:rgb(125,125,125)">0.1</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> + </span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">reward_to_obligation</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain">+</span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> -</span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">plan</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">patrol</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">patroling</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">wander</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">aspect</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">base</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">draw</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">circle</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#blue</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">depth:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">0.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">skills:</span><span class="token plain"> [</span><span class="token variable" style="color:rgb(28,125,180)">moving</span><span class="token plain">] </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token variable" style="color:rgb(28,125,180)">simple_bdi</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token plain">&lt;-</span><span class="token number" style="color:rgb(125,125,125)">1000.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">speed</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token constant" style="color:rgb(0, 0, 0)">#km</span><span class="token plain">/</span><span class="token constant" style="color:rgb(0, 0, 0)">#h</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">rgb </span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token plain">&lt;-</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">rnd_color</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">point </span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token plain">&lt;-</span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">agent </span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain">&lt;-</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">bool </span><span class="token variable" style="color:rgb(28,125,180)">use_social_architecture</span><span class="token plain"> &lt;- </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">bool </span><span class="token variable" style="color:rgb(28,125,180)">use_emotions_architecture</span><span class="token plain"> &lt;- </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">bool </span><span class="token variable" style="color:rgb(28,125,180)">use_personality</span><span class="token plain"> &lt;- </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">openness</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">gauss</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">0.12</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">conscientiousness</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">gauss</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">0.12</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">extraversion</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">gauss</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">0.12</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">agreeableness</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">gauss</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">0.12</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">neurotism</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">gauss</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">0.12</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">plan_persistence</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">1.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variableDefinition">intention_persistence</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">1.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">threshold_law</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">1.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">threshold_obligation</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">1.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">float </span><span class="token variable" style="color:rgb(28,125,180)">threshold_norm</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">init</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_desire</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">find_gold</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">perceive</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token plain">&gt;</span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">perceive</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">in:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">myself</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">socialize</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">liking:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">point</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">red</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">green</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">blue</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">distance_to</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">point</span><span class="token punctuation">(</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">myself</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">red</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">myself</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">green</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">myself</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">blue</span><span class="token punctuation">)</span><span class="token plain"> / </span><span class="token punctuation">(</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">255</span><span class="token punctuation">)</span><span class="token plain"> - </span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">enforcement</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">norm</span><span class="token punctuation">:</span><span class="token string" style="color:rgb(116,167,251)">&quot;share_information&quot;</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">sanction</span><span class="token punctuation">:</span><span class="token string" style="color:rgb(116,167,251)">&quot;sanction_to_norm&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">reward:</span><span class="token string" style="color:rgb(116,167,251)">&quot;reward_to_norm&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">sanction_to_norm</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">change_liking</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token punctuation">,</span><span class="token plain">-</span><span class="token number" style="color:rgb(125,125,125)">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">sanction </span><span class="token variable" style="color:rgb(28,125,180)">reward_to_norm</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">change_liking</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">agent_perceived</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">perceive</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">where</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">in:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">view_dist</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">focus</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">id:</span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">var:</span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">myself</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_emotion</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">joy</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot; is joyous&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_desire</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">predicate</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">strength:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">find_gold</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">belief:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">new_desire:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">sell_gold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">strength:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">3.0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">law</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">working</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">belief:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">mine_location</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">new_obligation:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">not</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_obligation</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">and</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">not</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">strength:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">2.0</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">threshold:</span><span class="token variable" style="color:rgb(28,125,180)">threshold_law</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">plan</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">lets_wander</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token variable" style="color:rgb(28,125,180)">find_gold</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">wander</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">norm </span><span class="token variable" style="color:rgb(28,125,180)">doing_job</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">obligation:</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">finished_when:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">threshold:</span><span class="token variable" style="color:rgb(28,125,180)">threshold_obligation</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_subintention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">get_current_intention</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token variable" style="color:rgb(28,125,180)">choose_gold_mine</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_intention_on_hold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">goto</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">)</span><span class="token plain">  {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token plain">&lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">first_with</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token plain">+</span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                     </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token plain"> {</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> - </span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">;</span><span class="token plain">}    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">empty_mine_location</span><span class="token punctuation">,</span><span class="token plain"> [</span><span class="token string" style="color:rgb(116,167,251)">&quot;location_value&quot;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_belief</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token punctuation">,</span><span class="token plain"> [</span><span class="token string" style="color:rgb(116,167,251)">&quot;location_value&quot;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">plan</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">get_more_gold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_subintention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">get_current_intention</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token variable" style="color:rgb(28,125,180)">choose_gold_mine</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_intention_on_hold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">goto</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">)</span><span class="token plain">  {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token plain">&lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">first_with</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> = </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                     </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">current_mine</span><span class="token plain"> {</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain">&gt;=</span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                        </span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> - </span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    }</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                        </span><span class="token variable" style="color:rgb(28,125,180)">quantity</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    } </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    }    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">empty_mine_location</span><span class="token punctuation">,</span><span class="token plain"> [</span><span class="token string" style="color:rgb(116,167,251)">&quot;location_value&quot;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_belief</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">new_predicate</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token punctuation">,</span><span class="token plain"> [</span><span class="token string" style="color:rgb(116,167,251)">&quot;location_value&quot;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> &lt;- </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">nil</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">plan</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">choose_closest_gold_mine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">choose_gold_mine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">instantaneous:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">list</span><span class="token plain">&lt;</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">point</span><span class="token plain">&gt; </span><span class="token variable" style="color:rgb(28,125,180)">possible_mines</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">get_beliefs_with_name</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">collect</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">point</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">get_predicate</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">mental_state</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token variable" style="color:rgb(28,125,180)">values</span><span class="token plain">[</span><span class="token string" style="color:rgb(116,167,251)">&quot;location_value&quot;</span><span class="token plain">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">list</span><span class="token plain">&lt;</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">point</span><span class="token plain">&gt; </span><span class="token variable" style="color:rgb(28,125,180)">empty_mines</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">get_beliefs_with_name</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">empty_mine_location</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">collect</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">point</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">get_predicate</span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">mental_state</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token variable" style="color:rgb(28,125,180)">values</span><span class="token plain">[</span><span class="token string" style="color:rgb(116,167,251)">&quot;location_value&quot;</span><span class="token plain">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token variable" style="color:rgb(28,125,180)">possible_mines</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">possible_mines</span><span class="token plain"> - </span><span class="token variable" style="color:rgb(28,125,180)">empty_mines</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">empty</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">possible_mines</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        } </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">else</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">target</span><span class="token plain"> &lt;- </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">possible_mines</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">with_min_of</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">distance_to</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">self</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">choose_gold_mine</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">plan</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">return_to_base</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">sell_gold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">has_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">goto</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">target:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">the_market</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">the_market</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token plain"> = </span><span class="token variable" style="color:rgb(28,125,180)">location</span><span class="token punctuation">)</span><span class="token plain">  {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">has_gold</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">sell_gold</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> &lt;- </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token variable" style="color:rgb(28,125,180)">gold_transported</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">norm </span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">threshold:</span><span class="token variable" style="color:rgb(28,125,180)">threshold_norm</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">instantaneous:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">list</span><span class="token plain">&lt;</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain">&gt; </span><span class="token variable" style="color:rgb(28,125,180)">my_friends</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">list</span><span class="token plain">&lt;</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">social_link_base</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">where</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">liking</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">collect</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">agent</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">loop</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">known_gold_mine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">over:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">get_beliefs_with_name</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">mine_at_location</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_friends</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">known_gold_mine</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">loop</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">known_empty_gold_mine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">over:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">get_beliefs_with_name</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">empty_mine_location</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_friends</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">known_empty_gold_mine</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">plan</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">share_information_to_friends</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">intention:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">instantaneous:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">list</span><span class="token plain">&lt;</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain">&gt; </span><span class="token variable" style="color:rgb(28,125,180)">my_friends</span><span class="token plain"> &lt;- </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">list</span><span class="token plain">&lt;</span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">social_link_base</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">where</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">liking</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">collect</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">agent</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">loop</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">known_gold_mine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">over:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">get_beliefs_with_name</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">empty_mine_location</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_friends</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">add_belief</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">known_gold_mine</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }        </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">remove_intention</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">share_information</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">aspect</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">default</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">draw</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">circle</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">200</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">border:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#black</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">depth:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">socialLinkRepresentation</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">origin</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">agent </span><span class="token variable" style="color:rgb(28,125,180)">destination</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">rgb </span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">aspect</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">base</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">draw</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">line</span><span class="token punctuation">(</span><span class="token plain">[</span><span class="token variable" style="color:rgb(28,125,180)">origin</span><span class="token punctuation">,</span><span class="token variable" style="color:rgb(28,125,180)">destination</span><span class="token plain">]</span><span class="token punctuation">,</span><span class="token number" style="color:rgb(125,125,125)">50.0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">experiment</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">GoldBdi</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">type:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">gui</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">output</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">display</span><span class="token plain"> </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">map </span><span class="token facet" style="color:rgb(154,72,71)">type:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">opengl</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">market</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">gold_mine</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">policeman</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">aspect</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">base</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }    </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">display</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">socialLinks</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">type:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">opengl</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">socialLinkRepresentation</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">aspect</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">base</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">display</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">chart</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">chart</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Money&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">type:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">series</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">datalist</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">legend:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">accumulate</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">value:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">accumulate</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">gold_sold</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">miner</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">accumulate</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 0);font-style:italic">each</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">.</span><span class="token variable" style="color:rgb(28,125,180)">my_color</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">                </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">data</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;policeman&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">value:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fine</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">color:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#red</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="/wiki/1.8.1/BDIAgents">Back to the start of the tutorial</a></p><ol><li><a href="/wiki/1.8.1/BDIAgents_step1">Creation of the basic model: gold mines and market</a></li><li><a href="/wiki/1.8.1/BDIAgents_step2">Definition of the BDI miners</a></li><li><a href="/wiki/1.8.1/BDIAgents_step3">Definition of social relations between miners</a></li><li><a href="/wiki/1.8.1/BDIAgents_step4">Use of emotions and personality for the miners</a></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/gama-platform/gama/wiki/BDIAgents_step5/_edit" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/wiki/1.8.1/BDIAgents_step4"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">4. Emotions and Personality</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#formulation" class="table-of-contents__link toc-highlight">Formulation</a></li><li><a href="#norms-obligations-and-enforcement" class="table-of-contents__link toc-highlight">Norms, obligations, and enforcement</a></li><li><a href="#model-definition" class="table-of-contents__link toc-highlight">Model Definition</a><ul><li><a href="#law" class="table-of-contents__link toc-highlight">law</a></li><li><a href="#norms" class="table-of-contents__link toc-highlight">norms</a></li><li><a href="#enforcement-of-the-social-norm" class="table-of-contents__link toc-highlight">Enforcement of the social norm</a></li><li><a href="#definition-of-policeman-species" class="table-of-contents__link toc-highlight">Definition of policeman species</a></li><li><a href="#modification-of-the-chart" class="table-of-contents__link toc-highlight">Modification of the chart</a></li></ul></li><li><a href="#complete-model" class="table-of-contents__link toc-highlight">Complete Model</a></li></ul></div></div></div><br></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="https://github.com/gama-platform" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i> Github <i class="fa fa-arrow-up-right-from-square"></i></a></li><li class="footer__item"><a class="footer__link-item" href="https://www.facebook.com/GamaPlatform/" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook"></i> Facebook <i class="fa fa-arrow-up-right-from-square"></i></a></li><li class="footer__item"><a class="footer__link-item" href="https://www.linkedin.com/company/gama-platform" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin"></i> LinkedIn <i class="fa fa-arrow-up-right-from-square"></i></a></li><li class="footer__item"><a class="footer__link-item" href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank" rel="noopener noreferrer"><i class="fab fa-youtube"></i> Youtube <i class="fa fa-arrow-up-right-from-square"></i></a></li><li class="footer__item"><a class="footer__link-item" href="https://gama-platform.org/blog/rss.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss"></i> Blog RSS <i class="fa fa-arrow-up-right-from-square"></i></a></li></ul></div><div class="col footer__col"><div class="footer__title">Mailing list</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br>gama-platform@googlegroups.com</a></li><li class="footer__item"><a class="footer__link-item" href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br>gama-dev@googlegroups.com</a></li></ul></div><div class="col footer__col"><div class="footer__title">Licence</div><ul class="footer__items clean-list"><li class="footer__item">
                  <p>
                    Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
                  </p>
                </li><li class="footer__item">
                  <p>A copy of the license is included <a href="https://github.com/gama-platform/gama/wiki/LICENSE.md" style="display:initial">here</a>, in the repository of the wiki content.</p>
                </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/gama-logo.png" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/gama-logo.png" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright (C) - 2023 GAMA Platform.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1512419c.js"></script>
<script src="/assets/js/main.dd5370a2.js"></script>
</body>
</html>