"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[12548],{64884:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>c});var l=i(17624),t=i(4552);const o={title:"2. Moving Cells"},s=void 0,d={id:"ThreeD_step2",title:"2. Moving Cells",description:"This second step model adds the moving3D skill to the cell agents and simply makes the cell agents move by defining a reflex that will call the action move. We will also add additional visual information to the display.",source:"@site/versioned_docs/version-1.9.1/ThreeD_step2.md",sourceDirName:".",slug:"/ThreeD_step2",permalink:"/wiki/1.9.1/ThreeD_step2",draft:!1,unlisted:!1,editUrl:"https://github.com/gama-platform/gama/wiki/ThreeD_step2/_edit",tags:[],version:"1.9.1",frontMatter:{title:"2. Moving Cells"},sidebar:"tuto",previous:{title:"1. Basic Model",permalink:"/wiki/1.9.1/ThreeD_step1"},next:{title:"3. Connections",permalink:"/wiki/1.9.1/ThreeD_step3"}},r={},c=[{value:"Formulation",id:"formulation",level:2},{value:"Model Definition",id:"model-definition",level:2},{value:"Global Section",id:"global-section",level:3},{value:"Global variable",id:"global-variable",level:4},{value:"Model initialization",id:"model-initialization",level:4},{value:"Moving3D skills",id:"moving3d-skills",level:3},{value:"Experiment",id:"experiment",level:3},{value:"Output",id:"output",level:4},{value:"Complete Model",id:"complete-model",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.M)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["This second step model adds the ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"moving3D"})})," skill to the ",(0,l.jsx)(n.code,{children:"cell"})," agents and simply makes the ",(0,l.jsx)(n.code,{children:"cell"})," agents move by defining a reflex that will call the action ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"move"})}),". We will also add additional visual information to the display."]}),"\n",(0,l.jsx)(n.h2,{id:"formulation",children:"Formulation"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Redefining the shape of the world with a 3D Shape."}),"\n",(0,l.jsxs)(n.li,{children:["Attaching new skills (",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"moving3D"})}),") to ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"cell"})})," agents."]}),"\n",(0,l.jsxs)(n.li,{children:["Modify ",(0,l.jsx)(n.strong,{children:"cell"})," aspect."]}),"\n",(0,l.jsx)(n.li,{children:"Add a graphics layer."}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"http://www.youtube.com/watch?feature=player_embedded&v=_QqUbC0MWRU",children:(0,l.jsx)(n.img,{alt:"3D tutorial: moving cells in a 3D space.",src:i(74376).c+"",width:"500",height:"500"})})}),"\n",(0,l.jsx)(n.h2,{id:"model-definition",children:"Model Definition"}),"\n",(0,l.jsx)(n.h3,{id:"global-section",children:"Global Section"}),"\n",(0,l.jsx)(n.h4,{id:"global-variable",children:"Global variable"}),"\n",(0,l.jsxs)(n.p,{children:["We use a new global variable called ",(0,l.jsx)(n.code,{children:"environment_size"})," to define the size of our 3D environment.\nIn the global section, we define the new variable:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"int environment_size <-100;\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Then we redefine the ",(0,l.jsx)(n.code,{children:"shape"})," of the world (by default the shape of the world is a 100x100 square) as a cube that will have the size defined by the ",(0,l.jsx)(n.code,{children:"environment_size"})," variable. To do so we change the shape of the world in the ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"global"})})," section:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"geometry shape <- cube(environment_size);\t\n"})}),"\n",(0,l.jsx)(n.h4,{id:"model-initialization",children:"Model initialization"}),"\n",(0,l.jsxs)(n.p,{children:["When we created the ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"cell"})})," agents, we want to place them randomly in the 3D environment. To do so we set the ",(0,l.jsx)(n.code,{children:"location"})," with a random value for ",(0,l.jsx)(n.code,{children:"x"}),", ",(0,l.jsx)(n.code,{children:"y"})," and ",(0,l.jsx)(n.code,{children:"z"})," between ",(0,l.jsx)(n.code,{children:"0"})," and ",(0,l.jsx)(n.code,{children:"environment_size"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"create cell number: nb_cells { \n  location <- {rnd(environment_size), rnd(environment_size), rnd(environment_size)};       \n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"moving3d-skills",children:"Moving3D skills"}),"\n",(0,l.jsxs)(n.p,{children:["In the previous example, we only created ",(0,l.jsx)(n.code,{children:"cell"})," agents that did not have any behavior. In this step we want to make them move. To do so we add a ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"moving3D"})})," skill to the ",(0,l.jsx)(n.code,{children:"cell"})," species."]}),"\n",(0,l.jsxs)(n.p,{children:["More information on built-in skills proposed by GAMA can be found ",(0,l.jsx)(n.a,{href:"BuiltInSkills",children:"here"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"species cell skills: [moving3D]{\n...  \t\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Then we define a new reflex for the species ",(0,l.jsx)(n.code,{children:"cell"})," that consists in calling the action ",(0,l.jsx)(n.code,{children:"move"})," bundled in ",(0,l.jsx)(n.code,{children:"moving3D"})," skill."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"reflex move {\n    do move;\n}\t                    \n"})}),"\n",(0,l.jsxs)(n.p,{children:["Finally we modify a bit the aspect of the sphere to set its size according to the ",(0,l.jsx)(n.code,{children:"environment_size"})," global variable previously defined."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"aspect default {\n    draw sphere(environment_size*0.01) color: #blue;   \n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"experiment",children:"Experiment"}),"\n",(0,l.jsxs)(n.p,{children:["The experiment is the same as the previous one except that we will display the bounds of the environment by using a ",(0,l.jsx)(n.code,{children:"graphics"})," layer."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'graphics "env" {\n    draw cube(environment_size) color: #black wireframe: true;\t\n}\n'})}),"\n",(0,l.jsx)(n.h4,{id:"output",children:"Output"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'output {\n    display View1 type:opengl{\n        graphics "env"{\n            draw cube(environment_size) color: #black wireframe: true;\t\n        }\n        species cell;  \n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"complete-model",children:"Complete Model"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-gaml",metastring:"reference",children:"https://github.com/gama-platform/gama/blob/GAMA_1.9.0/msi.gama.models/models/Tutorials/3D/models/Model%2002.gaml\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.M)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},74376:(e,n,i)=>{i.d(n,{c:()=>l});const l=i.p+"assets/images/3D_model1-35ed6f27fc184f2e81c434b4cb4f821c.png"},4552:(e,n,i)=>{i.d(n,{I:()=>d,M:()=>s});var l=i(11504);const t={},o=l.createContext(t);function s(e){const n=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),l.createElement(o.Provider,{value:n},e.children)}}}]);