<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.9.1 docs-doc-page docs-doc-id-ControlArchitecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Control Architectures | GAMA Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gama-platform.org/resources/images/general/GamaPlatform.png"><meta data-rh="true" name="twitter:image" content="https://gama-platform.org/resources/images/general/GamaPlatform.png"><meta data-rh="true" property="og:url" content="https://gama-platform.org/wiki/1.9.1/ControlArchitecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.9.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.9.1"><meta data-rh="true" name="docsearch:version" content="1.9.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.9.1"><meta data-rh="true" property="og:title" content="Control Architectures | GAMA Platform"><meta data-rh="true" name="description" content="[//]: # (keyword|concept_architecture)"><meta data-rh="true" property="og:description" content="[//]: # (keyword|concept_architecture)"><link data-rh="true" rel="icon" href="/img/gama-logo.png"><link data-rh="true" rel="canonical" href="https://gama-platform.org/wiki/1.9.1/ControlArchitecture"><link data-rh="true" rel="alternate" href="https://gama-platform.org/wiki/1.9.1/ControlArchitecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://gama-platform.org/wiki/1.9.1/ControlArchitecture" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MWUOLTL2EG-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Learn GAML step by step","item":"https://gama-platform.org/wiki/1.9.1/LearnGAMLStepByStep"},{"@type":"ListItem","position":2,"name":"Multi-Paradigm Modeling","item":"https://gama-platform.org/wiki/1.9.1/MultiParadigmModeling"},{"@type":"ListItem","position":3,"name":"Control Architectures","item":"https://gama-platform.org/wiki/1.9.1/ControlArchitecture"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="GAMA Platform" href="/opensearch.xml">
<link rel="preconnect" href="https://gama-platform.goatcounter.com">
<script async src="//gc.zgo.at/count.js" data-goatcounter="https://gama-platform.goatcounter.com/count"></script>


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.1/css/all.css"><link rel="stylesheet" href="/assets/css/styles.f33348dd.css">
<script src="/assets/js/runtime~main.63af91cf.js" defer="defer"></script>
<script src="/assets/js/main.44a0ce47.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#34709f;color:#e3e3e3" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ðŸŽ‰ <strong>GAMA Platform 2025-06 is out!!</strong> ðŸŽ‰ <a href="/download"><u>Download it now</u></a> and check <a href="/wiki/Changelog"><u>the changelog</u></a>!! ðŸŽ‰</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/gama-logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/gama-logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">GAMA Platform</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wiki/1.9.1/Home">Documentation</a><a class="navbar__item navbar__link" href="/wiki/1.9.1/Tutorials">Tutorials</a><a class="navbar__item navbar__link" href="/wiki/1.9.1/Community">Community</a><a class="navbar__item navbar__link" href="/download">Download</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/gama-platform/gama" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><i class="fab fa-github" style="font-size: 24px;"></i></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div id="sidebarCssSelector"><div class="custom-sidebarVersion"><p><u style="padding-top:4px;display:inline-block"><b>Version:</b></u> </p><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/wiki/1.9.1/ControlArchitecture">1.9.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/wiki/next/ControlArchitecture">ðŸš§ Alpha ðŸš§</a></li><li><a class="dropdown__link" href="/wiki/ControlArchitecture">2025-06</a></li><li><a class="dropdown__link" href="/wiki/1.9.3/ControlArchitecture">1.9.3</a></li><li><a class="dropdown__link" href="/wiki/1.9.2/ControlArchitecture">1.9.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/wiki/1.9.1/ControlArchitecture">1.9.1</a></li><li><a class="dropdown__link" href="/wiki/1.8.2-RC2/ControlArchitecture">1.8.2-RC2</a></li><li><a class="dropdown__link" href="/wiki/1.8.1/ControlArchitecture">1.8.1</a></li></ul></div><p></p></div><hr style="margin:0"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/1.9.1/Home"><span title="Home" class="categoryLinkLabel_W154">Home</span></a><button aria-label="Expand sidebar category &#x27;Home&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/1.9.1/PlatformDocumentation"><span title="Platform" class="categoryLinkLabel_W154">Platform</span></a><button aria-label="Expand sidebar category &#x27;Platform&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/wiki/1.9.1/LearnGAMLStepByStep"><span title="Learn GAML step by step" class="categoryLinkLabel_W154">Learn GAML step by step</span></a><button aria-label="Collapse sidebar category &#x27;Learn GAML step by step&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/wiki/1.9.1/Introduction"><span title="Introduction" class="categoryLinkLabel_W154">Introduction</span></a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/1.9.1/ManipulateBasicSpecies"><span title="Manipulate basic species" class="linkLabel_WmDU">Manipulate basic species</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/wiki/1.9.1/GlobalSpecies"><span title="Global Species" class="categoryLinkLabel_W154">Global Species</span></a><button aria-label="Expand sidebar category &#x27;Global Species&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/wiki/1.9.1/DefiningAdvancedSpecies"><span title="Defining Advanced Species" class="categoryLinkLabel_W154">Defining Advanced Species</span></a><button aria-label="Expand sidebar category &#x27;Defining Advanced Species&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/wiki/1.9.1/DefiningGUIExperiment"><span title="Defining GUI Experiment" class="categoryLinkLabel_W154">Defining GUI Experiment</span></a><button aria-label="Expand sidebar category &#x27;Defining GUI Experiment&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/wiki/1.9.1/ExploringModels"><span title="Exploring Models" class="categoryLinkLabel_W154">Exploring Models</span></a><button aria-label="Expand sidebar category &#x27;Exploring Models&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/wiki/1.9.1/OptimizingModelsSection"><span title="Optimizing Model Section" class="categoryLinkLabel_W154">Optimizing Model Section</span></a><button aria-label="Expand sidebar category &#x27;Optimizing Model Section&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/wiki/1.9.1/MultiParadigmModeling"><span title="Multi-Paradigm Modeling" class="categoryLinkLabel_W154">Multi-Paradigm Modeling</span></a><button aria-label="Collapse sidebar category &#x27;Multi-Paradigm Modeling&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/wiki/1.9.1/ControlArchitecture"><span title="Control Architectures" class="linkLabel_WmDU">Control Architectures</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/1.9.1/DifferentialEquations"><span title="Using Differential Equations" class="linkLabel_WmDU">Using Differential Equations</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/1.9.1/Recipes"><span title="Recipes" class="categoryLinkLabel_W154">Recipes</span></a><button aria-label="Expand sidebar category &#x27;Recipes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/1.9.1/GamlReference"><span title="GAML References" class="categoryLinkLabel_W154">GAML References</span></a><button aria-label="Expand sidebar category &#x27;GAML References&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/1.9.1/developingGAMA"><span title="Developing GAMA" class="categoryLinkLabel_W154">Developing GAMA</span></a><button aria-label="Expand sidebar category &#x27;Developing GAMA&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->GAMA Platform<!-- --> <b>1.9.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/wiki/ControlArchitecture">latest version</a></b> (<!-- -->2025-06<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/wiki/1.9.1/LearnGAMLStepByStep"><span>Learn GAML step by step</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/wiki/1.9.1/MultiParadigmModeling"><span>Multi-Paradigm Modeling</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Control Architectures</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.9.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Control Architectures</h1></header><p>GAMA allows the modeler to attach built-in control architecture to agents.</p>
<p>These control architectures will give the possibility to the modeler to use for a species a specific control architecture in addition to the <a class="" href="/wiki/1.9.1/DefiningActionsAndBehaviors#Behaviour">common behavior structure</a>. Note that only one control architecture can be used per species.</p>
<p>The attachment of a control architecture to a species is done through the facets <code>control</code>.</p>
<p>For example, the given code attaches the <code>fsm</code> control architecture to the dummy species.</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">dummy</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fsm</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>GAMA integrates several agent control architectures that can be used in addition to the common behavior structure:</p>
<ul>
<li class=""><a href="#finite-state-machine" class="">fsm</a>: finite state machine based behavior model. During its life cycle, the agent can be in several states. At any given time step, it is in one single state. Such an agent needs to have one initial state (the state in which it will be at its initialization)</li>
<li class=""><a href="#task-based" class="">weighted_tasks</a>: task-based control architecture. At any given time, only the task with the maximal weight is executed.</li>
<li class=""><a href="#task-based" class="">sorted_tasks</a>: task-based control architecture. At any given time, the tasks are all executed in the order specified by their weights (highest first).</li>
<li class=""><a href="#task-based" class="">probabilistic_tasks</a>: task-based control architecture. This architecture uses the weights as a support for making a weighted probabilistic choice among the different tasks. If all tasks have the same weight, one is randomly chosen at each step.</li>
<li class=""><a href="#rules-based-architecture" class="">rules</a>: rules-based control architecture. This architecture uses a set of rules, that will be executed if a given condition is fulfilled and in an order defined by a priority.</li>
<li class=""><a href="#user_only-user_first-user_last" class="">user_only</a>: allows users to take control over an agent during the course of the simulation. With this architecture, only the user control the agents (no reflexes).</li>
<li class=""><a href="#user_only-user_first-user_last" class="">user_first</a>: allows users to take control over an agent during the course of the simulation. With this architecture, the user actions are executed before the agent reflexes.</li>
<li class=""><a href="#user_only-user_first-user_last" class="">user_last</a>: allows users to take control over an agent during the course of the simulation. With this architecture, the user actions are executed after the agent reflexes.</li>
</ul>
<p>An <a class="" href="/wiki/1.9.1/BuiltInArchitectures">exhaustive list of the architectures available with GAMA</a> provides all the variables and additional actions provided by an architecture.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="index">Index<a href="#index" class="hash-link" aria-label="Direct link to Index" title="Direct link to Index" translate="no">â€‹</a></h2>
<ul>
<li class=""><a href="#finite-state-machine" class="">Finite State Machine</a>
<ul>
<li class=""><a href="#declaration" class="">Declaration</a></li>
<li class=""><a href="#state-statement" class=""><code>state</code> statement</a></li>
</ul>
</li>
<li class=""><a href="#task-based" class="">Task Based</a>
<ul>
<li class=""><a href="#declaration" class="">Declaration</a></li>
<li class=""><a href="#task-statement" class=""><code>task</code></a></li>
</ul>
</li>
<li class=""><a href="#user-control-architectures" class="">User Control Architecture</a>
<ul>
<li class=""><a href="#user_only-user_first-user_last" class="">user_only, user_first, user_last</a></li>
<li class=""><a href="#additional-attribute" class="">Additional attribute</a></li>
<li class=""><a href="#user_panel" class="">user_panel</a></li>
</ul>
</li>
<li class=""><a href="#other-control-architectures" class="">Other Control Architectures</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="finite-state-machine">Finite State Machine<a href="#finite-state-machine" class="hash-link" aria-label="Direct link to Finite State Machine" title="Direct link to Finite State Machine" translate="no">â€‹</a></h2>
<p><strong>FSM (Finite State Machine)</strong> is a finite state machine-based behavior model. During its life cycle, the agent can be in several states. At any given time step, it is in one single state. Such an agent needs to have one initial state (the state in which it will be at its initialization).</p>
<p>At each time step, the agent will:</p>
<ul>
<li class="">first (only if he just entered in its current state) execute statement embedded in the <code>enter</code> statement,</li>
<li class="">then all the statements in the <code>state</code> statement,</li>
<li class="">it will evaluate the condition of each embedded <code>transition</code> statements. If one condition is fulfilled, the agent executes the embedded statements.</li>
</ul>
<p><strong>Note that an agent executes only one state at each step</strong>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="declaration">Declaration<a href="#declaration" class="hash-link" aria-label="Direct link to Declaration" title="Direct link to Declaration" translate="no">â€‹</a></h3>
<p>Using the FSM architecture for a species require to use the <strong>control</strong> facet:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">dummy</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fsm</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="state-statement"><code>state</code> statement<a href="#state-statement" class="hash-link" aria-label="Direct link to state-statement" title="Direct link to state-statement" translate="no">â€‹</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="facets">Facets<a href="#facets" class="hash-link" aria-label="Direct link to Facets" title="Direct link to Facets" translate="no">â€‹</a></h4>
<ul>
<li class=""><code>initial</code>: a boolean expression, indicates the initial state of the agent (only one state with <code>initial</code> set to true is allowed in a species).</li>
<li class=""><code>final</code>: a boolean expression, indicates the final state of the agent.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="sub-statements">Sub Statements<a href="#sub-statements" class="hash-link" aria-label="Direct link to Sub Statements" title="Direct link to Sub Statements" translate="no">â€‹</a></h4>
<ul>
<li class=""><code>enter</code>: a sequence of statements to execute upon entering the state.</li>
<li class=""><code>exit</code>: a sequence of statements to execute right before exiting the state. Note that the <code>exit</code> statement will be executed even if the fired transition points to the same state (the FSM architecture in GAMA does not implement &#x27;internal transitions&#x27; like the ones found in UML statecharts: all transitions, even &quot;self-transitions&quot;, follow the same rules).</li>
<li class=""><code>transition</code>: allows to define a condition that, when evaluated to true, will designate the next state of the life-cycle. Note that the evaluation of transitions is short-circuited: the first one that evaluates to true, in the order in which they have been defined, will be followed. I.e., if two transitions evaluate to true during the same time step, only the first one will be triggered.</li>
</ul>
<p>Things worth to be mentioned regarding these sub-statements:</p>
<ul>
<li class="">Obviously, only one definition of <code>exit</code> and <code>enter</code> is accepted in a given <code>state</code>.</li>
<li class=""><code>transition</code> statements written in the middle of the state statements will only be evaluated at the end, so, even if it evaluates to true, the remaining of the statements found after the definition of the transition will be nevertheless executed. So, despite the appearance, a transition written somewhere in the sequence will &quot;not stop&quot; the state at that point (but only at the end).</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="definition">Definition<a href="#definition" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition" translate="no">â€‹</a></h4>
<p>A state can contain several statements that will be executed, at each time step, by the agent. There are three exceptions to this rule:</p>
<ol>
<li class="">statements enclosed in <code>enter</code> will only be executed when the state is entered (after a transition, or because it is the initial state).</li>
<li class="">Those enclosed in <code>exit</code> will be executed when leaving the state as a result of a successful transition (and before the statements enclosed in the transition).</li>
<li class="">Those enclosed in a transition will be executed when performing this transition (but after the <code>exit</code> sequence has been executed).</li>
</ol>
<p>For example, consider the following example:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">dummy</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fsm</span><span class="token plain"> {       </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">state</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">initial:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token plain"> { </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;state1&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">flip</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">)</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;transition to state1&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state3</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">flip</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.2</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">state</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;state2&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">flip</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">)</span><span class="token plain"> { </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;transition to state1&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">exit</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;leave state2&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">state</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state3</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;state3&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">flip</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.5</span><span class="token punctuation">)</span><span class="token plain">  {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;transition to state1&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">flip</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">0.2</span><span class="token punctuation">)</span><span class="token plain">  </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }   </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The dummy agents start at <em>state1</em>. At each simulation step, they have a probability of 0.5 to change their state to <em>state2</em>. If they do not change their state to <em>state2</em>, they have a probability of 0.2 to change their state to <em>state3</em>. In <em>state2</em>, at each simulation step, they have a probability of 0.5 to change their state to <em>state1</em>. At last, in <em>step3</em>, at each simulation step, they have a probability of 0.5 to change their state to <em>state1</em>. If they do not change their state to <em>state1</em>, they have a probability of 0.2 to change their state to <em>state2</em>.</p>
<p>Here a possible result that can be obtained with one dummy agent:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">to</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">leave</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">to</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">to</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">4</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">leave</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">to</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">6</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">7</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">8</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">state2</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-based">Task-Based<a href="#task-based" class="hash-link" aria-label="Direct link to Task-Based" title="Direct link to Task-Based" translate="no">â€‹</a></h2>
<p>GAMA integrated several <strong>task-based</strong> control architectures. Species can define any number of tasks within their body. At any given time, only one or several tasks are executed according to the architecture chosen:</p>
<ul>
<li class=""><code>weighted_tasks</code>: in this architecture, only the task with the maximal weight is executed.</li>
<li class=""><code>sorted_tasks</code>: in this architecture, the tasks are all executed in the order specified by their weights (biggest first)</li>
<li class=""><code>probabilistic_tasks</code>: this architecture uses the weights as a support for making a weighted probabilistic choice among the different tasks. If all tasks have the same weight, one is randomly chosen each step.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="declaration-1">Declaration<a href="#declaration-1" class="hash-link" aria-label="Direct link to Declaration" title="Direct link to Declaration" translate="no">â€‹</a></h3>
<p>Using one of the task architectures for a species requires to use the <strong>control</strong> facet:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">dummy</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">weighted_tasks</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">dummy</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">sorted_tasks</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">dummy</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">probabilistic_tasks</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-statement"><code>task</code> statement<a href="#task-statement" class="hash-link" aria-label="Direct link to task-statement" title="Direct link to task-statement" translate="no">â€‹</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="facets-1">Facets<a href="#facets-1" class="hash-link" aria-label="Direct link to Facets" title="Direct link to Facets" translate="no">â€‹</a></h4>
<p>Besides a sequence of statements like <code>reflex</code>, a task contains the following additional facet:</p>
<ul>
<li class=""><code>weight</code>: Mandatory. The priority level of the task.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="definition-1">Definition<a href="#definition-1" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition" translate="no">â€‹</a></h4>
<p>As <code>reflex</code>, a <code>task</code> is a sequence of statements that can be executed, at each time step, by the agent. If an agent owns several tasks, the scheduler chooses a task to execute based on its current priority weight value.</p>
<p>For example, consider the following example:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">dummy</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">weighted_tasks</span><span class="token plain"> {   </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">task</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">task1</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">weight:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">mod</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token plain"> { </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;task1&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">task</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">task2</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">weight:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token plain"> { </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">string</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cycle</span><span class="token punctuation">)</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;:&quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">name</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;-&gt;&quot;</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;task2&quot;</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>As the <strong>weighted_tasks</strong> control architecture was chosen, at each simulation step, the dummy agents execute only the task with the highest behavior. Thus,  when <em>cycle modulo 3</em> is higher to 2, task1 is executed; when <em>cycle modulo 3</em> is lower than 2, task2 is executed. In case when <em>cycle modulo 3</em> is equal 2 (at cycle 2, 5, ...), the only the first task defined (here task1) is executed.</p>
<p>Here the result obtained with one dummy agent:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">task2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">1</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">task2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">task1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">3</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">task2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">4</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">task2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">task1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token number" style="color:rgb(125,125,125)">6</span><span class="token punctuation">:</span><span class="token variable" style="color:rgb(28,125,180)">dummy0</span><span class="token plain">-&gt;</span><span class="token variable" style="color:rgb(28,125,180)">task2</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="rules-based-architecture">Rules-based architecture<a href="#rules-based-architecture" class="hash-link" aria-label="Direct link to Rules-based architecture" title="Direct link to Rules-based architecture" translate="no">â€‹</a></h2>
<p>The behavior of an agent with the rules-based architecture can contain <code>reflex</code> and <code>rule</code> statements. The <code>reflex</code> block will always be executed first. Then the rules are fired (executed) when their condition becomes true and in the order defined by their decreasing priorities.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="declaration-2">Declaration<a href="#declaration-2" class="hash-link" aria-label="Direct link to Declaration" title="Direct link to Declaration" translate="no">â€‹</a></h3>
<p>Using the rules-based architectures for a species requires to use the <strong>control</strong> facet:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">dummy</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">rules</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rule-statement"><code>rule</code> statement<a href="#rule-statement" class="hash-link" aria-label="Direct link to rule-statement" title="Direct link to rule-statement" translate="no">â€‹</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="facets-2">facets<a href="#facets-2" class="hash-link" aria-label="Direct link to facets" title="Direct link to facets" translate="no">â€‹</a></h4>
<ul>
<li class=""><code>when</code>: (boolean), the condition that needs to be fulfilled to execute the rule.</li>
<li class=""><code>priority</code>: (float), an optional priority for the rule, which is used to sort activable rules and run them in that order.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="definition-2">Definition<a href="#definition-2" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition" translate="no">â€‹</a></h4>
<p>As <code>reflex</code>, a <code>rule</code> is a sequence of statements that can be executed, at each time step, by the agent. They are executed if and only if their condition expression (<code>when</code> facet) is fulfilled. Among all the rules that fulfill their condition, the tasks are executed in the decreasing order of their priority (<code>priority</code> facet).</p>
<p>For example, consider the following example:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">simple_rules_statements</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">rules</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_a</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">update:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">rnd</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_b</span><span class="token plain"> &lt;- </span><span class="token number" style="color:rgb(125,125,125)">0</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">update:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">rnd</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">reflex</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">show_priorities</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Priority of rule a = &quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_a</span><span class="token plain"> + </span><span class="token string" style="color:rgb(116,167,251)">&quot;, priority of rule b = &quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_b</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_a</span><span class="token plain"> &lt; </span><span class="token number" style="color:rgb(125,125,125)">50</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_a</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;  Rule a fired with priority: &quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_a</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_b</span><span class="token plain"> &gt; </span><span class="token number" style="color:rgb(125,125,125)">25</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_b</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">	</span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">write</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;  Rule b fired with priority: &quot;</span><span class="token plain"> + </span><span class="token variable" style="color:rgb(28,125,180)">priority_of_b</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>At each simulation step, first, the agents update the priority values associated with the rules. The <code>reflex</code> will first display these values. Then the conditions are evaluated and the rules that can be executed are executed in their priority order.</p>
<p>Here a possible result:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">38</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">38</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">91</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">37</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">37</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">77</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">32</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">18</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">95</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">94</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">94</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">20</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">78</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">47</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">47</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain"></span><span class="token variable" style="color:rgb(28,125,180)">Priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">a</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">77</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">priority</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">of</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> = </span><span class="token number" style="color:rgb(125,125,125)">76</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">  </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">Rule</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">b</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">fired</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">with</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">priority:</span><span class="token plain"> </span><span class="token number" style="color:rgb(125,125,125)">76</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="user-control-architecture">User Control Architecture<a href="#user-control-architecture" class="hash-link" aria-label="Direct link to User Control Architecture" title="Direct link to User Control Architecture" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="user_only-user_first-user_last"><code>user_only</code>, <code>user_first</code>, <code>user_last</code><a href="#user_only-user_first-user_last" class="hash-link" aria-label="Direct link to user_only-user_first-user_last" title="Direct link to user_only-user_first-user_last" translate="no">â€‹</a></h3>
<p>A specific type of control architecture has been introduced to allow users to take control of an agent during the course of the simulation. When the user gets control of the agent, a control panel will appear in the interface. This architecture can be invoked using three different keywords: <code>user_only</code>, <code>user_first</code>, <code>user_last</code>.</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">user</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">user_only</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token punctuation">..</span><span class="token punctuation">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>If the control chosen is <code>user_first</code>, it means that the user-controlled panel is opened first, and then the agent has a chance to run its &quot;own&quot; behaviors (reflexes, essentially, or &quot;init&quot; in the case of a &quot;user_init&quot; panel).
If the control chosen is <code>user_last</code>, it is the contrary.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="additional-attribute">Additional attribute<a href="#additional-attribute" class="hash-link" aria-label="Direct link to Additional attribute" title="Direct link to Additional attribute" translate="no">â€‹</a></h3>
<p>Each agent provided with this architecture inherits a boolean attribute called <code>user_controlled</code>. If this attribute becomes false, no panels will be displayed and the agent will run &quot;normally&quot; unless its species is defined with a <code>user_only</code> control.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="user_panel"><code>user_panel</code><a href="#user_panel" class="hash-link" aria-label="Direct link to user_panel" title="Direct link to user_panel" translate="no">â€‹</a></h3>
<p>This control architecture is a specialization of the Finite State Machine Architecture where the &quot;behaviors&quot; of agents can be defined by using new constructs called <code>user_panel</code> (and one <code>user_init</code>), mixed with <code>state</code> or <code>reflex</code>. This <code>user_panel</code> translates, in the interface, in a semi-modal view that awaits the user to choose action buttons, change attributes of the controlled agent, etc. Each <code>user_panel</code>, like a <code>state</code> in FSM, can have an <code>enter</code> and <code>exit</code> sections, but it is only defined in terms of a set of <code>user_command</code>s which describe the different action buttons present in the panel.</p>
<p><code>user_command</code> can also accept inputs, in order to create more interesting commands for the user. This uses the <code>user_input</code> statement (and not operator), which is basically the same as a temporary variable declaration whose value is asked to the user.</p>
<p>As <code>user_panel</code> is a specialization of <code>state</code>, the modeler has the possibility to describe several panels and choose the one to open depending on some condition, using the same syntax than for finite state machines:</p>
<ul>
<li class="">either adding <code>transitions</code> to the user_panels,</li>
<li class="">or setting the <code>state</code> attribute to a new value, from inside or from another agent.</li>
</ul>
<p>This ensures great flexibility for the design of the user interface proposed to the user, as it can be adapted to the different stages of the simulation, etc...</p>
<p>Follows a simple example, where, every 10 steps, and depending on the value of an attribute called &quot;advanced&quot;, either the basic or the advanced panel is proposed. (The full model is provided in the GAMA model library.)</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#282A36;--prism-background-color:#FFFFFF"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#282A36;background-color:#FFFFFF"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#282A36"><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">species </span><span class="token variable" style="color:rgb(28,125,180)">user</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">control:</span><span class="token variable" style="color:rgb(28,125,180)">user_only</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_panel</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">default</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">initial:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Basic Control&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">every</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">10</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#cycles</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">and</span><span class="token plain"> !</span><span class="token variable" style="color:rgb(28,125,180)">advanced_user_control</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Advanced Control&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">every</span><span class="token punctuation">(</span><span class="token number" style="color:rgb(125,125,125)">10</span><span class="token plain"> </span><span class="token constant" style="color:rgb(0, 0, 0)">#cycles</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">and</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">advanced_user_control</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_panel</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Basic Control&quot;</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_command</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Kill one cell&quot;</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">         </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">one_of</span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">cell</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">            </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">die</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_command</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Create one cell&quot;</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">create</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">cell</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      } </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">default</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_panel</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Advanced Control&quot;</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_command</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Kill cells&quot;</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_input</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Number&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">returns:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">number</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">type:</span><span class="token plain"> </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token plain">&lt;- </span><span class="token number" style="color:rgb(125,125,125)">10</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">ask</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token variable" style="color:rgb(28,125,180)">number</span><span class="token plain"> </span><span class="token operator" style="color:rgb(46,93,78);font-style:bold">among</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">cell</span><span class="token punctuation">)</span><span class="token plain">{</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">           </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">do</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">die</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_command</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Create cells&quot;</span><span class="token plain"> {</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">user_input</span><span class="token plain"> </span><span class="token string" style="color:rgb(116,167,251)">&quot;Number&quot;</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">returns:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">number</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">type:</span><span class="token plain"> </span><span class="token type_statement" style="color:rgb(127,0,85);font-style:bold">int </span><span class="token plain">&lt;- </span><span class="token number" style="color:rgb(125,125,125)">10</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">        </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">create</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">cell</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">number:</span><span class="token plain"> </span><span class="token variable" style="color:rgb(28,125,180)">number</span><span class="token plain"> </span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      } </span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">      </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">transition</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">to:</span><span class="token plain"> </span><span class="token statement" style="color:rgb(127,0, 85);font-style:bold">default</span><span class="token plain"> </span><span class="token facet" style="color:rgb(154,72,71)">when:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(125,125,125)">true</span><span class="token punctuation">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#282A36"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The panel marked with the <code>initial: true</code> facet will be the one run first when the agent is supposed to run. If none is marked, the first panel (in their definition order) is chosen.</p>
<p>A special panel called <code>user_init</code> will be invoked only once when initializing the agent if it is defined.
If no panel is described or if all panels are empty (i.e. no <code>user_command</code>), the control view is never invoked. If the control is said to be <code>user_only</code>, the agent will then not run any of its behaviors.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="other-control-architectures">Other Control Architectures<a href="#other-control-architectures" class="hash-link" aria-label="Direct link to Other Control Architectures" title="Direct link to Other Control Architectures" translate="no">â€‹</a></h2>
<p>Some other control architectures are available in additional plugins. For instance, <a href="https://github.com/gama-platform/gama/wiki/BDIAgents" target="_blank" rel="noopener noreferrer" class="">BDI (Belief, desire, intention) architecture</a> is available. Feel free to read about it if you want to learn more.</p>
<p>Do you need some other control architectures for your model? Feel free to make your suggestion to the team of developers through the <a href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank" rel="noopener noreferrer" class="">mailing list</a>. Remember also that GAMA is an open-source platform, you can design your own control architecture easily. Go to the section Community/contribute if you want to jump into coding!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/gama-platform/gama/wiki/ControlArchitecture/_edit" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/wiki/1.9.1/MultiParadigmModeling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Multi-Paradigm Modeling</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/wiki/1.9.1/DifferentialEquations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using Differential Equations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#index" class="table-of-contents__link toc-highlight">Index</a></li><li><a href="#finite-state-machine" class="table-of-contents__link toc-highlight">Finite State Machine</a><ul><li><a href="#declaration" class="table-of-contents__link toc-highlight">Declaration</a></li><li><a href="#state-statement" class="table-of-contents__link toc-highlight"><code>state</code> statement</a></li></ul></li><li><a href="#task-based" class="table-of-contents__link toc-highlight">Task-Based</a><ul><li><a href="#declaration-1" class="table-of-contents__link toc-highlight">Declaration</a></li><li><a href="#task-statement" class="table-of-contents__link toc-highlight"><code>task</code> statement</a></li></ul></li><li><a href="#rules-based-architecture" class="table-of-contents__link toc-highlight">Rules-based architecture</a><ul><li><a href="#declaration-2" class="table-of-contents__link toc-highlight">Declaration</a></li><li><a href="#rule-statement" class="table-of-contents__link toc-highlight"><code>rule</code> statement</a></li></ul></li><li><a href="#user-control-architecture" class="table-of-contents__link toc-highlight">User Control Architecture</a><ul><li><a href="#user_only-user_first-user_last" class="table-of-contents__link toc-highlight"><code>user_only</code>, <code>user_first</code>, <code>user_last</code></a></li><li><a href="#additional-attribute" class="table-of-contents__link toc-highlight">Additional attribute</a></li><li><a href="#user_panel" class="table-of-contents__link toc-highlight"><code>user_panel</code></a></li></ul></li><li><a href="#other-control-architectures" class="table-of-contents__link toc-highlight">Other Control Architectures</a></li></ul></div></div></div><br></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="https://github.com/gama-platform" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i> Github <i class="fa fa-arrow-up-right-from-square"></i></a></li><li class="footer__item"><a class="footer__link-item" href="https://www.facebook.com/GamaPlatform/" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook"></i> Facebook <i class="fa fa-arrow-up-right-from-square"></i></a></li><li class="footer__item"><a class="footer__link-item" href="https://www.linkedin.com/company/gama-platform" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin"></i> LinkedIn <i class="fa fa-arrow-up-right-from-square"></i></a></li><li class="footer__item"><a class="footer__link-item" href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank" rel="noopener noreferrer"><i class="fab fa-youtube"></i> Youtube <i class="fa fa-arrow-up-right-from-square"></i></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Mailing list</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br>gama-platform@googlegroups.com</a></li><li class="footer__item"><a class="footer__link-item" href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br>gama-dev@googlegroups.com</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Licence</div><ul class="footer__items clean-list"><li class="footer__item">
                  <p>
                    Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
                  </p>
                </li><li class="footer__item">
                  <p>A copy of the license is included <a href="https://github.com/gama-platform/gama/wiki/LICENSE.md" style="display:initial">here</a>, in the repository of the wiki content.</p>
                </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/gama-logo.png" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/gama-logo.png" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright (C) - 2025 GAMA Platform.</div></div></div></footer></div>
</body>
</html>