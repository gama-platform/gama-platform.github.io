"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58967],{48901(e,n,t){t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"DefiningActionsAndBehaviors","title":"Defining actions and behaviors","description":"[//]: # (startConcept|actionsandbehaviors)","source":"@site/versioned_docs/version-1.9.3/DefiningActionsAndBehaviors.md","sourceDirName":".","slug":"/DefiningActionsAndBehaviors","permalink":"/wiki/1.9.3/DefiningActionsAndBehaviors","draft":false,"unlisted":false,"editUrl":"https://github.com/gama-platform/gama/wiki/DefiningActionsAndBehaviors/_edit","tags":[],"version":"1.9.3","frontMatter":{"title":"Defining actions and behaviors"},"sidebar":"main","previous":{"title":"Regular species","permalink":"/wiki/1.9.3/RegularSpecies"},"next":{"title":"Interaction between agents","permalink":"/wiki/1.9.3/InteractionBetweenAgents"}}');var i=t(74848),o=t(28453);const s={title:"Defining actions and behaviors"},l=void 0,r={},c=[{value:"Index",id:"index",level:2},{value:"Action",id:"action",level:2},{value:"Declare an action",id:"declare-an-action",level:3},{value:"Call an action",id:"call-an-action",level:3},{value:"Behavior",id:"behavior",level:2},{value:"Example",id:"example",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Both actions and behaviors can be seen as methods in OOP. They can be defined in any species."}),"\n",(0,i.jsx)(n.h2,{id:"index",children:"Index"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#action",children:"Action"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#declare-an-action",children:"Declare an action"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#call-an-action",children:"Call an action"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#behavior",children:"Behavior"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#example",children:"Example"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"action",children:"Action"}),"\n",(0,i.jsx)(n.h3,{id:"declare-an-action",children:"Declare an action"}),"\n",(0,i.jsxs)(n.p,{children:["An action is a function or procedure run by an instance of species. An action can return a value (in that case, the type of return has to be specified just before the name of the action), or not (in that case, you just have to put the keyword ",(0,i.jsx)(n.code,{children:"action"})," before the name of the action). The former ones are often named ",(0,i.jsx)(n.strong,{children:"functions"}),", whereas the latter ones are named ",(0,i.jsx)(n.strong,{children:"procedures"})," in many programming languages."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"species my_species {\n    int action_with_return_value {\n\t// statements...\n\treturn 1;\n    }\n    action action_without_return_value {\n\t// statements...\n    }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Arguments can also be mandated in your action. You have to specify the type and the name of the argument:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"action action_without_return_value (int argA, float argB) {\n    // statements...\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"If you want to have some optional arguments in the list, you can give some by default values to turn them optional. Nb: it is better to define the optional arguments at the end of the list of argument."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"action my_action (int argA, float argB <- 5.1, point argC <- {0,0}) {\n\t// statements...\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"call-an-action",children:"Call an action"}),"\n",(0,i.jsx)(n.p,{children:"To call an action, it depends whether you want to get the returned value of not:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["to call a procedure (without getting any returned value): you have to use the statement ",(0,i.jsx)(n.code,{children:"do"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["to call a function and thus get the returned value, you need to use ",(0,i.jsx)(n.code,{children:"any_agent action(arguments)"})," and assigned this value to a variable."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can use the statement ",(0,i.jsx)(n.code,{children:"do"})," in different ways:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"With facets: after specifying the name of your action, you can specify the values of your arguments as if the name of your arguments were facets:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"do my_action argA: 5 argB: 5.1;\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"With parenthesis: after specifying the name of your action, you can specify the values of your arguments in the same order they were declared, between parenthesis (just as if you used an operator):"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"do my_action (5,5.1);\n"})}),"\n",(0,i.jsx)(n.p,{children:"We encourage you to use the second way."}),"\n",(0,i.jsxs)(n.p,{children:["To catch the returned value, you have to skip the ",(0,i.jsx)(n.code,{children:"do"})," statement, and store the value directly in a temporary variable:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"int var1 <- my_action(5,5.1);\n// or\nint var1 <- my_action(argA: 5, argB: 5.1);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"behavior",children:"Behavior"}),"\n",(0,i.jsxs)(n.p,{children:["A behavior, or reflex, is a set of statements which is called ",(0,i.jsx)(n.strong,{children:"automatically"})," at each time step by an agent.\nNote that, a behavior is linked to an ",(0,i.jsx)(n.a,{href:"BuiltInArchitectures",children:(0,i.jsx)(n.strong,{children:"architecture"})}),"; the reflex-based architecture is the default one, others can be used ",(0,i.jsxs)(n.a,{href:"ControlArchitecture",children:["with the ",(0,i.jsx)(n.code,{children:"controls"})," facet of the species`"]}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'reflex my_reflex {\n    write ("Executing the inconditional reflex");\n    // statements...\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["With the facet ",(0,i.jsx)(n.code,{children:"when"}),", this reflex is only executed when the boolean expression evaluates to true. It is a convenient way to specify the behavior of agents."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'reflex my_reflex when: flip(0.5) {\n    write ("Executing the conditional reflex");\n    // statements...\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Reflex, unlike actions, cannot be called from another context. But a reflex can, of course, call actions."}),"\n",(0,i.jsx)(n.p,{children:"NB: Init is a special reflex, that occurs only when the agent is created."}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"To practice a bit with those notions, we will build an easy example. Let's build a model with a species balloon that has 2 attributes: balloon_size (float) and balloon_color (rgb). Each balloon has a random position and color, his aspect is a sphere. Each step, a balloon has a probability to spawn in the environment. Once a balloon is created, its size is 10cm, and each step, the size increases by 1cm. Once the balloon size reaches 50cm, the balloon has a probability to burst. Once 10 balloons are destroyed, the simulation stops. The volume of each balloon is displayed in the balloon position."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"images/burst_the_baloon.png",src:t(99471).A+"",width:"742",height:"552"})}),"\n",(0,i.jsx)(n.p,{children:"Here is one of the multiple possible implementations:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'model burst_the_baloon\n\nglobal{\n    float worldDimension <- 5#m;\n    geometry shape <- square(worldDimension);\n    int nbBaloonDead <- 0;\n\n    reflex buildBaloon when: (flip(0.1)) {\n\tcreate balloon number: 1;\n    }\n\t\n    reflex endSimulation when: nbBaloonDead>10 {\n\tdo pause;\n    }\n}\n\nspecies balloon {\n    float balloon_size;\n    rgb balloon_color;\n    \n    init {\n\tballoon_size <- 0.1;\n\tballoon_color <- rgb(rnd(255),rnd(255),rnd(255));\n    }\n\n    reflex balloon_grow {\n\tballoon_size <- balloon_size + 0.01;\n\tif (balloon_size > 0.5) {\n\t    if (flip(0.2)) {\n\t\tdo balloon_burst;\n\t    }\n\t}\n    }\n\t\n    float balloon_volume (float diameter) {\n\tfloat exact_value <- 2/3 * #pi * diameter^3;\n\tfloat round_value <- round(exact_value*1000)/1000;\n\treturn round_value;\n    }\n\t\n    action balloon_burst {\n\twrite "the baloon is dead !";\n\tnbBaloonDead <- nbBaloonDead + 1;\n\tdo die;\n    }\n\t\n    aspect balloon_aspect {\n\tdraw circle(balloon_size) color: balloon_color;\n\tdraw string(balloon_volume(balloon_size)) color: #black;\n    }\n}\n\nexperiment my_experiment type: gui {\n    output {\n\tdisplay myDisplay {\n\t    species balloon aspect: balloon_aspect;\n\t}\n    }\n}\n'})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},99471(e,n,t){t.d(n,{A:()=>a});const a=t.p+"assets/images/burst_the_baloon-65c0cdb3aee9e1612bbcbf7b7d61289a.png"},28453(e,n,t){t.d(n,{R:()=>s,x:()=>l});var a=t(96540);const i={},o=a.createContext(i);function s(e){const n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);