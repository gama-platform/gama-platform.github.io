"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[42240],{24935:(e,o,i)=>{i.r(o),i.d(o,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>t,metadata:()=>d,toc:()=>r});var n=i(74848),l=i(28453);const t={title:"Using Comodel"},a=void 0,d={id:"Comodel",title:"Using Comodel",description:"Introduction",source:"@site/versioned_docs/version-1.9.3/Comodel.md",sourceDirName:".",slug:"/Comodel",permalink:"/wiki/Comodel",draft:!1,unlisted:!1,editUrl:"https://github.com/gama-platform/gama/wiki/Comodel/_edit",tags:[],version:"1.9.3",frontMatter:{title:"Using Comodel"},sidebar:"main",previous:{title:"Implementing light",permalink:"/wiki/ManipulateLight"},next:{title:"Save and Restore simulations",permalink:"/wiki/Save-and-restore-simulations"}},s={},r=[{value:"Introduction",id:"introduction",level:2},{value:"Example of a Comodel",id:"example-of-a-comodel",level:2},{value:"Why and when can we use Comodel?",id:"why-and-when-can-we-use-comodel",level:2},{value:"Use of Comodel in a GAML model",id:"use-of-comodel-in-a-gaml-model",level:2},{value:"Definition of a micro-model",id:"definition-of-a-micro-model",level:3},{value:"Instantiation of a micro-model",id:"instantiation-of-a-micro-model",level:3},{value:"Control micro-model life-cycle",id:"control-micro-model-life-cycle",level:3},{value:"Visualization of the micro-model",id:"visualization-of-the-micro-model",level:2},{value:"More details",id:"more-details",level:2},{value:"Example of the comodel",id:"example-of-the-comodel",level:2},{value:"Urbanization model with a Traffic model",id:"urbanization-model-with-a-traffic-model",level:3},{value:"Flood model with Evacuation model",id:"flood-model-with-evacuation-model",level:3}];function m(e){const o={code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h2,{id:"introduction",children:"Introduction"}),"\n",(0,n.jsx)(o.p,{children:"In the trend of developing a complex system of multi-disciplinary, composing and coupling models are days by days becoming the most attractive research objectives.\nGAMA is supporting the co-modeling and co-simulation which are supposed to be a common coupling infrastructure."}),"\n",(0,n.jsx)(o.h2,{id:"example-of-a-comodel",children:"Example of a Comodel"}),"\n",(0,n.jsxs)(o.p,{children:["A Comodel is a model, especially an agent-based model, composed of several sub-models, called ",(0,n.jsx)(o.strong,{children:"micro-models"}),". A comodel itself could be also a micro-model of another comodel. From the point of view of a micro-model, the comodel is called a ",(0,n.jsx)(o.strong,{children:"macro-model"}),"."]}),"\n",(0,n.jsx)(o.p,{children:"A micro-model must be imported, instantiated, and life-controlled by a macro-model."}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"GAMA co-modeling architecture.",src:i(37447).A+"",width:"522",height:"235"})}),"\n",(0,n.jsx)(o.h2,{id:"why-and-when-can-we-use-comodel",children:"Why and when can we use Comodel?"}),"\n",(0,n.jsx)(o.p,{children:"Co-models ca definitely be very useful when the whole model can be decomposed in several sub-models, each of them representing, in general, a dynamics of the whole model, and that interact through some entities of the model. In particular, it allows several modelers to develop the part of the model dedicated to their expertise field, to test it extensively, before integrating it inside the whole model (where integration tests should not be omitted!)."}),"\n",(0,n.jsx)(o.h2,{id:"use-of-comodel-in-a-gaml-model",children:"Use of Comodel in a GAML model"}),"\n",(0,n.jsx)(o.p,{children:"The GAML language has evolved by extending the import section. The old importation told the compiler to merge all imported elements into as one model, but the new one allows modelers to keep the elements coming from imported models separately from the caller model."}),"\n",(0,n.jsx)(o.h3,{id:"definition-of-a-micro-model",children:"Definition of a micro-model"}),"\n",(0,n.jsx)(o.p,{children:"Defining a micro-model of comodel is to import an existing model with an alias name. The syntax is:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"import <path to the GAML model> as <identifier>\n"})}),"\n",(0,n.jsx)(o.p,{children:"The identifier is then become the new name of the micro-model."}),"\n",(0,n.jsx)(o.p,{children:"As an example taken from the model library, we can write:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:'import "Prey Predator Adapter.gaml" as Organism\n'})}),"\n",(0,n.jsx)(o.h3,{id:"instantiation-of-a-micro-model",children:"Instantiation of a micro-model"}),"\n",(0,n.jsxs)(o.p,{children:["After the importation and giving an identifier, micro-model must be explicitly instantiated. It could be done by the ",(0,n.jsx)(o.code,{children:"create"})," statement."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"create <micro-model identifier> . <experiment name> [optional parameter];\n"})}),"\n",(0,n.jsxs)(o.p,{children:["The ",(0,n.jsx)(o.code,{children:"<exeperiment name>"})," is an experiment inside micro-model. This syntax will generate some experiment agents and attach an implicit simulation."]}),"\n",(0,n.jsx)(o.p,{children:"Note: The creation of several instances is not multi-simulation, but multi-experiment. Modelers could create an experiment with multi-simulation by explicitly do the init inside the experiment scope."}),"\n",(0,n.jsx)(o.p,{children:"As an example taken from the model library, we can write:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"global {\n    init {\n        //instantiate three instant of micro-model PreyPredator\n        create Organism.Simple number: 3 with: [shape::square(100), preyinit::10, predatorinit::1] ;\n    }\n}\n"})}),"\n",(0,n.jsx)(o.h3,{id:"control-micro-model-life-cycle",children:"Control micro-model life-cycle"}),"\n",(0,n.jsxs)(o.p,{children:["A micro-model can be controlled as any normal agent by asking the corresponding identifier, and also be destroyed by the ",(0,n.jsx)(o.code,{children:"do die;"})," statement. And it can be recreated any time we need."]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"ask (<micro-model identifier> . <experiment name>  at <number> ) . simulation {\n    ...\n}\n"})}),"\n",(0,n.jsx)(o.p,{children:"More generally, to schedule all the created simulations, we can do:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"reflex simulate_micro_models {\n    // ask all simulation do their job\n    ask (Organism.Simple collect each.simulation) {\n        do _step_;\n    }\n}\n"})}),"\n",(0,n.jsx)(o.h2,{id:"visualization-of-the-micro-model",children:"Visualization of the micro-model"}),"\n",(0,n.jsx)(o.p,{children:"The micro-model species could display in comodel with the support of agent layer"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:'agents "name of layer" value: (<micro-model> . <experiment name> at <number>).<get List of agents>;\n'})}),"\n",(0,n.jsx)(o.p,{children:"As an example:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:'display "Comodel display" {\n    agents "agentprey" value: (Organism.Simple accumulate each.get_prey());\n    agents "agentpredator" value: (Organism.Simple accumulate each.get_predator());\n}\n'})}),"\n",(0,n.jsx)(o.h2,{id:"more-details",children:"More details"}),"\n",(0,n.jsx)(o.h2,{id:"example-of-the-comodel",children:"Example of the comodel"}),"\n",(0,n.jsx)(o.p,{children:"The following illustrations are taken from the model library provided with the GAMA platform."}),"\n",(0,n.jsx)(o.h3,{id:"urbanization-model-with-a-traffic-model",children:"Urbanization model with a Traffic model"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Co-modeling example: urbanization model with a Traffic model.",src:i(9292).A+"",width:"1920",height:"1048"})}),"\n",(0,n.jsx)(o.h3,{id:"flood-model-with-evacuation-model",children:"Flood model with Evacuation model"}),"\n",(0,n.jsx)(o.p,{children:"The aim of this model is to couple the two existing models: Flood Simulation and Evacuation."}),"\n",(0,n.jsx)(o.p,{children:"Toy Models/Evacuation/models/continuous_move.gaml"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Co-modeling example: the evacuation model.",src:i(83120).A+"",width:"1325",height:"591"})}),"\n",(0,n.jsx)(o.p,{children:"Toy Models/Flood Simulation/models/Hydrological Model.gaml"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Co-modeling example: the flood model.",src:i(92305).A+"",width:"1325",height:"780"})}),"\n",(0,n.jsx)(o.p,{children:"The comodel explores the effect of a flood on an evacuation plan:"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Co-modeling example: coupling of the flood and evacuation models.",src:i(36991).A+"",width:"1325",height:"879"})}),"\n",(0,n.jsx)(o.p,{children:"Simulation results:"}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Co-modeling example: some simulation results.",src:i(85018).A+"",width:"6696",height:"876"})})]})}function c(e={}){const{wrapper:o}={...(0,l.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(m,{...e})}):m(e)}},85018:(e,o,i)=>{i.d(o,{A:()=>n});const n=i.p+"assets/images/comodel_Flood_Evacuation-abb2c437cc56762d8d91d050ce2f295e.png"},36991:(e,o,i)=>{i.d(o,{A:()=>n});const n=i.p+"assets/images/comodel_disp_Flood_Evacuation-ce11d598a10d4bff9dc6a865c7c7ea28.png"},9292:(e,o,i)=>{i.d(o,{A:()=>n});const n=i.p+"assets/images/comodel_urban_traffic-f9d1fa7726b0be51ecc3ed414bf2a851.png"},37447:(e,o,i)=>{i.d(o,{A:()=>n});const n=i.p+"assets/images/concepts-8e716d9be85be2c21631ae72f7f2ccdb.png"},83120:(e,o,i)=>{i.d(o,{A:()=>n});const n=i.p+"assets/images/continuous_move_model_display-9542692345d8300e02c954ea07c9f84a.png"},92305:(e,o,i)=>{i.d(o,{A:()=>n});const n=i.p+"assets/images/hydro_model_display-4290ba05148ec1d20b834c76fbae34e6.png"},28453:(e,o,i)=>{i.d(o,{R:()=>a,x:()=>d});var n=i(96540);const l={},t=n.createContext(l);function a(e){const o=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),n.createElement(t.Provider,{value:o},e.children)}}}]);