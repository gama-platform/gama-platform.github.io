<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>FIPA Request (2) · GAMA-Platform</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="[//]: # (keyword|skill_fipa)"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="FIPA Request (2) · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gama-platform.github.io/"/><meta property="og:description" content="[//]: # (keyword|skill_fipa)"/><meta property="og:image" content="https://gama-platform.github.io//resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://gama-platform.github.io//resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/img/gama-logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.4.4/fuse.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/searchEngine.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/gama-logo_white.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/wiki/Home" target="_self">Documentation</a></li><li class=""><a href="/wiki/Tutorials" target="_self">Tutorials</a></li><li class=""><a href="/download" target="_self">Download</a></li><li class=""><a href="/wiki/Contribute" target="_self">Contribute</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">FIPA Request (2)</h1></header><article><div><span><p>This model demontrates a usecase of the FIPA Request interaction protocol. (Please see <a href="http://www.fipa.org/specs/fipa00026/index.html">http://www.fipa.org/specs/fipa00026/index.html</a> for the detail description of this protocol).</p>
<p>The Initiator agent begins the 'fipa-request' conversation/interaction protocol by sending a 'request' message to the Participant agent with 'go sleeping' as content.
On receiving the 'request' message, the Participant agent replies with two consecutive messages :
(1) an 'agree' message indicating that the Participant agent accepts to execute the request of the Initiator agent,
(2) a 'failure' message indicating that the Participant agent fails to (can not) execute the requestion of the Initiator agent (in this case, the Participant agent says that it can not go sleeping because the bed is broken!).
After the Initiator reads the 'failure' message from the Participant, the corresponding conversation ends.</p>
<p>Code of the model :</p>
<pre><code class="hljs"><span class="hljs-builtin">model</span> fipa_request_2

global {
    Participant p;
    
    init {
        <span class="hljs-keyword">create</span> Initiator;
        <span class="hljs-keyword">create</span> Participant <span class="hljs-symbol">returns:</span> ps;
        
         p &lt;- ps at 0;
        
        <span class="hljs-keyword">write</span> <span class="hljs-string">'Step the simulation to observe the outcome in the console'</span>;
    }
}

<span class="hljs-literal">species</span> Initiator <span class="hljs-symbol">skills:</span> [<span class="hljs-builtin">fipa</span>] {
    <span class="hljs-builtin">reflex</span> print_debug_infor {
        <span class="hljs-keyword">write</span> name + <span class="hljs-string">' with conversations: '</span> + (<span class="hljs-literal">string</span>(conversations)) + <span class="hljs-string">'; messages: '</span> + (<span class="hljs-literal">string</span>(mailbox));
    }
    
    <span class="hljs-builtin">reflex</span> send_request <span class="hljs-symbol">when:</span> (time = 1) {
        <span class="hljs-keyword">write</span> <span class="hljs-string">'send message'</span>;
        <span class="hljs-keyword">do</span> start_conversation (to :: [p], protocol :: <span class="hljs-string">'fipa-request'</span>, performative :: <span class="hljs-string">'request'</span>, contents :: [<span class="hljs-string">'go sleeping'</span>] );
    }
    
    <span class="hljs-builtin">reflex</span> read_agree_message <span class="hljs-symbol">when:</span> !(empty(agrees)) {
        <span class="hljs-keyword">write</span> <span class="hljs-string">'read agree messages'</span>;
        <span class="hljs-keyword">loop</span> a <span class="hljs-symbol">over:</span> agrees {
            <span class="hljs-keyword">write</span> <span class="hljs-string">'agree message with content: '</span> + <span class="hljs-literal">string</span>(a.contents);
        }
    }
    
    <span class="hljs-builtin">reflex</span> read_failure_message <span class="hljs-symbol">when:</span> !(empty(failures)) {
        <span class="hljs-keyword">write</span> <span class="hljs-string">'read failure messages'</span>;
        <span class="hljs-keyword">loop</span> f <span class="hljs-symbol">over:</span> failures {
            <span class="hljs-keyword">write</span> <span class="hljs-string">'failure message with content: '</span> + (<span class="hljs-literal">string</span>(f.contents));
        }
    }
}

<span class="hljs-literal">species</span> Participant <span class="hljs-symbol">skills:</span> [<span class="hljs-builtin">fipa</span>] {
    <span class="hljs-builtin">reflex</span> print_debug_infor {
        <span class="hljs-keyword">write</span> name + <span class="hljs-string">' with conversations: '</span> + (<span class="hljs-literal">string</span>(conversations)) + <span class="hljs-string">'; messages: '</span> + (<span class="hljs-literal">string</span>(mailbox));
    }

    <span class="hljs-builtin">reflex</span> reply_messages <span class="hljs-symbol">when:</span> (!empty(mailbox)) {
        message requestFromInitiator &lt;- (mailbox at 0);
        <span class="hljs-keyword">write</span> <span class="hljs-string">'agree message'</span>;
        <span class="hljs-keyword">do</span> agree <span class="hljs-symbol">with:</span> (<span class="hljs-symbol">message:</span> requestFromInitiator, <span class="hljs-symbol">contents:</span> [<span class="hljs-string">'I will'</span>]);
        
        <span class="hljs-keyword">write</span> <span class="hljs-string">'inform the initiator of the failure'</span>;
        <span class="hljs-keyword">do</span> failure (<span class="hljs-symbol">message:</span> requestFromInitiator, <span class="hljs-symbol">contents:</span> [<span class="hljs-string">'The bed is broken'</span>]);
    }
}



<span class="hljs-builtin">experiment</span> test_request_interaction_protocol <span class="hljs-symbol">type:</span> gui {}
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/gama-logo.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Networks</h5><a href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank"><i class="fab fa-youtube"></i> Youtube</a><a href="https://www.linkedin.com/company/gama-platform" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a><a href="https://twitter.com/gamaplatform" target="_blank"><i class="fab fa-twitter"></i> Twitter</a><a href="https://www.facebook.com/GamaPlatform/" target="_blank"><i class="fab fa-facebook"></i> Facebook</a></div><div><h5>Mailing list</h5><a href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br/>gama-platform@googlegroups.com</a><a href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br/>gama-dev@googlegroups.com</a></div><div><h5>Ecosystem</h5><a href="https://github.com/gama-platform/gama"><i class="fab fa-github"></i> GitHub Gama</a><a href="https://github.com/gama-platform/gama.experimental"><i class="fas fa-puzzle-piece"></i> Gama Experimental Plugins</a><a href="https://github.com/gama-platform/gama.models.experimental"><i class="fas fa-scroll"></i> Gama Experimental Models</a></div></section><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'undefined',
                inputSelector: '#search_input_react'
              });
            </script></body></html>