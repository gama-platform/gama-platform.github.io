"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[71936],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>d});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},f="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),f=p(a),m=i,d=f["".concat(s,".").concat(m)]||f[m]||c[m]||r;return a?n.createElement(d,l(l({ref:t},u),{},{components:a})):n.createElement(d,l({ref:t},u))}));function d(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[f]="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},92614:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>p,toc:()=>f});var n=a(87462),i=a(63366),r=(a(67294),a(3905)),l=["components"],o={title:"Defining export files"},s=void 0,p={unversionedId:"DefiningExportFiles",id:"version-1.8.2-RC2/DefiningExportFiles",title:"Defining export files",description:"[//]: # (startConcept|export_files)",source:"@site/versioned_docs/version-1.8.2-RC2/DefiningExportFiles.md",sourceDirName:".",slug:"/DefiningExportFiles",permalink:"/wiki/DefiningExportFiles",draft:!1,editUrl:"https://github.com/gama-platform/gama/wiki/DefiningExportFiles/_edit",tags:[],version:"1.8.2-RC2",frontMatter:{title:"Defining export files"},sidebar:"side",previous:{title:"Defining monitors and inspectors",permalink:"/wiki/DefiningMonitorsAndInspectors"},next:{title:"Defining user interaction",permalink:"/wiki/DefiningUserInteraction"}},u={},f=[{value:"Index",id:"index",level:2},{value:"The Save Statement",id:"the-save-statement",level:2},{value:"Facets",id:"facets",level:3},{value:"Usages",id:"usages",level:3},{value:"Export files in an experiment",id:"export-files-in-an-experiment",level:2},{value:"Autosave",id:"autosave",level:2}],c={toc:f},m="wrapper";function d(e){var t=e.components,a=(0,i.Z)(e,l);return(0,r.kt)(m,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"index"},"Index"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#the-save-statement"},"The Save Statement")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#export-files-in-experiment"},"Export files in experiment")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#autosave"},"Autosave"))),(0,r.kt)("h2",{id:"the-save-statement"},"The Save Statement"),(0,r.kt)("p",null,'Allows to save data in a file. The type of file can be "shp", "json" and "kml" for vector spatial data (agents and geometries), "asc" and "geotiff" for raster spatial data (grid), "image" for image, "dimacs", "dot", "gexf", "graphml", "gml" and "graph6" for graphs, "text" and "csv". The ',(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"save"))," statement can be use in an init block, a reflex, an action or in a user command."),(0,r.kt)("h3",{id:"facets"},"Facets"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"attributes"),", optional, expects any type in ","[map, list]"," - Allows to specify the attributes of a shape file or GeoJson file where agents are saved. Can be expressed as a list of string or as a literal map. When expressed as a list, each value should represent the name of an attribute of the shape or agent. The keys of the map are the names of the attributes that will be present in the file, the values are whatever expressions needed to define their value. "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"crs"),', optional, expects any type - the name of the projection, e.g. crs:"EPSG:4326" or its EPSG id, e.g. crs:4326. ',(0,r.kt)("a",{parentName:"li",href:"http://spatialreference.org"},"Here")," a list of the CRS codes (and EPSG id)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),", optional, expects any type - the data that will be saved to the file"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"header"),", optional, expects bool - an expression that evaluates to a boolean, specifying whether the save will write a header if the file does not exist"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rewrite"),', optional, expects bool - a boolean expression specifying whether to erase the file if it exists or append data at the end of it. Only applicable to "text" or "csv" files. Default is true'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"to"),", optional, expects string - an expression that evaluates to an string, the path to the file, or directly to a file"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"type"),", optional, expects an identifier, takes values in ","[shp, text, csv, asc, geotiff, image, kml, kmz, json, dimacs, dot, gexf, graphml, gml, graph6]",". - an expression that evaluates to an string, the type of the output file. ")),(0,r.kt)("h3",{id:"usages"},"Usages"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Its simple syntax is:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"save data to: output_file type: a_type_file;\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To save data in a text file:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'save (string(cycle) + "->"  + name + ":" + location) to: "save_data.txt" type: text;\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To save the values of some attributes of the current agent in csv file:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'save [name, location, host] to: "save_data.csv" type: csv;\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To save the geometries of all the agents of a species into a shapefile or a geojson (with optional attributes):")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'save species_of(self) to: "save_shapefile.shp" type: shp attributes: [name::"nameAgent", location::"locationAgent"] crs: "EPSG:4326";\nsave species_of(self) to: "save_shapefile.geojson" type: json attributes: [name::"nameAgent", location::"locationAgent"] ;\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'To save a grid into a geotiff or a asc file (the value considered will be the "grid_value" attribute of the cell):')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'save cell to:"../results/grid.tif" type:geotiff;\nsave cell to:"../results/grid.asc" type:asc;\n\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To save a grid into an image file:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'save cell to:"../results/grid.png" type:image;\n\n')),(0,r.kt)("h2",{id:"export-files-in-an-experiment"},"Export files in an experiment"),(0,r.kt)("p",null,"When the modeler wants to save data at each simulation step, it is recommended to use the ",(0,r.kt)("inlineCode",{parentName:"p"},"save")," statement either in the model itself or in a ",(0,r.kt)("inlineCode",{parentName:"p"},"reflex")," of the ",(0,r.kt)("inlineCode",{parentName:"p"},"experiment")," (the syntax and the use are similar in all the cases)."),(0,r.kt)("p",null,"The use of ",(0,r.kt)("inlineCode",{parentName:"p"},"save")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"experiment")," is mandatory when we want to save a value related to several simulations running in parallel (e.g. the average of a value over several simulations). It is in particular in ",(0,r.kt)("a",{parentName:"p",href:"BatchExperiments"},(0,r.kt)("inlineCode",{parentName:"a"},"batch")," experiments")," to save a value at the end of simulations."),(0,r.kt)("h2",{id:"autosave"},"Autosave"),(0,r.kt)("p",null,"Image files can be exported also through the ",(0,r.kt)("inlineCode",{parentName:"p"},"autosave")," facet of the display, as explained in ",(0,r.kt)("a",{parentName:"p",href:"DefiningDisplaysGeneralities#displays-and-layers"},"this previous part"),"."))}d.isMDXComponent=!0}}]);