"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[41977],{9614:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"Introduction-To-Gama-Java-API","title":"Introduction to GAMA Java API","description":"This introduction to the Java API is dedicated to programmers that want to participate in the java code of GAMA. The main purpose is to describe the main packages and classes of the API to makes it simple to find such crucial information such as: how GAMA create containers, agent and geometries, how exceptions and log are managed, how java code maintain Type safety, etc.","source":"@site/versioned_docs/version-1.9.3/Introduction-To-Gama-Java-API.md","sourceDirName":".","slug":"/Introduction-To-Gama-Java-API","permalink":"/wiki/Introduction-To-Gama-Java-API","draft":false,"unlisted":false,"editUrl":"https://github.com/gama-platform/gama/wiki/Introduction-To-Gama-Java-API/_edit","tags":[],"version":"1.9.3","frontMatter":{"title":"Introduction to GAMA Java API"},"sidebar":"main","previous":{"title":"Index of annotations","permalink":"/wiki/DevelopingIndexAnnotations"},"next":{"title":"Architecture of GAMA","permalink":"/wiki/GamaArchitecture"}}');var s=t(74848),i=t(28453);const r={title:"Introduction to GAMA Java API"},o=void 0,c={},l=[{value:"Table of content",id:"table-of-content",level:2},{value:"Factories",id:"factories",level:2},{value:"Container factories",id:"container-factories",level:3},{value:"Geometry factory",id:"geometry-factory",level:3},{value:"Spatial",id:"spatial",level:2},{value:"Operators",id:"operators",level:3},{value:"Queries",id:"queries",level:3},{value:"Transpositions",id:"transpositions",level:3},{value:"Punctal",id:"punctal",level:3},{value:"Type",id:"type",level:2},{value:"IScope interface",id:"iscope-interface",level:2},{value:"Use of an IScope",id:"use-of-an-iscope",level:3},{value:"Exception",id:"exception",level:2},{value:"Debug",id:"debug",level:2},{value:"Test",id:"test",level:2},{value:"Core",id:"core",level:2},{value:"Metamodel",id:"metamodel",level:3},{value:"Ouputs",id:"ouputs",level:3},{value:"Util",id:"util",level:3},{value:"Operators",id:"operators-1",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This introduction to the Java API is dedicated to programmers that want to participate in the java code of GAMA. The main purpose is to describe the main packages and classes of the API to makes it simple to find such crucial information such as: how GAMA create containers, agent and geometries, how exceptions and log are managed, how java code maintain Type safety, etc."}),"\n",(0,s.jsx)(n.h2,{id:"table-of-content",children:"Table of content"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"#Concepts",children:"Concepts"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#Factories",children:"Factories"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#Spatial",children:"Spatial"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#Type",children:"Type"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#IScope",children:"IScope"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#Exception",children:"Exception"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#Debug",children:"Debug"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#Test",children:"Test"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"#Packages",children:"Packages"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["1.",(0,s.jsx)(n.a,{href:"#Core",children:"Core"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"factories",children:"Factories"}),"\n",(0,s.jsx)(n.h3,{id:"container-factories",children:"Container factories"}),"\n",(0,s.jsxs)(n.p,{children:["GAMA provides 2 factories for containers: ",(0,s.jsx)(n.code,{children:"GamaListFactory"})," and ",(0,s.jsx)(n.code,{children:"GamaMapFactory"}),". Each of them has ",(0,s.jsx)(n.code,{children:"create"})," methods to create objects of type ",(0,s.jsx)(n.code,{children:"IList"})," and ",(0,s.jsx)(n.code,{children:"IMap"}),". The types of elements in the container can be specified at creation using one of the elements defined in ",(0,s.jsx)(n.a,{href:"https://github.com/gama-platform/gama/blob/master/msi.gama.core/src/msi/gaml/types/Types.java",children:(0,s.jsx)(n.code,{children:"Types"})}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Warning: the ",(0,s.jsx)(n.code,{children:"create"})," method is used to create the container, with elements of a given type, ",(0,s.jsx)(n.strong,{children:"but it also converts elements added in this type"}),". To avoid conversion (not recommended), use the method ",(0,s.jsx)(n.code,{children:"createWithoutCasting"}),"."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["GamaListFactory : factory to create list of different type (see ",(0,s.jsx)(n.a,{href:"https://github.com/gama-platform/gama/blob/master/msi.gama.core/src/msi/gama/util/GamaListFactory.java",children:"Java class"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"As an example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"IList<Double> distribution = GamaListFactory.create(Types.FLOAT);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To create ",(0,s.jsx)(n.code,{children:"List"})," object without specifying the type, use ",(0,s.jsx)(n.code,{children:"Types.NO_TYPE"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"IList<Object> result = GamaListFactory.create(Types.NO_TYPE);\n"})}),"\n",(0,s.jsx)(n.p,{children:"or only:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"IList<Object> result = GamaListFactory.create();\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["GamaMapFactory : factory to create map of different type (see ",(0,s.jsx)(n.a,{href:"https://github.com/gama-platform/gama/blob/master/msi.gama.core/src/msi/gama/util/GamaMapFactory.java",children:"Java class"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"As an example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"final IMap<String, IList<?>> ncdata = GamaMapFactory.create(Types.STRING, Types.LIST);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To create ",(0,s.jsx)(n.code,{children:"Map"})," object without specifying the type, use ",(0,s.jsx)(n.code,{children:"Types.NO_TYPE"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"IMap<Object, Object> result = GamaMapFactory.create(Types.NO_TYPE, Types.NO_TYPE);\n"})}),"\n",(0,s.jsx)(n.p,{children:"or only:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"IMap<Object, Object> result = GamaMapFactory.create();\n"})}),"\n",(0,s.jsx)(n.p,{children:"If you want to use map or set, try to the best to rely on collection that ensure order, so to avoid unconsistency in container access. Try the most to avoid returning high order hash based collection, e.g. Set or Map; in this case, rely on standard definition in Gama:"}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["TOrderedHashMap : see ",(0,s.jsx)(n.a,{href:"https://bitbucket.org/trove4j/trove/src/master/core/src/main/java/gnu/trove/map/",children:"trove api"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["TLinkedHashSet : see ",(0,s.jsx)(n.a,{href:"https://bitbucket.org/trove4j/trove/src/master/core/src/main/java/gnu/trove/set/hash/",children:"trove api"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Stream : you can use java build-in streams but there is a special version in Gama taken from ",(0,s.jsx)(n.a,{href:"https://github.com/amaembo/streamex",children:"StreamEx"})," that should be preferred."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"my_container.stream(my_scope)\n"})}),"\n",(0,s.jsx)(n.p,{children:"If you want to get a stream back to a Gama container, you can use the collector in Factories:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"my_container.stream(my_scope).collect(GamaListFactory.toGamaList())\n"})}),"\n",(0,s.jsx)(n.h3,{id:"geometry-factory",children:"Geometry factory"}),"\n",(0,s.jsx)(n.p,{children:"Gama geometry is based on the well established Jstor geometric library, while geographic aspect are handle using GeoTools library"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Spatial.Creation : provide several static method to initialize geometries"}),"\n",(0,s.jsx)(n.li,{}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"spatial",children:"Spatial"}),"\n",(0,s.jsx)(n.p,{children:"The Spatial class provide several static access to the main methods to create, query, manipulate and transform geometries"}),"\n",(0,s.jsx)(n.h3,{id:"operators",children:"Operators"}),"\n",(0,s.jsxs)(n.p,{children:["Use as ",(0,s.jsx)(n.code,{children:"Spatial.Operators"})," follow by the operator, usually one of Gaml language:"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"OperatorsSZ#union",children:"union"}),", intersection, minus, and other cross geometry operations"]}),"\n",(0,s.jsx)(n.h3,{id:"queries",children:"Queries"}),"\n",(0,s.jsx)(n.p,{children:"closest, distance, overlapping, and other relative spatial relationship"}),"\n",(0,s.jsx)(n.h3,{id:"transpositions",children:"Transpositions"}),"\n",(0,s.jsx)(n.p,{children:"enlarge, transpose, rotate, reduce and other specific transposition (like triangulation, squarification, etc.)"}),"\n",(0,s.jsx)(n.h3,{id:"punctal",children:"Punctal"}),"\n",(0,s.jsx)(n.p,{children:"operations relative to points"}),"\n",(0,s.jsx)(n.h2,{id:"type",children:"Type"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"IType"}),": The main class to manipulate GamaType (main implementation of IType) is ",(0,s.jsx)(n.a,{href:"https://github.com/gama-platform/gama/blob/master/msi.gama.core/src/msi/gaml/types/Types.java",children:"Types"}),", that provides access to most common type manipulated in Gama"]}),"\n",(0,s.jsx)(n.p,{children:"Op\xe9rateur de cast:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Types.get(IType.class)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"iscope-interface",children:"IScope interface"}),"\n",(0,s.jsx)(n.p,{children:'An object of type IScope represents the context of execution of an agent (including experiments, simulations, and "regular" agents). Everywhere it is accessible (either passed as a parameter or available as an instance variable in some objects), it provides an easy access to a number of features: the current active agent, the shared random number generator, the global clock, the current simulation and experiment agents, the local variables declared in the current block, etc.'}),"\n",(0,s.jsx)(n.p,{children:"It also allows modifying this context, like changing values of local variables, adding new variables, although these functions should be reserved to very specific usages. Ordinarily, the scope is simply passed to core methods that allow to evaluate expressions, cast values, and so on."}),"\n",(0,s.jsx)(n.h3,{id:"use-of-an-iscope",children:"Use of an IScope"}),"\n",(0,s.jsxs)(n.p,{children:["A variable ",(0,s.jsx)(n.code,{children:"scope"})," of type ",(0,s.jsx)(n.code,{children:"IScope"})," can be used to:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["get the current agent with: ",(0,s.jsx)(n.code,{children:"scope.getAgentScope()"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"IAgent agent = scope.getAgentScope();\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"evaluate an expression in the current scope:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"String mes = Cast.asString(scope, message.value(scope));\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"know whether the scope has been interrupted:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"boolean b = scope.interrupted();\n"})}),"\n",(0,s.jsx)(n.h2,{id:"exception",children:"Exception"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/gama-platform/gama.old/tree/GAMA_1.9.2/msi.gama.core/src/msi/gama/runtime/exceptions",children:"Exceptions"})," in GAMA"]}),"\n",(0,s.jsxs)(n.p,{children:["An exception that can appear in the GAMA platform can be run using the ",(0,s.jsx)(n.code,{children:"GamaRuntimeException"})," class. This class allows throwing an error (using ",(0,s.jsx)(n.code,{children:"error(String,IScope)"})," method) or a warning (using ",(0,s.jsx)(n.code,{children:"warning(String,IScope)"})," method)."]}),"\n",(0,s.jsx)(n.p,{children:"In particular, it can be useful to catch the Java Exception and to throw a GAMA exception."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'try {\n        ...\n} catch(Exception e) {\n\tthrow GamaRuntimeException.error("informative message", scope);\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"debug",children:"Debug"}),"\n",(0,s.jsxs)(n.p,{children:["Main class for debug is in ummisco.gama.dev.utils : ",(0,s.jsx)(n.a,{href:"https://github.com/gama-platform/gama.old/tree/GAMA_1.9.2/ummisco.gama.annotations/src/ummisco/gama/dev/utils",children:"DEBUG"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To turn GAMA Git version to debug mode change variable of the Debug class like: ",(0,s.jsx)(n.code,{children:"GLOBAL_OFF = false"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Turn on or off the debug for one class: ",(0,s.jsx)(n.code,{children:"DEBUG.ON()"})," or ",(0,s.jsx)(n.code,{children:"DEBUG.OFF()"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["You can benchmark a method call using : ",(0,s.jsx)(n.code,{children:'DEBUG.TIME("Title to log", () -> methodToBenchmark(...))'})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["You can use different built-in level to print: ",(0,s.jsx)(n.code,{children:"DEBUG.ERR(string s)"})," ",(0,s.jsx)(n.code,{children:"DEBUG.LOG(string s)"})," ",(0,s.jsx)(n.code,{children:"DEBUG.OUT(Object message)"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"test",children:"Test"}),"\n",(0,s.jsx)(n.p,{children:"There are Gaml primitives and statement to define test:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'test "Operator + (1)" {\n\tassert (circle(5) + 5).height with_precision 1 = 20.0;\n\tassert (circle(5) + 5).location with_precision 9 = (circle(10)).location with_precision 9;\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Everything can be made using Java Annotation (translated to Gaml test) :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'examples = { @example (value="...",equals="..." )  }\ntest = { "..." } // don\'t forget to turn test arg of examples to false\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"core",children:"Core"}),"\n",(0,s.jsx)(n.p,{children:"The main plugin of the GAMA Platform that defines the core functionalities: most Gaml operators, statements, skills, types, etc."}),"\n",(0,s.jsx)(n.h3,{id:"metamodel",children:"Metamodel"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"IAgent"}),", ",(0,s.jsx)(n.code,{children:"IPopulation"}),", ",(0,s.jsx)(n.code,{children:"IShape"}),", ",(0,s.jsx)(n.code,{children:"ITopology"}),","]}),"\n",(0,s.jsx)(n.h3,{id:"ouputs",children:"Ouputs"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"util",children:"Util"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Randomness in Gama: ",(0,s.jsx)(n.a,{href:"https://github.com/gama-platform/gama.old/tree/GAMA_1.9.2/msi.gama.core/src/msi/gama/util/random",children:"msi.gama.util.random"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"GamaRND is the main class that implements Random java class. It has several implementations and is mainly used with RandomUtils that define all the Gaml random operators"}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Graph in Gama:"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"File in Gama:"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"operators-1",children:"Operators"}),"\n",(0,s.jsx)(n.p,{children:"The packages where you can find all the operators defined in the core of Gama"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var a=t(96540);const s={},i=a.createContext(s);function r(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);