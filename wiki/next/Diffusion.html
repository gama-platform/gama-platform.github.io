<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Implementing diffusion · GAMA-Platform</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="[//]: # (startConcept|diffusion)"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Implementing diffusion · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gama-platform.org/"/><meta property="og:description" content="[//]: # (startConcept|diffusion)"/><meta property="og:image" content="https://gama-platform.org//resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://gama-platform.org//resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/img/gama-logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://gama-platform.org/blog/atom.xml" title="GAMA-Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://gama-platform.org/blog/feed.xml" title="GAMA-Platform Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.4.4/fuse.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/searchEngine.js"></script><script type="text/javascript" src="/js/dark.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/gama-logo.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/wiki/next/Home" target="_self">Documentation</a></li><li class=""><a href="/wiki/next/Tutorials" target="_self">Tutorials</a></li><li class=""><a href="/download" target="_self">Download</a></li><li class=""><a href="/wiki/next/Contribute" target="_self">Contribute</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/faq" target="_self">FAQ</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recipes</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Home<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/Home">GAMA</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/Overview">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Platform<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/PlatformDocumentation">Platform</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/InstallationAndLaunching">Installation and Launching</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Installation</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/Installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Launching">Launching GAMA</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Headless">Headless Mode</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Updating">Updating GAMA</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/InstallingPlugins">Installing Plugins</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Troubleshooting">Troubleshooting</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/next/WorkspaceProjectsAndModels">Workspace, Projects and Models</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Navigating in the Workspace</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/NavigatingWorkspace">Navigating in the Workspace</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ChangingWorkspace">Changing Workspace</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ImportingModels">Importing Models</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/next/EditingModels">Editing models</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GAML Editor (Generalities)</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/GamlEditorGeneralities">The GAML Editor - Generalities</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/GamlEditorToolbar">GAML Editor tools</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ValidationOfModels">Validation of Models</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/next/RunningExperiments">Running Experiments</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Launching Experiments</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/LaunchingExperiments">Launching Experiments from the User Interface</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ExperimentsUserInterface">Experiments User Interface</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/MenusAndCommands">Controls of experiments</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ParametersView">Parameters View</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/InspectorsAndMonitors">Inspectors and monitors</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Displays">Displays</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BatchSpecific">Batch Specific UI</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ErrorsView">Errors View</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/next/Preferences">Preferences</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Learn GAML step by step<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/LearnGAMLStepByStep">Learn GAML Step by Step</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Introduction</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/Introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/StartWithGAML">Start with GAML</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ModelOrganization">Organization of a model</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BasicProgrammingConceptsInGAML">Basic programming concepts in GAML</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/next/ManipulateBasicSpecies">Manipulate basic species</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Global Species</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/GlobalSpecies">The global species</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RegularSpecies">Regular species</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningActionsAndBehaviors">Defining actions and behaviors</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/InteractionBetweenAgents">Interaction between agents</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/AttachingSkills">Attaching Skills</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Inheritance">Inheritance</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Defining Advanced Species</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningAdvancedSpecies">Defining advanced species</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/GridSpecies">Grid Species</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/GraphSpecies">Graph Species</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/MirrorSpecies">Mirror species</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/MultiLevelArchitecture">Multi-level architecture</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Defining GUI Experiment</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningGUIExperiment">Defining GUI Experiment</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningParameters">Defining Parameters</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningDisplaysGeneralities">Defining displays (Generalities)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningCharts">Defining Charts</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Defining3DDisplays">Defining 3D Displays</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningMonitorsAndInspectors">Defining monitors and inspectors</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningExportFiles">Defining export files</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DefiningUserInteraction">Defining user interaction</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Exploring Models</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/ExploringModels">Exploring Models</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RunSeveralSimulations">Run Several Simulations</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BatchExperiments">Defining Batch Experiments</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ExplorationMethods">Exploration Methods</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Optimizing Model Section</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/OptimizingModelsSection">Optimizing Models</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/RuntimeConcepts">Runtime Concepts</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/OptimizingModels">Optimizing Models</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Multi-Paradigm Modeling</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/MultiParadigmModeling">Multi-Paradigm Modeling</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ControlArchitecture">Control Architectures</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Equations">Using Equations</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Recipes<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/Recipes">Recipes</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ManipulateOSMDatas">Manipulate OSM Datas</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/wiki/next/Diffusion">Implementing diffusion</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/UsingDatabase">Using Database Access</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/CallingR">Calling R</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/UsingFIPAACL">Using FIPA ACL</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/GamAnalyzer">Using GAMAnalyzer</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Using-BEN-simple-bdi">Using BEN (simple_bdi)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/UsingDrivingSkill">Advanced Driving Skill</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ManipulateDates">Manipulate Dates</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ManipulateLight">Implementing light</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Comodel">Using Comodel</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Save-and-restore-simulations">Save and Restore simulations</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/UsingNetwork">Using network</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Headless-mode-for-dummies">Editing Headless mode for dummies</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/G__GraphicalEditor">The Graphical Editor</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Using_Git">Using Git from GAMA to version and share models</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Writing_Tests">Writing Unit Tests in GAML</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/KnownIssues">Known issues</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">GAML References<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/GamlReference">GAML References</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Built-in Species</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/BuiltInSpecies">Built-in Species</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/AgentBuiltIn">The &#x27;agent&#x27; built-in species (Under Construction)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ModelBuiltIn">The &#x27;model&#x27; built-in species (Under Construction)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/ExperimentBuiltIn">The &#x27;experiment&#x27; built-in species (Under Construction)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/next/BuiltInSkills">Built-in Skills</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/BuiltInArchitectures">Built-in Architectures</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Statements">Statements</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DataTypes">Types</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/FileTypes">File Types</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Expressions</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/Expressions">Expressions</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Literals">Literals</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/UnitsAndConstants">Units and constants</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/PseudoVariables">Pseudo-variables</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/VariablesAndAttributes">Variables and Attributes</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/OperatorsAA">Operators (A to A)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/OperatorsBC">Operators (B to C)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/OperatorsDH">Operators (D to H)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/OperatorsIM">Operators (I to M)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/OperatorsNR">Operators (N to R)</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/OperatorsSZ">Operators (S to Z)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/next/Index">Exhaustive list of GAMA Keywords</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Pedagogical materials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/Pedagogical-Materials">Some pedagogical materials</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Extensions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/Extensions">Extensions</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Developing Extensions</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingExtensions">Developing Extensions</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/InstallingGitVersion">Installing the GIT version</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/GamaArchitecture">Architecture of GAMA</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingPlugins">Developing Plugins</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingSkills">Developing Skills</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingStatements">Developing Statements</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingOperators">Developing Operators</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingTypes">Developing Types</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingSpecies">Developing Species</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingControlArchitectures">Developing architecture</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingIndexAnnotations">Index of annotations</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Developing GAMA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/developingGAMA">Get into the GAMA Java API</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Introduction-To-Gama-Java-API">Introduction to GAMA Java API</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/DevelopingIScope">IScope interface</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/CreatingAReleaseOfGama">Product your own release of GAMA</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Documentation">Documentation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Scientific References<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/References">References</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Projects using GAMA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/Projects">Projects</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Training Session<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/TrainingSession">Training Session</a></li><li class="navListItem"><a class="navItem" href="/wiki/next/Event__CC15_Reorganization">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Events<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/Events">References</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Older versions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/next/OlderVersions">Versions of GAMA</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Implementing diffusion</h1></header><article><div><span><p>GAMA provides you the possibility to represent and simulate the diffusion of a variable through a grid topology.</p>
<h2><a class="anchor" aria-hidden="true" id="index"></a><a href="#index" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Index</h2>
<ul>
<li><a href="#diffuse-statement">Diffuse statement</a></li>
<li><a href="#diffusion-with-matrix">Diffusion with matrix</a>
<ul>
<li><a href="#diffusion-matrix">Diffusion matrix</a></li>
<li><a href="#gradient-matrix">Gradient matrix</a></li>
<li><a href="#compute-multiple-propagations-at-the-same-step">Compute multiple propagations at the same step</a></li>
<li><a href="#execution-several-diffusion-matrix">Executing several diffusion matrix</a></li>
</ul></li>
<li><a href="#diffusion-with-parameters">Diffusion with parameters</a></li>
<li><a href="#computation-methods">Computation methods</a>
<ul>
<li><a href="#convolution">Convolution</a></li>
<li><a href="#dot-product">Dot Product</a></li>
</ul></li>
<li><a href="#using-mask">Use mask</a>
<ul>
<li><a href="#generalities">Generalities</a></li>
<li><a href="#tips">Tips</a></li>
</ul></li>
<li><a href="#pseudo-code">Pseudo code</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="diffuse-statement"></a><a href="#diffuse-statement" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Diffuse statement</h2>
<p>The statement to use for the diffusion is <code>diffuse</code>. It has to be used in a <code>grid</code> species. The <code>diffuse</code> uses the following facets:</p>
<ul>
<li><strong><code>var</code></strong> (an identifier), (omissible) : the variable to be diffused</li>
<li><strong><code>on</code></strong> (any type in [container, species]): the list of agents (in general cells of a grid), on which the diffusion will occur</li>
<li><code>avoid_mask</code> (boolean): if true, the value will not be diffused in the masked cells, but will be restituted to the neighboring cells, multiplied by the variation value (no signal loss). If false, the value will be diffused in the masked cells, but masked cells won't diffuse the value afterward (loss of signal). (default value : false)</li>
<li><code>cycle_length</code> (int): the number of diffusion operation applied in one simulation step</li>
<li><code>mask</code> (matrix): a matrix masking the diffusion (matrix created from an image for example). The cells corresponding to the values smaller than &quot;-1&quot; in the mask matrix will not diffuse, and the other will diffuse.</li>
<li><code>matrix</code> (matrix): the diffusion matrix (&quot;kernel&quot; or &quot;filter&quot; in image processing). Can have any size, as long as dimensions are odd values.</li>
<li><code>method</code> (an identifier), takes values in: {convolution, dot_product}: the diffusion method</li>
<li><code>min_value</code> (float): if a value is smaller than this value, it will not be diffused. By default, this value is equal to 0.0. This value cannot be smaller than 0.</li>
<li><code>propagation</code> (a label), takes values in {diffusion, gradient} represents both the way the signal is propagated and the way to treat multiple propagations of the same signal occurring at once from different places. If propagation equals 'diffusion', the intensity of a signal is shared between its neighbors with respect to 'proportion', 'variation' and the number of neighbors of the environment places (4, 6 or 8). I.e., for a given signal S propagated from place P, the value transmitted to its N neighbors is S' = (S / N / proportion) - variation. The intensity of S is then diminished by S <code>*</code> proportion on P. In diffusion, the different signals of the same name see their intensities added to each other on each place. If propagation equals 'gradient', the original intensity is not modified, and each neighbor receives the intensity: S / proportion - variation. If multiple propagations occur at once, only the maximum intensity is kept on each place. If 'propagation' is not defined, it is assumed that it is equal to 'diffusion'.</li>
<li><code>proportion</code> (float): a diffusion rate</li>
<li><code>radius</code> (int): a diffusion radius (in number of cells from the center)</li>
<li><code>variation</code> (float): an absolute value to decrease at each neighbor</li>
</ul>
<p>To write a diffusion, you first have to declare a grid and declare a special attribute for the diffusion. You will then have to write the <code>diffuse</code> statement in another scope (such as the <code>global</code> scope for instance), which will permit the values to be diffused at each step. There, you will specify which variable you want to diffuse (through the <strong><code>var</code></strong> facet), on which species or list of agents you want the diffusion (through the <strong><code>on</code></strong> facet), and how you want this value to be diffused (through all the other facets, we will see how it works <a href="#diffusion-with-matrix">with matrix</a> and <a href="#diffusion-with-parameters">with special parameters</a> just after).</p>
<p>Here is the template of code we will use for the next following part of this page:</p>
<pre><code class="hljs">global {
    <span class="hljs-literal">int</span> size &lt;- 64; <span class="hljs-comment">// the size has to be a power of 2.</span>
    cells selected_cells;

    <span class="hljs-comment">// Initialize the emitter cell as the cell at the center of the word</span>
    init {
    selected_cells &lt;- location as cells;
    }
    <span class="hljs-comment">// Affecting "1" to each step</span>
    <span class="hljs-builtin">reflex</span> new_Value {
    <span class="hljs-keyword">ask</span>(selected_cells){
        phero &lt;- 1.0;
    }   
    }

    <span class="hljs-builtin">reflex</span> diff {
    <span class="hljs-comment">// Declare a diffusion on the grid "cells" and on "quick_cells". </span>
        <span class="hljs-comment">// The diffusion declared on "quick_cells" will make 10 computations at each step to accelerate the process. </span>
    <span class="hljs-comment">// The value of the diffusion will be store in the new variable "phero" of the cell.</span>
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> cells <span class="hljs-comment">/*HERE WRITE DOWN THE DIFFUSION PROPERTIES*/</span>;          
    }
}

grid cells <span class="hljs-symbol">height:</span> size <span class="hljs-symbol">width:</span> size {
    <span class="hljs-comment">// "phero" is the variable storing the value of the diffusion</span>
    <span class="hljs-literal">float</span> phero  &lt;- 0.0;
    <span class="hljs-comment">// The color of the cell is linked to the value of "phero".</span>
    <span class="hljs-literal">rgb</span> color &lt;- hsb(phero,1.0,1.0) <span class="hljs-symbol">update:</span> hsb(phero,1.0,1.0);
}

<span class="hljs-builtin">experiment</span> diffusion <span class="hljs-symbol">type:</span> gui {
    <span class="hljs-keyword">output</span> {
    <span class="hljs-keyword">display</span> a <span class="hljs-symbol">type:</span> opengl {
        <span class="hljs-comment">// Display the grid with elevation</span>
        grid cells <span class="hljs-symbol">elevation:</span> phero * 10 <span class="hljs-symbol">triangulation:</span> true;
    }
    }
}
</code></pre>
<p>This model will simulate a diffusion through a grid at each step, affecting 1 to the center cell diffusing variable value. The diffusion will be seen during the simulation through a color code, and through the elevation of the cell.</p>
<h2><a class="anchor" aria-hidden="true" id="diffusion-with-matrix"></a><a href="#diffusion-with-matrix" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Diffusion with matrix</h2>
<p>A first way of specifying the behavior of your diffusion is using diffusion matrix. A diffusion matrix is a 2-dimension matrix <code>[n][m]</code> with <code>float</code> values, where both <code>n</code> and <code>m</code> have to be <strong>odd values</strong>. The most often, diffusion matrices are square matrices, but you can also declare a rectangular matrix.</p>
<p>Example of matrix:</p>
<pre><code class="hljs"><span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_diff &lt;- <span class="hljs-literal">matrix</span>([
        [1/9,1/9,1/9],
        [1/9,1/9,1/9],
        [1/9,1/9,1/9]]);
</code></pre>
<p>In the <code>diffuse</code> statement, you then have to specify the matrix of diffusion you want in the facet <code>matrix</code>.</p>
<pre><code class="hljs"><span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> cells <span class="hljs-symbol">matrix:</span>mat_diff;
</code></pre>
<p>Using the facet <code>propagation</code>, you can specify if you want the value to be propagated as a <em>diffusion</em> or as a <em>gradient</em>.</p>
<h3><a class="anchor" aria-hidden="true" id="diffusion-matrix"></a><a href="#diffusion-matrix" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Diffusion matrix</h3>
<p>A <em>diffusion</em> (the default value of the facet <code>propagation</code>) will spread the values to the neighbors' cells according to the diffusion matrix, and all those values will be added together, as it is the case in the following example:</p>
<p><img src="/resources/images/recipes/diffusion_computation.png" alt="Illustration of the computation under a diffusion propagation."></p>
<p>Note that the sum of all the values diffused at the next step is equal to the sum of the values that will be diffused multiply by the sum of the values of the diffusion matrix. That means that if the sum of the values of your diffusion matrix is larger than 1, the values will increase exponentially at each step. The sum of the value of a diffusion matrix is usually equal to 1.</p>
<p>Here are some matrix examples you can use, played with the template model:</p>
<p><img src="/resources/images/recipes/uniform_diffusion.png" alt="Examples of uniform diffusions with one and several sources."></p>
<p><img src="/resources/images/recipes/anisotropic_diffusion.png" alt="Examples of anisotropic diffusions (with and with torus environment)."></p>
<h3><a class="anchor" aria-hidden="true" id="gradient-matrix"></a><a href="#gradient-matrix" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Gradient matrix</h3>
<p>A <code>gradient</code> (use facet : <code>propagation:gradient</code>) is another type of propagation. This time, only the larger value diffused will be chosen as the new one.</p>
<p><img src="/resources/images/recipes/gradient_computation.png" alt="Illustration of the computation under a gradient propagation."></p>
<p>Note that unlike the <em>diffusion</em> propagation, the sum of your matrix can be greater than 1 (and it is the case, most often !).</p>
<p>Here are some matrix examples with gradient propagation:</p>
<p><img src="/resources/images/recipes/uniform_gradient.png" alt="Examples of gradient diffusions with one and several sources."></p>
<p><img src="/resources/images/recipes/irregular_gradient.png" alt="Examples of irregular gradient diffusions."></p>
<h3><a class="anchor" aria-hidden="true" id="compute-multiple-propagations-at-the-same-step"></a><a href="#compute-multiple-propagations-at-the-same-step" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compute multiple propagations at the same step</h3>
<p>You can compute several times the propagation you want by using the facet <code>cycle_length</code>. GAMA will compute for you the corresponding new matrix and will apply it.</p>
<p><img src="/resources/images/recipes/cycle_length.png" alt="Example of computation with a cycle length of 2."></p>
<p>Writing those two things are exactly equivalent (for diffusion):</p>
<pre><code class="hljs"><span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_diff &lt;- <span class="hljs-literal">matrix</span>([
        [1/81,2/81,3/81,2/81,1/81],
        [2/81,4/81,6/81,4/81,2/81],
        [3/81,6/81,1/9,6/81,3/81],
        [2/81,4/81,6/81,4/81,2/81],
        [1/81,2/81,3/81,2/81,1/81]]);
<span class="hljs-builtin">reflex</span> diff {
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> cells <span class="hljs-symbol">matrix:</span>mat_diff;
</code></pre>
<p>and</p>
<pre><code class="hljs"><span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_diff &lt;- <span class="hljs-literal">matrix</span>([
        [1/9,1/9,1/9],
        [1/9,1/9,1/9],
        [1/9,1/9,1/9]]);
<span class="hljs-builtin">reflex</span> diff {
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> cells <span class="hljs-symbol">matrix:</span>mat_diff <span class="hljs-symbol">cycle_length:</span>2;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="executing-several-diffusion-matrix"></a><a href="#executing-several-diffusion-matrix" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Executing several diffusion matrix</h3>
<p>If you execute several times the statement <code>diffuse</code> with different matrix on the same variable, their values will be added (and centered if their dimensions are not equal).</p>
<p>Thus, the following 3 matrices will be combined to create one unique matrix:</p>
<p><img src="/resources/images/recipes/addition_matrix.png" alt="Example of matrix combinations."></p>
<h2><a class="anchor" aria-hidden="true" id="diffusion-with-parameters"></a><a href="#diffusion-with-parameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Diffusion with parameters</h2>
<p>Sometimes writing diffusion matrix is not exactly what you want, and you may prefer to just give some parameters to compute the correct diffusion matrix. You can use the following facets in order to do that: <code>propagation</code>, <code>variation</code> and <code>radius</code>.</p>
<p>Depending on which <code>propagation</code> you choose, and how many neighbors your grid has, the propagation matrix will be computed differently. The propagation matrix will have the size: range*2+1.</p>
<p>Let's note <strong>P</strong> for the propagation value, <strong>V</strong> for the variation, <strong>R</strong> for the range and <strong>N</strong> for the number of neighbors.</p>
<ul>
<li><strong>With diffusion propagation</strong></li>
</ul>
<p>For diffusion propagation, we compute following the following steps:</p>
<p>(1) We determine the &quot;minimale&quot; matrix according to N (if N = 8, the matrix will be <code>[[P/9,P/9,P/9][P/9,1/9,P/9][P/9,P/9,P/9]]</code>. if N = 4, the matrix will be <code>[[0,P/5,0][P/5,1/5,P/5][0,P/5,0]]</code>).</p>
<p>(2) If R != 1, we propagate the matrix R times to obtain a <code>[2*R+1][2*R+1]</code> matrix (same computation as for <code>cycle_length</code>).</p>
<p>(3) If V != 0, we substract each value by V*DistanceFromCenter (DistanceFromCenter depends on N).</p>
<p>Ex with the default values (P=1, R=1, V=0, N=8):</p>
<ul>
<li><strong>With gradient propagation</strong></li>
</ul>
<p>The value of each cell will be equal to <em><em>P/POW(N,DistanceFromCenter)-DistanceFromCenter</em>V</em>*. (DistanceFromCenter depends on N).</p>
<p>Ex with R=2, other parameters default values (R=2, P=1, V=0, N=8):</p>
<p><img src="/resources/images/recipes/gradient_computation_from_parameters.png" alt="resources/images/recipes/gradient_computation_from_parameters.png"></p>
<p>Note that if you declared a diffusion matrix, you cannot use those 3 facets (it will raise a warning). Note also that if you use parameters, you will only have a uniform matrix.</p>
<h2><a class="anchor" aria-hidden="true" id="computation-methods"></a><a href="#computation-methods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Computation methods</h2>
<p>You can compute the output matrix using two computation methods by using the facet <code>method</code> : the dot product and the convolution. Note that the result of those two methods is exactly the same (except if you use the <code>avoid_mask</code> facet, the results can be slightly different between the two computations).</p>
<h3><a class="anchor" aria-hidden="true" id="convolution"></a><a href="#convolution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Convolution</h3>
<p><code>convolution</code> is the default computation method for diffusion. For every output cells, we will multiply the input values and the flipped kernel together, as shown in the following image :</p>
<p><img src="/resources/images/recipes/convolution.png" alt="Illustration of convolution product computation."></p>
<p>Pseudo-code (<code>k</code> the kernel, <code>x</code> the input matrix, <code>y</code> the output matrix) :</p>
<pre><code class="hljs">for (i = 0 ; i &lt; y.nbRows ; i++)
  for (j = 0 ; j &lt; y.nbCols ; j++)
    for (m = 0 ; m &lt; k.nbRows ; m++)
      for (n = 0 ; n &lt; k.nbCols ; n++)
        y[i,j] += k[k.nbRows - m - 1, k.nbCols - n - 1] 
            * x[i - k.nbRows/2 + m, j - k.nbCols/2 + n]
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dot-product"></a><a href="#dot-product" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dot Product</h3>
<p><code>dot_product</code> method will compute the matrix using a simple dot product between the matrix. For every input cells, we multiply the cell by the kernel matrix, as shown in the following image :</p>
<p><img src="/resources/images/recipes/dot_product.png" alt="Illustration of dat product computation."></p>
<p>Pseudo-code (<code>k</code> the kernel, <code>x</code> the input matrix, <code>y</code> the output matrix) :</p>
<pre><code class="hljs">for (i = 0 ; i &lt; y.nbRows ; i++)
  for (j = 0 ; j &lt; y.nbCols ; j++)
    for (m = 0 ; m &lt; k.nbRows ; m++)
      for (n = 0 ; n &lt; k.nbCols ; n++)
        y[i - k.nbRows/2 + m, j - k.nbCols/2 + n] += k[m, n] * x[i, j]
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="using-a-mask"></a><a href="#using-a-mask" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using a mask</h2>
<h3><a class="anchor" aria-hidden="true" id="generalities"></a><a href="#generalities" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generalities</h3>
<p>If you want to propagate some values in a heterogeneous grid, you can use some mask to forbid some cells to propagate their values.</p>
<p>You can pass a matrix to the facet <code>mask</code>. All the values smaller than <code>-1</code> will not propagate, and all the values greater or equal to <code>-1</code> will propagate.</p>
<p>A simple way to use mask is by loading an image :</p>
<p><img src="/resources/images/recipes/simple_mask.png" alt="Use of a mask to constrain the diffusion."></p>
<p>Note that when you use the <code>on</code> facet for the <code>diffuse</code> statement, you can choose only some cells, and not every cell. In fact, when you restrain the values to be diffuse, it is exactly the same process as if you were defining a mask.</p>
<p><img src="/resources/images/recipes/mask_with_on_facet.png" alt="Constraint on the diffusion using filtering on cells."></p>
<p>When your diffusion is combined with a mask, the default behavior is that the non-masked cells will diffuse their values in <strong>all</strong> existing cells (that means, even the masked cells !). To change this behavior, you can use the facet <code>avoid_mask</code>. In that case, the value which was supposed to be affected to the masked cell will be redistributed to the neighboring non-masked cells.</p>
<h3><a class="anchor" aria-hidden="true" id="tips"></a><a href="#tips" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips</h3>
<p>Masks can be used to simulate a lot of environments. Here are some ideas for your models:</p>
<h4><a class="anchor" aria-hidden="true" id="wall-blocking-the-diffusion"></a><a href="#wall-blocking-the-diffusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wall blocking the diffusion</h4>
<p>If you want to simulate a wall blocking a uniform diffusion, you can declare a second diffusion matrix that will be applied only on the cells where your wall will be. This diffusion matrix will &quot;push&quot; the values outside from himself, but conserving the values (the sum of the values of the diffusion still have to be equal to 1) :</p>
<pre><code class="hljs"><span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_diff &lt;- <span class="hljs-literal">matrix</span>([
            [1/9,1/9,1/9],
            [1/9,1/9,1/9],
            [1/9,1/9,1/9]]);
                                
<span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_diff_left_wall &lt;- <span class="hljs-literal">matrix</span>([
            [0.0,0.0,2/9],
            [0.0,0.0,4/9],
            [0.0,0.0,2/9]]);

<span class="hljs-builtin">reflex</span> diff { 
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> (cells where(each.grid_x&gt;30)) <span class="hljs-symbol">matrix:</span>mat_diff;
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> (cells where(each.grid_x=30)) <span class="hljs-symbol">matrix:</span>mat_diff_left_wall;
}
</code></pre>
<p><img src="/resources/images/recipes/wall_simulation.png" alt="Diffusion limited by a wall, using a mask."></p>
<p>Note that almost the same result can be obtained by using the facet <code>avoid_mask</code>: the value of all masked cells will remain at 0, and the value which was supposed to be affected to the masked cell will be distributed to the neighboring cells. Notice that the results can be slightly different if you are using the <code>convolution</code> or the <code>dot_product</code> method: the algorithm of redistribution of the value to the neighboring cells is a bit different. We advise you to use the <code>dot_product</code> with the <code>avoid_mask</code> facet, the results are more accurate.</p>
<h4><a class="anchor" aria-hidden="true" id="wind-pushing-the-diffusion"></a><a href="#wind-pushing-the-diffusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wind pushing the diffusion</h4>
<p>Let's simulate a uniform diffusion that is pushed by a wind from &quot;north&quot; everywhere in the grid. A wind from &quot;west&quot; as blowing at the top side of the grid. We will here have to build 2 matrices: one for the uniform diffusion, one for the &quot;north&quot; wind and one for the &quot;west&quot; wind. The sum of the values for the 2 matrices meant to simulate the wind will be equal to 0 (as it will be added to the diffusion matrix).</p>
<pre><code class="hljs"><span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_diff &lt;- <span class="hljs-literal">matrix</span>([
        [1/9,1/9,1/9],
        [1/9,1/9,1/9],
        [1/9,1/9,1/9]]);
                                
<span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_wind_from_west &lt;- <span class="hljs-literal">matrix</span>([
        [-1/9,0.0,1/9],
        [-1/9,0.0,1/9],
        [-1/9,0.0,1/9]]);
                                
<span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_wind_from_north &lt;- <span class="hljs-literal">matrix</span>([
        [-1/9,-1/9,-1/9],
        [0.0,0.0,0.0],
        [1/9,1/9,1/9]]);

<span class="hljs-builtin">reflex</span> diff { 
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> cells <span class="hljs-symbol">matrix:</span>mat_diff;
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> cells <span class="hljs-symbol">matrix:</span>mat_wind_from_north;
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> (cells where (each.grid_y&gt;=32)) <span class="hljs-symbol">matrix:</span>mat_wind_from_west;
}
</code></pre>
<p><img src="/resources/images/recipes/diffusion_with_wind.png" alt="Diffusion impacted with a wind."></p>
<h4><a class="anchor" aria-hidden="true" id="endless-world"></a><a href="#endless-world" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Endless world</h4>
<p>Note that when your world is not a torus, it has the same effect as a <em>mask</em>, since all the values outside from the world cannot diffuse some values back :</p>
<p><img src="/resources/images/recipes/uniform_diffusion_near_edge.png" alt="Comparison of diffusion with and without torus environment."></p>
<p>You can &quot;fake&quot; the fact that your world is endless by adding a different diffusion for the cells with <code>grid_x=0</code> to have almost the same result :</p>
<p><img src="/resources/images/recipes/uniform_diffusion_near_edge_with_mask.png" alt="Attempt to fake torus environment with different matrices."></p>
<pre><code class="hljs"><span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_diff &lt;- <span class="hljs-literal">matrix</span>([
            [1/9,1/9,1/9],
            [1/9,1/9,1/9],
            [1/9,1/9,1/9]]);
                                
<span class="hljs-literal">matrix</span>&lt;<span class="hljs-literal">float</span>&gt; mat_diff_upper_edge &lt;- <span class="hljs-literal">matrix</span>([
            [0.0,0.0,0.0],
            [1/9+7/81,2/9+1/81,1/9+7/81],
            [1/9,1/9,1/9]]);

<span class="hljs-builtin">reflex</span> diff { 
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> (cells where(each.grid_y&gt;0)) <span class="hljs-symbol">matrix:</span>mat_diff;
    <span class="hljs-keyword">diffuse</span> <span class="hljs-symbol">var:</span> phero <span class="hljs-symbol">on:</span> (cells where(each.grid_y=0)) <span class="hljs-symbol">matrix:</span>mat_diff_upper_edge;
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="pseudo-code"></a><a href="#pseudo-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pseudo-code</h2>
<p><em>This section is more for a better understanding of the source code.</em></p>
<p>Here is the pseudo-code for the computation of diffusion :</p>
<ol>
<li>: Execute the statement <code>diffuse</code>, store the diffusions in a map (from class <em>DiffusionStatement</em> to class <em>GridDiffuser</em>) :</li>
</ol>
<pre><code class="hljs">- Get all the facet values
- Compute the <span class="hljs-string">"real"</span> mask, from the facet <span class="hljs-string">"mask:"</span> and the facet <span class="hljs-string">"on:"</span>.
  - If no value for <span class="hljs-string">"mask:"</span> and <span class="hljs-string">"on:"</span> all the grid, the mask is equal to null.
- Compute the <span class="hljs-literal">matrix</span> of diffusion
  - If no value for <span class="hljs-string">"matrix:"</span>, compute with <span class="hljs-string">"nb_neighbors"</span>, <span class="hljs-string">"is_gradient"</span>, <span class="hljs-string">"proportion"</span>, <span class="hljs-string">"propagation"</span>, <span class="hljs-string">"variation"</span>, <span class="hljs-string">"range"</span>.
  - Then, compute the <span class="hljs-literal">matrix</span> of diffusion with <span class="hljs-string">"cycle_length"</span>.
- Store the diffusion properties in a <span class="hljs-literal">map</span>
  - Map : [<span class="hljs-string">"method_diffu"</span>, <span class="hljs-string">"is_gradient"</span>, <span class="hljs-string">"matrix"</span>, <span class="hljs-string">"mask"</span>, <span class="hljs-string">"min_value"</span>] is value, [<span class="hljs-string">"var_diffu"</span>, <span class="hljs-string">"grid_name"</span>] is key.
  - If the key exists in the <span class="hljs-literal">map</span>, <span class="hljs-keyword">try</span> to <span class="hljs-string">"mix"</span> the diffusions
    - If <span class="hljs-string">"method_diffu"</span>, <span class="hljs-string">"mask"</span> and <span class="hljs-string">"is_gradient"</span> equal for the 2 diffusions, mix the diffusion <span class="hljs-literal">matrix</span>.
</code></pre>
<ol start="2">
<li>: At the end of the step, execute the diffusions (class <em>GridDiffuser</em>) :</li>
</ol>
<pre><code class="hljs">- For each key of the <span class="hljs-literal">map</span>,
  - Load the couple <span class="hljs-string">"var_diffu"</span> / <span class="hljs-string">"grid_name"</span>
  - Build the <span class="hljs-string">"output"</span> and <span class="hljs-string">"input"</span> array with the dimension of the grid. 
  - Initialize the <span class="hljs-string">"output"</span> array with -Double.MAX_VALUE.
  - For each value of the <span class="hljs-literal">map</span> for that key,
    - Load all the properties : <span class="hljs-string">"method_diffu"</span>, <span class="hljs-string">"is_gradient"</span>, <span class="hljs-string">"matrix"</span>, <span class="hljs-string">"mask"</span>, <span class="hljs-string">"min_value"</span>
    - Compute :
      - If the cell is not masked, <span class="hljs-keyword">if</span> the value of input is &gt; min_value, <span class="hljs-keyword">diffuse</span> to the neighbors.
        - If the value of the cell is equal to -Double.MAX_VALUE, remplace it by input[idx] * matDiffu[i][j].
        - Else, <span class="hljs-keyword">do</span> the computation (gradient or diffusion).
    - Finish the diffusion :
      - If <span class="hljs-keyword">output</span>[idx] &gt; -Double.MAX_VALUE, <span class="hljs-keyword">write</span> the new value in the cell.
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/wiki/next/ManipulateOSMDatas"><span class="arrow-prev">← </span><span>Manipulate OSM Datas</span></a><a class="docs-next button" href="/wiki/next/UsingDatabase"><span>Using Database Access</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#index">Index</a></li><li><a href="#diffuse-statement">Diffuse statement</a></li><li><a href="#diffusion-with-matrix">Diffusion with matrix</a><ul class="toc-headings"><li><a href="#diffusion-matrix">Diffusion matrix</a></li><li><a href="#gradient-matrix">Gradient matrix</a></li><li><a href="#compute-multiple-propagations-at-the-same-step">Compute multiple propagations at the same step</a></li><li><a href="#executing-several-diffusion-matrix">Executing several diffusion matrix</a></li></ul></li><li><a href="#diffusion-with-parameters">Diffusion with parameters</a></li><li><a href="#computation-methods">Computation methods</a><ul class="toc-headings"><li><a href="#convolution">Convolution</a></li><li><a href="#dot-product">Dot Product</a></li></ul></li><li><a href="#using-a-mask">Using a mask</a><ul class="toc-headings"><li><a href="#generalities">Generalities</a></li><li><a href="#tips">Tips</a></li></ul></li><li><a href="#pseudo-code">Pseudo-code</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap" style="margin-bottom:0"><a href="/" class="nav-home"><img src="/img/gama-logo.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Networks</h5><a href="https://github.com/gama-platform"><i class="fab fa-github"></i> GitHub</a><a href="https://www.facebook.com/GamaPlatform/" target="_blank"><i class="fab fa-facebook"></i> Facebook</a><a href="https://twitter.com/gamaplatform" target="_blank"><i class="fab fa-twitter"></i> Twitter</a><a href="https://www.linkedin.com/company/gama-platform" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a><a href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank"><i class="fab fa-youtube"></i> Youtube</a><a href="https://gama-platform.github.io/blog/feed" target="_blank"><i class="fa fa-rss"></i> Blog RSS</a></div><div style="flex-grow:2"><h5>Mailing list</h5><a href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br/>gama-platform@googlegroups.com</a><a href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br/>gama-dev@googlegroups.com</a></div><div style="color:hsla(0,0%,100%,.4);flex-grow:3"><h5>License</h5><p>Copyright (C) - 2022 GAMA-Platform.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.</p><p>A copy of the license is included <a href="https://github.com/gama-platform/gama/wiki/LICENSE.md" style="display:initial">here</a>, in the repository of the wiki content.</p></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.fbAsyncInit = function() {FB.init({appId:'524881055001796',xfbml:true,version:'v2.7'});};(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = '//connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js, fjs);}(document, 'script','facebook-jssdk'));
                </script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'undefined',
                inputSelector: '#search_input_react'
              });
            </script></body></html>