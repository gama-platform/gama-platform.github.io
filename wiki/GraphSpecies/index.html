<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Graph Species · GAMA-Platform</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="GAMA"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Graph Species · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gama-platform.github.io/"/><meta property="og:description" content="GAMA"/><meta property="og:image" content="https://gama-platform.github.io//resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://gama-platform.github.io//resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/img/gama-logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.4.4/fuse.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/searchEngine.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/gama-logo_white.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/wiki/Home" target="_self">Documentation</a></li><li class=""><a href="/wiki/Tutorials" target="_self">Tutorials</a></li><li class=""><a href="/download" target="_self">Download</a></li><li class=""><a href="/wiki/Contribute" target="_self">Contribute</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Grid Species</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Home<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/Home">Home</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/Overview">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Changes from 1.6.1 to 1.8<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/New-Version-Changes">New-Version-Changes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Platform<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/PlatformDocumentation">Platform</a></li><li class="navListItem"><a class="navItem" href="/wiki/InstallationAndLaunching">Installation and Launching</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Installation</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/Installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/wiki/Launching">Launching GAMA</a></li><li class="navListItem"><a class="navItem" href="/wiki/Headless">Headless Mode</a></li><li class="navListItem"><a class="navItem" href="/wiki/Updating">Updating GAMA</a></li><li class="navListItem"><a class="navItem" href="/wiki/InstallingPlugins">Installing Plugins</a></li><li class="navListItem"><a class="navItem" href="/wiki/Troubleshooting">Troubleshooting</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/WorkspaceProjectsAndModels">Workspace, Projects and Models</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Navigating in the Workspace</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/NavigatingWorkspace">Navigating in the Workspace</a></li><li class="navListItem"><a class="navItem" href="/wiki/ChangingWorkspace">Changing Workspace</a></li><li class="navListItem"><a class="navItem" href="/wiki/ImportingModels">Importing Models</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/EditingModels">Editing models</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GAML Editor (Generalities)</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/GamlEditorGeneralities">The GAML Editor - Generalities</a></li><li class="navListItem"><a class="navItem" href="/wiki/GamlEditorToolbar">The GAML Editor Toolbar</a></li><li class="navListItem"><a class="navItem" href="/wiki/ValidationOfModels">Validation of Models</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/RunningExperiments">Running Experiments</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Launching Experiments</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/LaunchingExperiments">Launching Experiments from the User Interface</a></li><li class="navListItem"><a class="navItem" href="/wiki/ExperimentsUserInterface">Experiments User Interface</a></li><li class="navListItem"><a class="navItem" href="/wiki/MenusAndCommands">Menus and Commands</a></li><li class="navListItem"><a class="navItem" href="/wiki/ParametersView">Parameters View</a></li><li class="navListItem"><a class="navItem" href="/wiki/InspectorsAndMonitors">Inspectors and monitors</a></li><li class="navListItem"><a class="navItem" href="/wiki/Displays">Displays</a></li><li class="navListItem"><a class="navItem" href="/wiki/BatchSpecific">Batch Specific UI</a></li><li class="navListItem"><a class="navItem" href="/wiki/ErrorsView">Errors View</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/Preferences">Preferences</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Learn GAML step by step<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/LearnGAMLStepByStep">Learn GAML Step by Step</a></li><li class="navListItem"><a class="navItem" href="/wiki/Introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/wiki/StartWithGAML">Start with GAML</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Organization of a Model</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/ModelOrganization">Organization of a model</a></li><li class="navListItem"><a class="navItem" href="/wiki/BasicProgrammingConceptsInGAML">Basic programming concepts in GAML</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/ManipulateBasicSpecies">Manipulate basic species</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Global Species</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/GlobalSpecies">The global species</a></li><li class="navListItem"><a class="navItem" href="/wiki/RegularSpecies">Regular species</a></li><li class="navListItem"><a class="navItem" href="/wiki/DefiningActionsAndBehaviors">Defining actions and behaviors</a></li><li class="navListItem"><a class="navItem" href="/wiki/InteractionBetweenAgents">Interaction between agents</a></li><li class="navListItem"><a class="navItem" href="/wiki/AttachingSkills">Attaching Skills</a></li><li class="navListItem"><a class="navItem" href="/wiki/Inheritance">Inheritance</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/DefiningAdvancedSpecies">Defining advanced species</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Grid Species</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/GridSpecies">Grid Species</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/wiki/GraphSpecies">Graph Species</a></li><li class="navListItem"><a class="navItem" href="/wiki/MirrorSpecies">Mirror species</a></li><li class="navListItem"><a class="navItem" href="/wiki/MultiLevelArchitecture">Multi-level architecture</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/DefiningGUIExperiment">Defining GUI Experiment</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Defining Parameters</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/DefiningParameters">Defining Parameters</a></li><li class="navListItem"><a class="navItem" href="/wiki/DefiningDisplaysGeneralities">Defining displays (Generalities)</a></li><li class="navListItem"><a class="navItem" href="/wiki/DefiningCharts">Defining Charts</a></li><li class="navListItem"><a class="navItem" href="/wiki/Defining3DDisplays">Defining 3D Displays</a></li><li class="navListItem"><a class="navItem" href="/wiki/DefiningMonitorsAndInspectors">Defining monitors and inspectors</a></li><li class="navListItem"><a class="navItem" href="/wiki/DefiningExportFiles">Defining export files</a></li><li class="navListItem"><a class="navItem" href="/wiki/DefiningUserInteraction">Defining user interaction</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/ExploringModels">Exploring Models</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Run Several Simulations</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/RunSeveralSimulations">Run Several Simulations</a></li><li class="navListItem"><a class="navItem" href="/wiki/BatchExperiments">Defining Batch Experiments</a></li><li class="navListItem"><a class="navItem" href="/wiki/ExplorationMethods">Exploration Methods</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/OptimizingModelsSection">Optimizing Models</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Runtime Concepts</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/RuntimeConcepts">Runtime Concepts</a></li><li class="navListItem"><a class="navItem" href="/wiki/OptimizingModels">Optimizing Models</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/MultiParadigmModeling">Multi-Paradigm Modeling</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Control Architecture</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/ControlArchitecture">Control Architectures</a></li><li class="navListItem"><a class="navItem" href="/wiki/Equations">Using Equations</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Recipes<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/Recipes">Recipes</a></li><li class="navListItem"><a class="navItem" href="/wiki/ManipulateOSMDatas">Manipulate OSM Datas</a></li><li class="navListItem"><a class="navItem" href="/wiki/Diffusion">Implementing diffusion</a></li><li class="navListItem"><a class="navItem" href="/wiki/UsingDatabase">Using Database Access</a></li><li class="navListItem"><a class="navItem" href="/wiki/CallingR">CallingR</a></li><li class="navListItem"><a class="navItem" href="/wiki/UsingFIPAACL">Using FIPA ACL</a></li><li class="navListItem"><a class="navItem" href="/wiki/GamAnalyzer">Using GAMAnalyzer</a></li><li class="navListItem"><a class="navItem" href="/wiki/UsingBDI">Using BDI</a></li><li class="navListItem"><a class="navItem" href="/wiki/UsingDrivingSkill">Advanced Driving Skill</a></li><li class="navListItem"><a class="navItem" href="/wiki/ManipulateDates">Manipulate Dates</a></li><li class="navListItem"><a class="navItem" href="/wiki/ManipulateLight">Implementing light</a></li><li class="navListItem"><a class="navItem" href="/wiki/Comodel">Using Comodel</a></li><li class="navListItem"><a class="navItem" href="/wiki/Save-and-restore-simulations">Save and Restore simulations</a></li><li class="navListItem"><a class="navItem" href="/wiki/UsingNetwork">Using network</a></li><li class="navListItem"><a class="navItem" href="/wiki/Headless-mode-for-dummies">Headless-mode-for-dummies</a></li><li class="navListItem"><a class="navItem" href="/wiki/G__GraphicalEditor">The Graphical Editor</a></li><li class="navListItem"><a class="navItem" href="/wiki/FAQ">FAQ (Frequently Asked Questions)</a></li><li class="navListItem"><a class="navItem" href="/wiki/KnownIssues">Known issues</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">GAML References<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/GamlReference">GAML References</a></li><li class="navListItem"><a class="navItem" href="/wiki/BuiltInSpecies">Built-in Species</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Agent Built-in</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/AgentBuiltIn">The &#x27;agent&#x27; built-in species (Under Construction)</a></li><li class="navListItem"><a class="navItem" href="/wiki/ModelBuiltIn">The &#x27;model&#x27; built-in species (Under Construction)</a></li><li class="navListItem"><a class="navItem" href="/wiki/ExperimentBuiltIn">The &#x27;experiment&#x27; built-in species (Under Construction)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/BuiltInSkills">Built-in Skills</a></li><li class="navListItem"><a class="navItem" href="/wiki/BuiltInArchitectures">Built-in Architectures</a></li><li class="navListItem"><a class="navItem" href="/wiki/Statements">Statements</a></li><li class="navListItem"><a class="navItem" href="/wiki/DataTypes">Types</a></li><li class="navListItem"><a class="navItem" href="/wiki/FileTypes">File Types</a></li><li class="navListItem"><a class="navItem" href="/wiki/Expressions">Expressions</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Literals</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/Literals">Literals</a></li><li class="navListItem"><a class="navItem" href="/wiki/UnitsAndConstants">Units and constants</a></li><li class="navListItem"><a class="navItem" href="/wiki/PseudoVariables">Pseudo-variables</a></li><li class="navListItem"><a class="navItem" href="/wiki/VariablesAndAttributes">Variables and Attributes</a></li><li class="navListItem"><a class="navItem" href="/wiki/OperatorsAA">Operators (A to A)</a></li><li class="navListItem"><a class="navItem" href="/wiki/OperatorsBC">Operators (B to C)</a></li><li class="navListItem"><a class="navItem" href="/wiki/OperatorsDH">Operators (D to H)</a></li><li class="navListItem"><a class="navItem" href="/wiki/OperatorsIM">Operators (I to M)</a></li><li class="navListItem"><a class="navItem" href="/wiki/OperatorsNR">Operators (N to R)</a></li><li class="navListItem"><a class="navItem" href="/wiki/OperatorsSZ">Operators (S to Z)</a></li></ul></div><li class="navListItem"><a class="navItem" href="/wiki/Index">Exhaustive list of GAMA Keywords</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Extensions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/Extensions">Extensions</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingExtensions">Developing Extensions</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Installing the GIT version</h4><ul><li class="navListItem"><a class="navItem" href="/wiki/InstallingGitVersion">Installing the GIT version</a></li><li class="navListItem"><a class="navItem" href="/wiki/GamaArchitecture">Architecture of GAMA</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingPlugins">Developing Plugins</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingSkills">Developing a New Skill</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingStatements">Developing Statements</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingOperators">Developing Operators</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingTypes">Developing Types</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingSpecies">Developing Species</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingControlArchitectures">Developing architecture</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingIndexAnnotations">Index of annotations</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Developing GAMA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/developingGAMA">Get into the GAMA Java API</a></li><li class="navListItem"><a class="navItem" href="/wiki/DevelopingIScope">IScope interface</a></li><li class="navListItem"><a class="navItem" href="/wiki/CreatingAReleaseOfGama">Product your own release of GAMA</a></li><li class="navListItem"><a class="navItem" href="/wiki/Documentation">Documentation</a></li><li class="navListItem"><a class="navItem" href="/wiki/WebsiteGeneration">How to write the Website Content</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Scientific References<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/References">References</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Projects using GAMA<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/Projects">Projects</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Training Session<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/TrainingSession">Training Session</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle"></h4><ul><li class="navListItem"><a class="navItem" href="/wiki/Event__CC15_Reorganization">Introduction</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Events<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/Events">References</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Older versions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/wiki/OlderVersions">Versions of GAMA</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Graph Species</h1></header><article><div><span><p>Using a graph species enables to easily show interaction between agents of a same species. This kind of species is particularly useful when trying to show the interaction (especially the non-spatial one) that exist between agents.</p>
<h2><a class="anchor" aria-hidden="true" id="index"></a><a href="#index" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Index</h2>
<ul>
<li><a href="#declaration">Declaration</a>
<ul>
<li><a href="#declare-a-graph-with-handmade-agents">Declare a graph with handmade agents</a></li>
<li><a href="#declare-a-graph-by-using-an-geometry-file">Declare a graph by using an geometry file</a></li>
<li><a href="#declare-a-graph-with-nodes-and-edges">Declare a graph with nodes and edges</a></li>
</ul></li>
<li><a href="#useful-operators-with-graph">Useful operators with graph</a>
<ul>
<li><a href="#knowing-the-degree-of-a-node">Knowing the degree of a node</a></li>
<li><a href="#get-the-neighbors-of-a-node">Get the neighbors of a node</a></li>
<li><a href="#compute-the-shortest-path">Compute the shortest path</a></li>
<li><a href="#control-the-weight-in-graph">Control the weight in graph</a></li>
</ul></li>
<li><a href="#example">Example</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="declaration"></a><a href="#declaration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declaration</h2>
<h3><a class="anchor" aria-hidden="true" id="declare-a-graph-with-handmade-agents"></a><a href="#declare-a-graph-with-handmade-agents" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declare a graph with handmade agents</h3>
<p>To instantiate this <code>graph</code> species, several steps must be followed. First the graph species must inherit from the abstract species <code>graph_node</code>, then the method <code>related_to</code> must be redefined and finally an auxiliary species that inherits from <code>base_edge</code> used to represent the edges of the generated graph must be declared.
A graph node is an abstract species that must redefine one method called <code>related_to</code>.</p>
<pre><code class="hljs"><span class="hljs-literal">species</span> graph_agent <span class="hljs-symbol">parent:</span> graph_node <span class="hljs-symbol">edge_species:</span> edge_agent{
  <span class="hljs-literal">bool</span> related_to(graph_agent other){
    <span class="hljs-keyword">return</span> true;
  }
}

<span class="hljs-literal">species</span> edge_agent <span class="hljs-symbol">parent:</span> base_edge {
}
</code></pre>
<p>The method <code>related_to</code> returns a boolean, and take the agents from the current species in argument. If the method returns true, the two agents (the current instance and the one as argument) will be linked.</p>
<pre><code class="hljs">global{
    <span class="hljs-literal">int</span> number_of_agents &lt;- 5;
    init {
        <span class="hljs-keyword">create</span> graph_agent <span class="hljs-symbol">number:</span>number_of_agents;
    }
}

<span class="hljs-literal">species</span> graph_agent <span class="hljs-symbol">parent:</span> graph_node <span class="hljs-symbol">edge_species:</span> edge_agent{
  <span class="hljs-literal">bool</span> related_to(graph_agent other){
    <span class="hljs-keyword">return</span> true;
  }
  <span class="hljs-keyword">aspect</span> base {
    <span class="hljs-keyword">draw</span> circle(1) <span class="hljs-symbol">color:</span>#green;
  }
}

<span class="hljs-literal">species</span> edge_agent <span class="hljs-symbol">parent:</span> base_edge {
    <span class="hljs-keyword">aspect</span> base {
    <span class="hljs-keyword">draw</span> shape <span class="hljs-symbol">color:</span>#blue;
  }
}

<span class="hljs-builtin">experiment</span> MyExperiment <span class="hljs-symbol">type:</span> gui {
    <span class="hljs-keyword">output</span> {
        <span class="hljs-keyword">display</span> MyDisplay <span class="hljs-symbol">type:</span> java2D {
            <span class="hljs-literal">species</span> graph_agent <span class="hljs-symbol">aspect:</span>base;
            <span class="hljs-literal">species</span> edge_agent <span class="hljs-symbol">aspect:</span>base;
        }
    }
}
</code></pre>
<p><img src="../resources/images/definingAdvancedSpecies/graph_related_to.png" alt="graph_related_to.png"></p>
<p>You can for example link 2 agents when they are closer than a certain distance.
Beware: The topology used in graph species is the graph topology, and not the continuous topology. You can force the use of the continuous topology with the action <code>using</code> as follow:</p>
<pre><code class="hljs"><span class="hljs-literal">bool</span> related_to(graph_agent other){
    <span class="hljs-keyword">using</span> <span class="hljs-symbol">topology:</span><span class="hljs-literal">topology</span>(world) {
        <span class="hljs-keyword">return</span> (self.location distance_to other.location &lt; 20);
    }
}
</code></pre>
<p><img src="../resources/images/definingAdvancedSpecies/graph_related_to2.png" alt="graph_related_to2.png"></p>
<p>The abstract mother species &quot;graph_node&quot; has an attribute &quot;my_graph&quot;, with the type &quot;graph&quot;. The graph type represent a graph composed of vertices linked with edges. This type has built-in attributes such as <code>edges</code> (the list of all the edges agents), or <code>vertices</code> (the list of all the vertices agents).</p>
<h3><a class="anchor" aria-hidden="true" id="declare-a-graph-by-using-an-geometry-file"></a><a href="#declare-a-graph-by-using-an-geometry-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declare a graph by using an geometry file</h3>
<p>In most cases, you will have to construct a graph from an existing file (example: a &quot;shp&quot; file). In that case, you will have to first instantiate a species from the shape file (with the <code>create</code> statement, using the facet <code>from</code>). When, you will have to extract a graph from the agent, using the operator <code>as_edge_graph</code>.</p>
<pre><code class="hljs"><span class="hljs-builtin">model</span> load_shape_file 
 
global {
    <span class="hljs-literal">file</span> roads_shapefile &lt;- <span class="hljs-literal">file</span>(<span class="hljs-string">"../includes/road.shp"</span>);
    <span class="hljs-literal">geometry</span> shape &lt;- envelope(roads_shapefile);
    <span class="hljs-literal">graph</span> road_network;

    init {
        <span class="hljs-keyword">create</span> road <span class="hljs-symbol">from:</span> roads_shapefile;
        road_network &lt;- as_edge_graph(road);
    }
}

<span class="hljs-literal">species</span> road {
    <span class="hljs-keyword">aspect</span> geom {
        <span class="hljs-keyword">draw</span> shape <span class="hljs-symbol">color:</span> #black;
    }
}

<span class="hljs-builtin">experiment</span> main_experiment <span class="hljs-symbol">type:</span>gui{
    <span class="hljs-keyword">output</span> {
        <span class="hljs-keyword">display</span> <span class="hljs-literal">map</span> {
            <span class="hljs-literal">species</span> road <span class="hljs-symbol">aspect:</span>geom;       
        }
    }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="declare-a-graph-with-nodes-and-edges"></a><a href="#declare-a-graph-with-nodes-and-edges" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declare a graph with nodes and edges</h3>
<p>Another way to create a graph is building it manually nodes by nodes, and then edges by edges, without using agent structures. Use the <code>add_node</code> operator and the <code>add_edge</code> operator to do so. Here is an example of how to do:</p>
<pre><code class="hljs"><span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(0.0,0.0) <span class="hljs-symbol">to:</span>nodes;
<span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(90.0,90.0) <span class="hljs-symbol">to:</span>nodes;
<span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(20.0,20.0) <span class="hljs-symbol">to:</span>nodes;
<span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(40.0,50.0) <span class="hljs-symbol">to:</span>nodes;
<span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(100.0,0.0) <span class="hljs-symbol">to:</span>nodes;

<span class="hljs-keyword">loop</span> nod <span class="hljs-symbol">over:</span>nodes {
    my_graph &lt;- my_graph add_node(nod);
}
        
my_graph &lt;- my_graph add_edge (nodes at 0::nodes at 2);
my_graph &lt;- my_graph add_edge (nodes at 2::nodes at 3);
my_graph &lt;- my_graph add_edge (nodes at 3::nodes at 1);
my_graph &lt;- my_graph add_edge (nodes at 0::nodes at 4);
my_graph &lt;- my_graph add_edge (nodes at 4::nodes at 1);
</code></pre>
<p>Using this solution, my_graph can have two types: it can be an a-spatial graph, or a spatial graph. The spatial graph will have a proper geometry, with segments that follow the position of your graph (you can access to the segments by using the built-in &quot;segments&quot;). The a-spatial graph will not have any shape.</p>
<pre><code class="hljs">global
{
    <span class="hljs-literal">graph</span> my_spatial_graph&lt;-spatial_graph([]);
    <span class="hljs-literal">graph</span> my_aspatial_graph&lt;-<span class="hljs-literal">graph</span>([]);
    
    init {
        <span class="hljs-literal">point</span> node1 &lt;- {0.0,0.0};
        <span class="hljs-literal">point</span> node2 &lt;- {10.0,10.0};
        my_spatial_graph &lt;- my_spatial_graph add_node(node1);
        my_spatial_graph &lt;- my_spatial_graph add_node(node2);
        my_spatial_graph &lt;- my_spatial_graph add_edge(node1::node2);
        <span class="hljs-keyword">write</span> my_spatial_graph.edges;
        <span class="hljs-comment">// the output is [polyline ([{0.0,0.0,0.0},{10.0,10.0,0.0}])]</span>
        my_aspatial_graph &lt;- my_aspatial_graph add_node(node1);
        my_aspatial_graph &lt;- my_aspatial_graph add_node(node2);
        my_aspatial_graph &lt;- my_aspatial_graph add_edge(node1::node2);
        <span class="hljs-keyword">write</span> my_aspatial_graph.edges;
        <span class="hljs-comment">// the output is [{0.0,0.0,0.0}::{10.0,10.0,0.0}]</span>
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="useful-operators-with-graph"></a><a href="#useful-operators-with-graph" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Useful operators with graph</h2>
<h3><a class="anchor" aria-hidden="true" id="knowing-the-degree-of-a-node"></a><a href="#knowing-the-degree-of-a-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Knowing the degree of a node</h3>
<p>The operator <code>degree_of</code> returns the number of edge attached to a node. To use it, you have to specify a graph (on the left side of the operator), and a node (on the right side of the operator).</p>
<p>The following code (to put inside the node species) displays the number of edges attached to each node:</p>
<pre><code class="hljs"><span class="hljs-keyword">aspect</span> base
{
    <span class="hljs-keyword">draw</span> <span class="hljs-symbol">text:</span><span class="hljs-literal">string</span>(my_graph degree_of node(5)) <span class="hljs-symbol">color:</span># black;
    <span class="hljs-keyword">status</span> &lt;- 0;
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="get-the-neighbors-of-a-node"></a><a href="#get-the-neighbors-of-a-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Get the neighbors of a node</h3>
<p>To get the list of neighbors of a node, you should use the neighbors_of operator. On the left side of the operator, specify the graph you are using, and on the right side, specify the node. The operator returns the list of nodes located at a distance inferior or equal to 1, considering the graph topology.</p>
<pre><code class="hljs"><span class="hljs-literal">species</span> graph_agent <span class="hljs-symbol">parent:</span> graph_node <span class="hljs-symbol">edge_species:</span> edge_agent
{
  <span class="hljs-literal">list</span>&lt;graph_agent&gt; list_neighbors &lt;- <span class="hljs-literal">list</span>&lt;graph_agent&gt;(my_graph neighbors_of (self));
}
</code></pre>
<p>Here is an example of model using those two previous concepts (a random node is chosen each step, displayed in red, and his neighbors are displayed in yellow):</p>
<p><img src="../resources/images/definingAdvancedSpecies/graph_model.png" alt="graph_model.png"></p>
<pre><code class="hljs"><span class="hljs-builtin">model</span> graph_model

global
{
    <span class="hljs-literal">int</span> number_of_agents &lt;- 50;
    init
    {
        <span class="hljs-keyword">create</span> graph_agent <span class="hljs-symbol">number:</span> number_of_agents;
    }
    
    <span class="hljs-builtin">reflex</span> update {
        <span class="hljs-keyword">ask</span> graph_agent(one_of(graph_agent)) {
            <span class="hljs-keyword">status</span> &lt;- 2;
            <span class="hljs-keyword">do</span> update_neighbors;
        }
    }
}

<span class="hljs-literal">species</span> graph_agent <span class="hljs-symbol">parent:</span> graph_node <span class="hljs-symbol">edge_species:</span> edge_agent
{
    <span class="hljs-literal">int</span> <span class="hljs-keyword">status</span> &lt;- 0;
    <span class="hljs-literal">list</span>&lt;<span class="hljs-literal">int</span>&gt; list_connected_index;
    
    init {
        <span class="hljs-literal">int</span> i&lt;-0;
        <span class="hljs-keyword">loop</span> g <span class="hljs-symbol">over:</span>graph_agent {
            <span class="hljs-keyword">if</span> (flip(0.1)) {
                <span class="hljs-keyword">add</span> i <span class="hljs-symbol">to:</span>list_connected_index;
            }
            i &lt;- i+1;
        }
    }
    
    <span class="hljs-literal">bool</span> related_to(graph_agent other){
        <span class="hljs-keyword">if</span> (list_connected_index contains (graph_agent index_of other)) {
            <span class="hljs-keyword">return</span> true;
        }
        <span class="hljs-keyword">return</span> false;
    }
    
    <span class="hljs-keyword">action</span> update_neighbors {

        <span class="hljs-literal">list</span>&lt;graph_agent&gt; list_neighbors &lt;- <span class="hljs-literal">list</span>&lt;graph_agent&gt;(my_graph neighbors_of (self));

        <span class="hljs-keyword">loop</span> neighb <span class="hljs-symbol">over:</span>list_neighbors {
            neighb.<span class="hljs-keyword">status</span> &lt;- 1;
        }
    }

    <span class="hljs-keyword">aspect</span> base
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">status</span> = 0) {
            <span class="hljs-keyword">draw</span> circle(2) <span class="hljs-symbol">color:</span> # green;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">status</span> = 1) {
            <span class="hljs-keyword">draw</span> circle(2) <span class="hljs-symbol">color:</span> # yellow;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">status</span> = 2) {
            <span class="hljs-keyword">draw</span> circle(2) <span class="hljs-symbol">color:</span> # red;
        }
        <span class="hljs-keyword">draw</span> <span class="hljs-symbol">text:</span><span class="hljs-literal">string</span>(my_graph degree_of self) <span class="hljs-symbol">color:</span># black <span class="hljs-symbol">size:</span>4 <span class="hljs-symbol">at:</span><span class="hljs-literal">point</span>(self.location.x-1,self.location.y-2);
        <span class="hljs-keyword">status</span> &lt;- 0;
    }
}

<span class="hljs-literal">species</span> edge_agent <span class="hljs-symbol">parent:</span> base_edge
{
    <span class="hljs-keyword">aspect</span> base
    {
        <span class="hljs-keyword">draw</span> shape <span class="hljs-symbol">color:</span> # blue;
    }
}

<span class="hljs-builtin">experiment</span> MyExperiment <span class="hljs-symbol">type:</span> gui
{
    <span class="hljs-keyword">output</span>
    {
        <span class="hljs-keyword">display</span> MyDisplay <span class="hljs-symbol">type:</span> java2D
        {
            <span class="hljs-literal">species</span> graph_agent <span class="hljs-symbol">aspect:</span> base;
            <span class="hljs-literal">species</span> edge_agent <span class="hljs-symbol">aspect:</span> base;
        }
    }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="compute-the-shortest-path"></a><a href="#compute-the-shortest-path" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compute the shortest path</h3>
<p>To compute the shortest path to go from a point to another, pick a source and a destination among the vertices you have for your graph. Store those values as point type.</p>
<pre><code class="hljs"><span class="hljs-literal">point</span> source;
<span class="hljs-literal">point</span> destination;
source &lt;- <span class="hljs-literal">point</span>(one_of(my_graph.vertices));
destination &lt;- <span class="hljs-literal">point</span>(one_of(my_graph.vertices));
</code></pre>
<p>Then, you can use the operator <code>path_between</code> to return the shortest path. To use this action, you have to give the graph, then the source point, and the destination point. This action returns a path type.</p>
<pre><code class="hljs"><span class="hljs-literal">path</span> shortest_path;
shortest_path &lt;- path_between (my_graph, source,destination);
</code></pre>
<p>Another operator exists, <code>paths_between</code>, that returns a list of shortest paths between two points. Please read the documentation to learn more about this operator.</p>
<p>Here is an example of code that show the shortest path between two points of a graph:</p>
<p><img src="../resources/images/definingAdvancedSpecies/shortest_path.png" alt="shortest_path.png"></p>
<pre><code class="hljs"><span class="hljs-builtin">model</span> graph_model

global
{
    <span class="hljs-literal">int</span> number_of_agents &lt;- 50;
    <span class="hljs-literal">point</span> source;
    <span class="hljs-literal">point</span> target;
    <span class="hljs-literal">graph</span> my_graph;
    <span class="hljs-literal">path</span> shortest_path;
        
    init
    {
        <span class="hljs-keyword">create</span> graph_agent <span class="hljs-symbol">number:</span> number_of_agents;
    }
    
    <span class="hljs-builtin">reflex</span> pick_two_points {
        <span class="hljs-keyword">if</span> (my_graph=nil) {
            <span class="hljs-keyword">ask</span> graph_agent {
                myself.my_graph &lt;- self.my_graph;
                <span class="hljs-keyword">break</span>;
            }
        }
        shortest_path &lt;- nil;
        <span class="hljs-keyword">loop</span> <span class="hljs-symbol">while:</span>shortest_path=nil {
            source &lt;- <span class="hljs-literal">point</span>(one_of(my_graph.vertices));
            target &lt;- <span class="hljs-literal">point</span>(one_of(my_graph.vertices));
            <span class="hljs-keyword">if</span> (source != target) {
                shortest_path &lt;- path_between (my_graph, source,target);
            }
        }
    }
}

<span class="hljs-literal">species</span> graph_agent <span class="hljs-symbol">parent:</span> graph_node <span class="hljs-symbol">edge_species:</span> edge_agent
{
    <span class="hljs-literal">list</span>&lt;<span class="hljs-literal">int</span>&gt; list_connected_index;
    
    init {
        <span class="hljs-literal">int</span> i&lt;-0;
        <span class="hljs-keyword">loop</span> g <span class="hljs-symbol">over:</span>graph_agent {
            <span class="hljs-keyword">if</span> (flip(0.1)) {
                <span class="hljs-keyword">add</span> i <span class="hljs-symbol">to:</span>list_connected_index;
            }
            i &lt;- i+1;
        }
    }
    
    <span class="hljs-literal">bool</span> related_to(graph_agent other) {
        <span class="hljs-keyword">using</span> <span class="hljs-symbol">topology:</span><span class="hljs-literal">topology</span>(world) {
            <span class="hljs-keyword">return</span> (self.location distance_to other.location &lt; 20);
        }
    }

    <span class="hljs-keyword">aspect</span> base {
        <span class="hljs-keyword">draw</span> circle(2) <span class="hljs-symbol">color:</span> # green;
    }
}

<span class="hljs-literal">species</span> edge_agent <span class="hljs-symbol">parent:</span> base_edge
{
    <span class="hljs-keyword">aspect</span> base {
        <span class="hljs-keyword">draw</span> shape <span class="hljs-symbol">color:</span> # blue;
    }
}

<span class="hljs-builtin">experiment</span> MyExperiment <span class="hljs-symbol">type:</span> gui {
    <span class="hljs-keyword">output</span> {
        <span class="hljs-keyword">display</span> MyDisplay <span class="hljs-symbol">type:</span> java2D {
            <span class="hljs-literal">species</span> graph_agent <span class="hljs-symbol">aspect:</span> base;
            <span class="hljs-literal">species</span> edge_agent <span class="hljs-symbol">aspect:</span> base;
            <span class="hljs-keyword">graphics</span> <span class="hljs-string">"shortest path"</span> {
                <span class="hljs-keyword">if</span> (shortest_path != nil) {
                    <span class="hljs-keyword">draw</span> circle(3) <span class="hljs-symbol">at:</span> source <span class="hljs-symbol">color:</span> #yellow;
                    <span class="hljs-keyword">draw</span> circle(3) <span class="hljs-symbol">at:</span> target <span class="hljs-symbol">color:</span> #cyan;
                    <span class="hljs-keyword">draw</span> (shortest_path.shape+1) <span class="hljs-symbol">color:</span> #magenta;
                }
            }
        }
    }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="control-the-weight-in-graph"></a><a href="#control-the-weight-in-graph" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Control the weight in graph</h3>
<p>You can add a map of weight for the edges that compose the graph. Use the operator <code>with_weights</code> to put weights in your graph. The graph has to be on the left side of the operator, and the map has to be on the right side. In the map, you have to put edges as key, and the weight for that edge as value. One common use is to put the distance as weight:</p>
<pre><code class="hljs">my_graph &lt;- my_graph with_weights (my_graph.edges as_map (each::<span class="hljs-literal">geometry</span>(each).perimeter));
</code></pre>
<p>The calculation of shortest path can change according to the weight you choose for your edges. For example, here is the result of the calculation of the shortest path when all the edges have 1 as weight value (it is the default graph topology), and when the edges have their length as weight.</p>
<p><img src="../resources/images/definingAdvancedSpecies/path_weight.png" alt="path_weight.png"></p>
<p>Here is an example of implementation:</p>
<pre><code class="hljs"><span class="hljs-builtin">model</span> shortest_path_with_weight

global
{
    <span class="hljs-literal">graph</span> my_graph&lt;-spatial_graph([]);
    <span class="hljs-literal">path</span> shortest_path;
    <span class="hljs-literal">list</span>&lt;<span class="hljs-literal">point</span>&gt; nodes;
        
    init
    {
        <span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(10.0,10.0) <span class="hljs-symbol">to:</span>nodes;
        <span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(90.0,90.0) <span class="hljs-symbol">to:</span>nodes;
        <span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(40.0,20.0) <span class="hljs-symbol">to:</span>nodes;
        <span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(80.0,50.0) <span class="hljs-symbol">to:</span>nodes;
        <span class="hljs-keyword">add</span> <span class="hljs-literal">point</span>(90.0,20.0) <span class="hljs-symbol">to:</span>nodes;

        <span class="hljs-keyword">loop</span> nod <span class="hljs-symbol">over:</span>nodes {
            my_graph &lt;- my_graph add_node(nod);
        }
        
        my_graph &lt;- my_graph add_edge (nodes at 0::nodes at 2);
        my_graph &lt;- my_graph add_edge (nodes at 2::nodes at 3);
        my_graph &lt;- my_graph add_edge (nodes at 3::nodes at 1);
        my_graph &lt;- my_graph add_edge (nodes at 0::nodes at 4);
        my_graph &lt;- my_graph add_edge (nodes at 4::nodes at 1);
        
        <span class="hljs-comment">// comment/decomment the following line to see the difference.</span>
        my_graph &lt;- my_graph with_weights (my_graph.edges as_map (each::<span class="hljs-literal">geometry</span>(each).perimeter));
        
        shortest_path &lt;- path_between(my_graph,nodes at 0, nodes at 1);
    }
}

<span class="hljs-builtin">experiment</span> MyExperiment <span class="hljs-symbol">type:</span> gui {
    <span class="hljs-keyword">output</span> {
        <span class="hljs-keyword">display</span> MyDisplay <span class="hljs-symbol">type:</span> java2D {
            <span class="hljs-keyword">graphics</span> <span class="hljs-string">"shortest path"</span> {
                <span class="hljs-keyword">if</span> (shortest_path != nil) {
                    <span class="hljs-keyword">draw</span> circle(3) <span class="hljs-symbol">at:</span> <span class="hljs-literal">point</span>(shortest_path.source) <span class="hljs-symbol">color:</span> #yellow;
                    <span class="hljs-keyword">draw</span> circle(3) <span class="hljs-symbol">at:</span> <span class="hljs-literal">point</span>(shortest_path.target) <span class="hljs-symbol">color:</span> #cyan;
                    <span class="hljs-keyword">draw</span> (shortest_path.shape+1) <span class="hljs-symbol">color:</span> #magenta;
                }
                <span class="hljs-keyword">loop</span> edges <span class="hljs-symbol">over:</span> my_graph.edges {
                    <span class="hljs-keyword">draw</span> <span class="hljs-literal">geometry</span>(edges) <span class="hljs-symbol">color:</span> #black;
                }
            }
        }
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/wiki/GridSpecies"><span class="arrow-prev">← </span><span>Grid Species</span></a><a class="docs-next button" href="/wiki/MirrorSpecies"><span>Mirror species</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#index">Index</a></li><li><a href="#declaration">Declaration</a><ul class="toc-headings"><li><a href="#declare-a-graph-with-handmade-agents">Declare a graph with handmade agents</a></li><li><a href="#declare-a-graph-by-using-an-geometry-file">Declare a graph by using an geometry file</a></li><li><a href="#declare-a-graph-with-nodes-and-edges">Declare a graph with nodes and edges</a></li></ul></li><li><a href="#useful-operators-with-graph">Useful operators with graph</a><ul class="toc-headings"><li><a href="#knowing-the-degree-of-a-node">Knowing the degree of a node</a></li><li><a href="#get-the-neighbors-of-a-node">Get the neighbors of a node</a></li><li><a href="#compute-the-shortest-path">Compute the shortest path</a></li><li><a href="#control-the-weight-in-graph">Control the weight in graph</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/gama-logo.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Networks</h5><a href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank"><i class="fab fa-youtube"></i> Youtube</a><a href="https://www.linkedin.com/company/gama-platform" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a><a href="https://twitter.com/gamaplatform" target="_blank"><i class="fab fa-twitter"></i> Twitter</a><a href="https://www.facebook.com/GamaPlatform/" target="_blank"><i class="fab fa-facebook"></i> Facebook</a></div><div><h5>Mailing list</h5><a href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br/>gama-platform@googlegroups.com</a><a href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br/>gama-dev@googlegroups.com</a></div><div><h5>Ecosystem</h5><a href="https://github.com/gama-platform/gama"><i class="fab fa-github"></i> GitHub Gama</a><a href="https://github.com/gama-platform/gama.experimental"><i class="fas fa-puzzle-piece"></i> Gama Experimental Plugins</a><a href="https://github.com/gama-platform/gama.models.experimental"><i class="fas fa-scroll"></i> Gama Experimental Models</a></div></section><section class="copyright">Copyright © 2019 GAMA-Platform</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'undefined',
                inputSelector: '#search_input_react'
              });
            </script></body></html>