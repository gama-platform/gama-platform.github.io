<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Creating color and sort cubes by color · GAMA-Platform</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="[//]: # (keyword|operator_cube)"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Creating color and sort cubes by color · GAMA-Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://gama-platform.github.io/"/><meta property="og:description" content="[//]: # (keyword|operator_cube)"/><meta property="og:image" content="https://gama-platform.github.io//resources/images/general/GamaPlatform.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://gama-platform.github.io//resources/images/general/GamaPlatform.png"/><link rel="shortcut icon" href="/img/gama-logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://gama-platform.github.io/blog/atom.xml" title="GAMA-Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://gama-platform.github.io/blog/feed.xml" title="GAMA-Platform Blog RSS Feed"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.4.4/fuse.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="/js/searchEngine.js"></script><script type="text/javascript" src="/js/dark.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/gama-logo_white.png" alt="GAMA-Platform"/><h2 class="headerTitleWithLogo">GAMA-Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/wiki/Home" target="_self">Documentation</a></li><li class=""><a href="/wiki/Tutorials" target="_self">Tutorials</a></li><li class=""><a href="/download" target="_self">Download</a></li><li class=""><a href="/wiki/Contribute" target="_self">Contribute</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="/faq" target="_self">FAQ</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Creating color and sort cubes by color</h1></header><article><div><span><p><em>Author :  Arnaud Grignard</em></p>
<p>A model to show how to create color by using the rgb operator, the color depending on the position of cube in the xyz space. The cubes are randomly mixed to finally be sorted according to the color of each vertix of the whole big cube, using the bubble sort algorithm (<a href="https://en.wikipedia.org/wiki/Bubble_sort">https://en.wikipedia.org/wiki/Bubble_sort</a>).</p>
<p>Code of the model :</p>
<pre><code class="hljs">
<span class="hljs-builtin">model</span> bubblesort3D


global {

<span class="hljs-comment">//Number of cubes by faces of the whole big cube</span>
<span class="hljs-literal">int</span> nb_cells&lt;-15;

<span class="hljs-literal">geometry</span> shape &lt;- cube(nb_cells) ;


<span class="hljs-literal">bool</span> change &lt;- true;

init {
    <span class="hljs-comment">//We create nb_cells^3 cubes and we define their color depending on their position in XYZ</span>
    <span class="hljs-keyword">loop</span> i <span class="hljs-symbol">from:</span>0 <span class="hljs-symbol">to:</span>nb_cells-1{
        <span class="hljs-keyword">loop</span> j <span class="hljs-symbol">from:</span>0 <span class="hljs-symbol">to:</span> nb_cells-1{
            <span class="hljs-keyword">loop</span> k <span class="hljs-symbol">from:</span>0 <span class="hljs-symbol">to:</span>nb_cells-1{
              <span class="hljs-keyword">create</span> cells{
                location &lt;-{i mod nb_cells,j mod nb_cells, k mod nb_cells};
                
                <span class="hljs-comment">//The canal RGB limit color to 255 by canal</span>
                red &lt;- <span class="hljs-literal">float</span>((i mod nb_cells)* <span class="hljs-literal">int</span>(255 / nb_cells));
                green &lt;- <span class="hljs-literal">float</span>((j mod nb_cells) * <span class="hljs-literal">int</span>(255 / nb_cells));
                blue &lt;- <span class="hljs-literal">float</span>((k mod nb_cells) * <span class="hljs-literal">int</span>(255 / nb_cells));
                
                <span class="hljs-comment">//We create the color according to the value of the red, green and blue canals</span>
                color &lt;- <span class="hljs-literal">rgb</span>(red,green,blue);
              } 
            }   
        }
    }
    
    <span class="hljs-comment">//We mix all the cubes randomly by permuting two randomly chosen cubes</span>
    <span class="hljs-keyword">loop</span> <span class="hljs-symbol">times:</span> 10000 {
            <span class="hljs-keyword">ask</span> one_of(cells) {
                cells one_cells &lt;- one_of(cells);
                <span class="hljs-keyword">if</span> (self != one_cells) {
                    <span class="hljs-literal">point</span> loc &lt;- copy(location);
                    location &lt;- one_cells.location;
                    one_cells.location &lt;- loc;
                }
            }
        }
    
        

}

<span class="hljs-comment">//Reflex to finish the execution of the model when nothing has changed during the cycle</span>
<span class="hljs-builtin">reflex</span> end {
    <span class="hljs-keyword">if</span> (not change) {
        <span class="hljs-keyword">do</span> pause;   
    } 
    change &lt;- false;
    }
}


<span class="hljs-literal">species</span> cells{

    <span class="hljs-literal">rgb</span> color;
    <span class="hljs-literal">float</span> red;
    <span class="hljs-literal">float</span> green;
    <span class="hljs-literal">float</span> blue;
    <span class="hljs-literal">list</span>&lt;cells&gt; neigbhours <span class="hljs-symbol">update:</span> cells at_distance (1.1);
    
    <span class="hljs-comment">//Update of the neighbors cubes at each cycle of the simulation according to their location</span>
    cells upper_cell_y <span class="hljs-symbol">update:</span> neigbhours first_with (shape.location.y &gt; each.shape.location.y);
    cells upper_cell_x <span class="hljs-symbol">update:</span> neigbhours first_with (shape.location.x &gt; each.shape.location.x);
    cells upper_cell_z <span class="hljs-symbol">update:</span> neigbhours first_with (shape.location.z &gt; each.shape.location.z);
    
    <span class="hljs-comment">//We permute the cube agent with its neighbor if its intensity is greater according to the canal related to its axis (z for canal blue, y for green and x for red)</span>
    <span class="hljs-builtin">reflex</span> swap_z <span class="hljs-symbol">when:</span> upper_cell_z != nil and blue &lt; upper_cell_z.blue{ 
        <span class="hljs-literal">point</span> tmp1Loc &lt;-location;
        location &lt;- upper_cell_z.location;  
        upper_cell_z.location&lt;-tmp1Loc;     
        change &lt;- true; 
    }
    
    <span class="hljs-builtin">reflex</span> swap_y <span class="hljs-symbol">when:</span> upper_cell_y != nil and green &lt; upper_cell_y.green{ 
        <span class="hljs-literal">point</span> tmp1Loc &lt;-location;
        location &lt;- upper_cell_y.location;  
        upper_cell_y.location&lt;-tmp1Loc;     
        change &lt;- true; 
    }
    
    <span class="hljs-builtin">reflex</span> swap_x <span class="hljs-symbol">when:</span> upper_cell_x != nil and red &lt; upper_cell_x.red{ 
        <span class="hljs-literal">point</span> tmp1Loc &lt;-location;
        location &lt;- upper_cell_x.location;  
        upper_cell_x.location&lt;-tmp1Loc;     
        change &lt;- true; 
    }

    <span class="hljs-keyword">aspect</span> <span class="hljs-keyword">default</span> {
        <span class="hljs-keyword">draw</span> cube(1) <span class="hljs-symbol">color:</span>color <span class="hljs-symbol">border:</span>color <span class="hljs-symbol">at:</span>location;
    }   
}


<span class="hljs-builtin">experiment</span> Display <span class="hljs-symbol">type:</span> gui {
    <span class="hljs-keyword">output</span> {
        <span class="hljs-keyword">display</span> View1 <span class="hljs-symbol">type:</span>opengl <span class="hljs-symbol">draw_env:</span>false{
            <span class="hljs-literal">species</span> cells <span class="hljs-symbol">transparency:</span>0.1;
            <span class="hljs-keyword">graphics</span> <span class="hljs-string">"di"</span>{
             <span class="hljs-keyword">draw</span> <span class="hljs-string">"black(0,0,0)"</span> <span class="hljs-symbol">at:</span>{0,0,0} <span class="hljs-symbol">color:</span>°black <span class="hljs-symbol">perspective:</span>false;
             <span class="hljs-keyword">draw</span> <span class="hljs-string">"red(1,0,0)"</span> <span class="hljs-symbol">at:</span>{world.shape.width,0,0} <span class="hljs-symbol">color:</span>°red <span class="hljs-symbol">perspective:</span>false;
             <span class="hljs-keyword">draw</span> <span class="hljs-string">"green(0,1,0)"</span> <span class="hljs-symbol">at:</span>{0,world.shape.height,0} <span class="hljs-symbol">color:</span>°green <span class="hljs-symbol">perspective:</span>false;
             <span class="hljs-keyword">draw</span> <span class="hljs-string">"blue(0,0,1)"</span> <span class="hljs-symbol">at:</span>{0,0,world.shape.width} <span class="hljs-symbol">color:</span>°blue <span class="hljs-symbol">perspective:</span>false;
             <span class="hljs-keyword">draw</span> <span class="hljs-string">"yellow(1,1,0)"</span> <span class="hljs-symbol">at:</span>{world.shape.width,world.shape.height,0} <span class="hljs-symbol">color:</span>°yellow <span class="hljs-symbol">perspective:</span>false;
             <span class="hljs-keyword">draw</span> <span class="hljs-string">"magenta(1,0,1)"</span> <span class="hljs-symbol">at:</span>{world.shape.width,0,world.shape.depth} <span class="hljs-symbol">color:</span>°magenta <span class="hljs-symbol">perspective:</span>false;
             <span class="hljs-keyword">draw</span> <span class="hljs-string">"cyan(0,1,1)"</span> <span class="hljs-symbol">at:</span>{0,world.shape.height,world.shape.depth} <span class="hljs-symbol">color:</span>°cyan <span class="hljs-symbol">perspective:</span>false;
             <span class="hljs-keyword">draw</span> <span class="hljs-string">"white(1,1,1)"</span> <span class="hljs-symbol">at:</span>{world.shape.width,world.shape.height,world.shape.depth} <span class="hljs-symbol">color:</span>°white <span class="hljs-symbol">perspective:</span>false;    
            }
        }
    }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap" style="margin-bottom:0"><a href="/" class="nav-home"><img src="/img/gama-logo.png" alt="GAMA-Platform" width="66" height="58"/></a><div><h5>Networks</h5><a href="https://github.com/gama-platform"><i class="fab fa-github"></i> GitHub</a><a href="https://www.facebook.com/GamaPlatform/" target="_blank"><i class="fab fa-facebook"></i> Facebook</a><a href="https://twitter.com/gamaplatform" target="_blank"><i class="fab fa-twitter"></i> Twitter</a><a href="https://www.linkedin.com/company/gama-platform" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a><a href="https://www.youtube.com/channel/UCWJ1kWGDDI-9u2f2uD0gcaQ" target="_blank"><i class="fab fa-youtube"></i> Youtube</a><a href="https://gama-platform.github.io/blog/feed" target="_blank"><i class="fa fa-rss"></i> Blog RSS</a></div><div style="flex-grow:2"><h5>Mailing list</h5><a href="https://groups.google.com/forum/#!forum/gama-platform" target="_blank"><i class="fas fa-envelope"></i> For Users<br/>gama-platform@googlegroups.com</a><a href="https://groups.google.com/forum/#!forum/gama-dev" target="_blank"><i class="fas fa-envelope"></i> For Developers<br/>gama-dev@googlegroups.com</a></div><div style="color:hsla(0,0%,100%,.4);flex-grow:3"><h5>License</h5><p>Copyright (C) - 2020 GAMA-Platform.</p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.</p><p>A copy of the license is included <a href="https://github.com/gama-platform/gama/wiki/LICENSE.md" style="display:initial">here</a>, in the repository of the wiki content.</p></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.fbAsyncInit = function() {FB.init({appId:'524881055001796',xfbml:true,version:'v2.7'});};(function(d, s, id){var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) {return;}js = d.createElement(s); js.id = id;js.src = '//connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js, fjs);}(document, 'script','facebook-jssdk'));
                </script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'undefined',
                inputSelector: '#search_input_react'
              });
            </script></body></html>