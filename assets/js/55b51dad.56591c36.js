"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[76338],{10458:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var n=t(74848),o=t(28453);const a={title:"12. Image loading"},l=void 0,r={id:"PredatorPrey_step12",title:"12. Image loading",description:"This 12th step illustrates how to load an image file and to use it to initialize a grid.",source:"@site/versioned_docs/version-1.9.3/PredatorPrey_step12.md",sourceDirName:".",slug:"/PredatorPrey_step12",permalink:"/wiki/PredatorPrey_step12",draft:!1,unlisted:!1,editUrl:"https://github.com/gama-platform/gama/wiki/PredatorPrey_step12/_edit",tags:[],version:"1.9.3",frontMatter:{title:"12. Image loading"},sidebar:"tuto",previous:{title:"11. Writing Files",permalink:"/wiki/PredatorPrey_step11"},next:{title:"13. Model exploration",permalink:"/wiki/PredatorPrey_step13"}},s={},d=[{value:"Formulation",id:"formulation",level:2},{value:"Model Definition",id:"model-definition",level:2},{value:"global variable",id:"global-variable",level:3},{value:"Model initialization",id:"model-initialization",level:3},{value:"Complete Model",id:"complete-model",level:2}];function c(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.p,{children:"This 12th step illustrates how to load an image file and to use it to initialize a grid."}),"\n",(0,n.jsx)(i.h2,{id:"formulation",children:"Formulation"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Building of the initial environment (",(0,n.jsx)(i.code,{children:"food"})," and ",(0,n.jsx)(i.code,{children:"food_prod"})," of the cells) from an image file."]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"model-definition",children:"Model Definition"}),"\n",(0,n.jsx)(i.h3,{id:"global-variable",children:"global variable"}),"\n",(0,n.jsx)(i.p,{children:"We add a new global variable to store the image data:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:'file map_init <- image_file("../includes/data/raster_map.png");\n'})}),"\n",(0,n.jsxs)(i.p,{children:["The image file is here: ",(0,n.jsx)(i.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(82129).A+"",children:(0,n.jsx)(i.img,{alt:"Image to initialize the Prey Predator tutorial model.",src:t(10819).A+"",width:"50",height:"50"})})]}),"\n",(0,n.jsxs)(i.p,{children:["You have to copy it in your project folder: ",(0,n.jsx)(i.code,{children:"includes/data/"}),"."]}),"\n",(0,n.jsx)(i.h3,{id:"model-initialization",children:"Model initialization"}),"\n",(0,n.jsxs)(i.p,{children:["In order to have a more complex environment, we want to use this image as the initialization of the environment. The food level available in a ",(0,n.jsx)(i.code,{children:"vegetation_cell"})," will be based on the green level of the corresponding pixel in the image. You will be able to use such a process to represent an existing real environment in your model."]}),"\n",(0,n.jsxs)(i.p,{children:["We modify the global ",(0,n.jsx)(i.code,{children:"init"})," of the model in order to cast the image file in a matrix."]}),"\n",(0,n.jsxs)(i.p,{children:["First of all, when the variable ",(0,n.jsx)(i.code,{children:"map_init"})," is defined from an image file (or a csv file), it can be manipulated directly as a matrix, with the dimensions of the image (here it is a 50x50 image, which matches with the grid size). In the case we need to resize the image, we can use the ",(0,n.jsx)(i.strong,{children:(0,n.jsx)(i.code,{children:"file as_matrix  {nb_cols, nb_lines}"})})," operator that allows converting a file (image, csv) to a matrix composed of ",(0,n.jsx)(i.code,{children:"nb_cols"})," columns and ",(0,n.jsx)(i.code,{children:"nb_lines"})," lines."]}),"\n",(0,n.jsxs)(i.p,{children:["Concerning the manipulation of a matrix, it is possible to obtain the element [i,j] of a matrix by using ",(0,n.jsx)(i.strong,{children:(0,n.jsx)(i.code,{children:"my_matrix [i,j]"})}),"."]}),"\n",(0,n.jsxs)(i.p,{children:["A grid can be view as a spatial matrix: each cell of a grid has two built-in variables ",(0,n.jsx)(i.strong,{children:(0,n.jsx)(i.code,{children:"grid_x"})})," and ",(0,n.jsx)(i.strong,{children:(0,n.jsx)(i.code,{children:"grid_y"})})," that represent the column and line indexes of the cell."]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"init {\n    create prey number: nb_preys_init ;\n    create predator number: nb_predators_init ;\n    ask vegetation_cell {\n\tcolor <- rgb (map_init at {grid_x,grid_y}) ;\n\tfood <- 1 - (((color as list) at 0) / 255) ;\n\tfood_prod <- food / 100 ; \n    }\n}\n"})}),"\n",(0,n.jsx)(i.h2,{id:"complete-model",children:"Complete Model"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-gaml",metastring:"reference",children:"https://github.com/gama-platform/gama/blob/GAMA_1.9.2/msi.gama.models/models/Tutorials/Predator%20Prey/models/Model%2012.gaml\n"})})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},82129:(e,i,t)=>{t.d(i,{A:()=>n});const n=t.p+"assets/files/predator_prey_raster_map-158f46d83af6358b0098079ad4930bf0.png"},10819:(e,i,t)=>{t.d(i,{A:()=>n});const n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEUy/zLm/+ag/6AA/wBu/27///8prE2pAAAAAWJLR0QF+G/pxwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB+QCDgQSKeZRlwQAAACgSURBVDjLrdHRDcMgDEVRGMHFC8AGyCt4/5lqqqDi8qyItu+ToxshkpItk1t7bUCic8mhECECyUUosT2GZCQ0BIJFQWJRkFgUCv0kIh2L2KAU2Si9E/Ef9CKblHvpX4j8QygWCqXcSg9lfYO6ypJwaquQkzbvVtz/0SnbhlRwzhqIAZRxjkWnfBqHoos0kADRc2EvdU824UhUA+FN2pE8AaK0hHiHHhVbAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTAyLTE0VDA0OjA4OjQwKzAwOjAwfJvDXwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wMi0xNFQwNDowODo0MCswMDowMA3Ge+MAAAAASUVORK5CYII="},28453:(e,i,t)=>{t.d(i,{R:()=>l,x:()=>r});var n=t(96540);const o={},a=n.createContext(o);function l(e){const i=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),n.createElement(a.Provider,{value:i},e.children)}}}]);